(function(){"use strict";var n=function(n,t){function r(n){var r=this.options={};for(var t in i)r[t]=i[t];for(t in n)r[t]=n[t]}if(n&&t){var u=function(n){return typeof n=="function"},i={nodeSep:undefined,edgeSep:undefined,rankSep:undefined,rankDir:undefined,minLen:function(){return 1},edgeWeight:function(){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:undefined,boundingBox:undefined,ready:function(){},stop:function(){}};r.prototype.run=function(){var f=this.options,nt=this,l=f.cy,w=f.eles,b=function(n,t){return u(t)?t.apply(n,[n]):t},n=f.boundingBox||{x1:0,y1:0,w:l.width(),h:l.height()},s,a,o,v,h,y,r,p,d,i,g;n.x2===undefined&&(n.x2=n.x1+n.w);n.w===undefined&&(n.w=n.x2-n.x1);n.y2===undefined&&(n.y2=n.y1+n.h);n.h===undefined&&(n.h=n.y2-n.y1);var e=new t.graphlib.Graph({multigraph:!0,compound:!0}),k={},c=function(n,t){t!=null&&(k[n]=t)};for(c("nodesep",f.nodeSep),c("edgesep",f.edgeSep),c("ranksep",f.rankSep),c("rankdir",f.rankDir),e.setGraph(k),e.setDefaultEdgeLabel(function(){return{}}),e.setDefaultNodeLabel(function(){return{}}),s=w.nodes(),r=0;r<s.length;r++)o=s[r],a=o.boundingBox(),e.setNode(o.id(),{width:a.w,height:a.h,name:o.id()});for(r=0;r<s.length;r++)o=s[r],o.isChild()&&e.setParent(o.id(),o.parent().id());for(v=w.edges().stdFilter(function(n){return!n.source().isParent()&&!n.target().isParent()}),r=0;r<v.length;r++)h=v[r],e.setEdge(h.source().id(),h.target().id(),{minlen:b(h,f.minLen),weight:b(h,f.edgeWeight),name:h.id()},h.id());for(t.layout(e),y=e.nodes(),r=0;r<y.length;r++)p=y[r],d=e.node(p),l.getElementById(p).scratch().dagre=d;return f.boundingBox?(i={x1:Infinity,x2:-Infinity,y1:Infinity,y2:-Infinity},s.forEach(function(n){var t=n.scratch().dagre;i.x1=Math.min(i.x1,t.x);i.x2=Math.max(i.x2,t.x);i.y1=Math.min(i.y1,t.y);i.y2=Math.max(i.y2,t.y)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1):i=n,g=function(t){if(f.boundingBox){var r=(t.x-i.x1)/i.w,u=(t.y-i.y1)/i.h;return{x:n.x1+r*n.w,y:n.y1+u*n.h}}return t},s.layoutPositions(nt,f,function(){var n=this.scratch().dagre;return g({x:n.x,y:n.y})}),this};n("layout","dagre",r)}};typeof module!="undefined"&&module.exports&&(module.exports=n);typeof define!="undefined"&&define.amd&&define("cytoscape-dagre",function(){return n});typeof cytoscape!="undefined"&&typeof dagre!="undefined"&&n(cytoscape,dagre)})();