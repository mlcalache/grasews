function clearCytoscape(){cy.elements().remove()}function fillCytoscape(n){cy=window.cy=cytoscape({wheelSensitivity:.5,container:document.getElementById("graph_container"),boxSelectionEnabled:!1,autounselectify:!0,layout:{name:"dagre"},style:[{selector:"node",style:{content:"data(label)",color:"#000","text-valign":"top","text-halign":"left","text-outline-width":0,"text-outline-color":"#000","font-size":20,width:40,height:20}},{selector:".node",style:{"border-style":"solid","border-width":2,"border-color":"#000","border-opacity":.3}},{selector:".ontology-node",style:{shape:"circle","background-opacity":.7,"background-color":"#FF0000",width:20,height:20,"border-style":"solid","border-width":2,"border-color":"#000","border-opacity":.3}},{selector:".group",style:{"text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":10}},{selector:":parent",style:{"background-color":"#ffffff"}},{selector:".node-wsdl-interface",style:{"background-opacity":.3,"background-color":"#4287f5",shape:"hexagon",width:80,height:40}},{selector:".node-wsdl-operation",style:{"background-opacity":.3,"background-color":"#00FFFF",shape:"hexagon",width:70,height:35}},{selector:".node-wsdl-input",style:{"background-opacity":.3,"background-color":"#00c954",shape:"hexagon",width:50,height:25}},{selector:".node-wsdl-output",style:{"background-opacity":.3,"background-color":"#ff00a9",shape:"hexagon",width:50,height:25}},{selector:".node-wsdl-infault",style:{"background-opacity":.3,"background-color":"#a52a2a",shape:"hexagon",width:50,height:25}},{selector:".node-wsdl-outfault",style:{"background-opacity":.3,"background-color":"#a52a2a",shape:"hexagon",width:50,height:25}},{selector:".node-wsdl-fault",style:{"background-opacity":.3,"background-color":"#a52a2a",shape:"hexagon",width:50,height:25}},{selector:".node-xsd-complex-type",style:{"background-opacity":.3,"background-color":"#c6c6c6",shape:"rectangle",width:30,height:30}},{selector:".node-xsd-simple-type",style:{"background-opacity":.3,"background-color":"#ffa500",shape:"rectangle",width:13,height:13}},{selector:".node-wsdl-interface-annotated",style:{"background-opacity":1,"background-color":"#4287f5",shape:"hexagon",width:80,height:40,"border-opacity":1,"border-width":4}},{selector:".node-wsdl-operation-annotated",style:{"background-opacity":1,"background-color":"#00FFFF",shape:"hexagon",width:70,height:35,"border-opacity":1,"border-width":4}},{selector:".node-xsd-complex-type-annotated",style:{"background-opacity":1,"background-color":"#c6c6c6",shape:"rectangle",width:30,height:30,"border-opacity":1,"border-width":4}},{selector:".node-xsd-simple-type-annotated",style:{"background-opacity":1,"background-color":"#ffa500",shape:"rectangle",width:13,height:13,"border-opacity":1,"border-width":4}},{selector:".node-wsdl-interface-model-reference",style:{"border-color":"#F00"}},{selector:".node-wsdl-operation-model-reference",style:{"border-color":"#F00"}},{selector:".node-xsd-complex-type-model-reference",style:{"border-color":"#F00"}},{selector:".node-xsd-simple-type-model-reference",style:{"border-color":"#F00"}},{selector:".node-xsd-complex-type-schema-mapping",style:{"border-style":"double"}},{selector:".node-xsd-simple-type-schema-mapping",style:{"border-style":"double"}},{selector:"edge",style:{width:.5}},{selector:"edge.edge-service-description-nodes",style:{"curve-style":"bezier","line-color":"#000","source-arrow-color":"#000","source-arrow-shape":"vee"}},{selector:"edge.edge-model-reference-nodes",style:{"curve-style":"bezier","line-color":"#FF0000","line-style":"dashed","edge-text-rotation":"autorotate","font-size":"8px",color:"#333333"}},{selector:"edge.edge-intermediate-ontology-term-nodes",style:{"curve-style":"bezier","line-color":"#C0C0C0","target-arrow-color":"#C0C0C0","target-arrow-shape":"triangle","line-style":"solid"}},{selector:".node-with-issues",style:{"background-color":"#FF0"}},{selector:".multiline-manual",style:{"text-wrap":"wrap"}}],elements:n});cy=createContextMenusForGraph(cy);cy.on("tap","node",function(n){var t=n.cyTarget});cy.on("tap","edge",function(n){var t=n.cyTarget});initialZoom=cy.zoom();zoom=initialZoom;resetGraphLayout();cy.on("zoom",function(){zoom=cy.zoom();var n=Math.floor(zoom/initialZoom*100);$("#zoomValue").text(n+"%")})}function resetGraphLayout(){cy.fit();zoom=initialZoom;cy.zoom(zoom);$("#zoomValue").text("100%");cy.layout()}function adjustUserNodesPositionsOnGraph(n){var t=cy.json();$.each(n.nodes,function(n,i){if(i.position){var r=findNode(i.data.id,t.elements.nodes);r.position=i.position}});cy.json(t);cy.fit()}function displayChildrenNodesFromParentNode(n,t){var u=n.connectedEdges(),f,i,r;for(t=$(n).attr("has-hidden-child-node")!=="true",f=n.style("display")!=="element",i=0;i<u.length;i++)u[i].source()!==n&&(r=u[i].target(),f&&t?r.style("display","element"):f&&u[i].source().style("display")!=="element"?(r.style("display","element"),t=!0):(r.style("display","none"),t=!1),displayChildrenNodesFromParentNode(r,t));$(n).attr("has-hidden-child-node","false")}function displayChildrenNodesFromParentEdge(n){var r=n.target(),u=r.connectedEdges(),f,e,t,i;for(r.style("display")!=="none"?r.style("display","element"):r.style("display","none"),e=r.style("display")!=="element",t=0;t<u.length;t++)u[t].source()!==r&&(i=u[t].target(),e?i.style("display")!=="none"&&u[t].source().style("display")!=="element"?(i.style("display","element"),f=!0):(i.hasClass("ola")||i.style("display","none"),f=!1):(i.hasClass("ola")||i.style("display","none"),f=!1),displayChildrenNodesFromParentNode(i,f)),r.style("display")!=="none"?$(u[t].source()).attr("has-hidden-child-node","false"):$(u[t].source()).attr("has-hidden-child-node","true")}function cytoscapeContextMenuAddModelReference(n){var t=n.data("name"),i=n.data("node-type"),r=n.data("id-wsdl-element"),u=n.data("id-node-type"),f=n.data("id-service-description");modalAddModelReference(r,u,i,t,f)}function cytoscapeContextMenuRemoveModelReference(n){var t=n.data("name"),i=n.data("node-type"),r=n.data("id-wsdl-element"),u=n.data("id-node-type"),f=n.data("id-service-description");modalRemoveModelReference(r,u,i,t,f)}function cytoscapeContextMenuAddLiftingSchemaMapping(n){var t=n.data("name"),i=n.data("node-type"),r=n.data("id-wsdl-element"),u=n.data("id-node-type"),f=n.data("id-service-description");modalAddLiftingSchemaMapping(r,u,i,t,f)}function cytoscapeContextMenuRemoveLiftingSchemaMapping(n){var t=n.data("name"),i=n.data("node-type"),r=n.data("id-wsdl-element"),u=n.data("id-node-type"),f=n.data("id-service-description");modalRemoveLiftingSchemaMapping(r,u,i,t,f)}function cytoscapeContextMenuAddLoweringSchemaMapping(n){var t=n.data("name"),i=n.data("node-type"),r=n.data("id-wsdl-element"),u=n.data("id-node-type"),f=n.data("id-service-description");modalAddLoweringSchemaMapping(r,u,i,t,f)}function cytoscapeContextMenuRemoveLoweringSchemaMapping(n){var t=n.data("name"),i=n.data("node-type"),r=n.data("id-wsdl-element"),u=n.data("id-node-type"),f=n.data("id-service-description");modalRemoveLoweringSchemaMapping(r,u,i,t,f)}function createContextMenuForModelReferenceAndSchemaMappingWithNoAnnotations(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",select:function(n){cytoscapeContextMenuAddLiftingSchemaMapping(n)}},{content:"Add Lowering Schema Mapping",select:function(n){cytoscapeContextMenuAddLoweringSchemaMapping(n)}},{content:"Remove Lowering Schema Mapping",disabled:!0},{content:"Remove Lifting Schema Mapping",disabled:!0},{content:"Remove Model Reference",disabled:!0}]}),n}function createContextMenuForModelReferenceAndSchemaMappingWithModelReferenceAnnotated(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping-with-model-reference-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",select:function(n){cytoscapeContextMenuAddLiftingSchemaMapping(n)}},{content:"Add Lowering Schema Mapping",select:function(n){cytoscapeContextMenuAddLoweringSchemaMapping(n)}},{content:"Remove Lowering Schema Mapping",disabled:!0},{content:"Remove Lifting Schema Mapping",disabled:!0},{content:"Remove Model Reference",select:function(n){cytoscapeContextMenuRemoveModelReference(n)}}]}),n}function createContextMenuForModelReferenceAndSchemaMappingWithLiftingSchemaMappingAnnotated(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping-with-lifting-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",disabled:!0},{content:"Add Lowering Schema Mapping",select:function(n){cytoscapeContextMenuAddLoweringSchemaMapping(n)}},{content:"Remove Lowering Schema Mapping",disabled:!0},{content:"Remove Lifting Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLiftingSchemaMapping(n)}},{content:"Remove Model Reference",disabled:!0}]}),n}function createContextMenuForModelReferenceAndSchemaMappingWithLoweringSchemaMappingAnnotated(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping-with-lowering-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",select:function(n){cytoscapeContextMenuAddLiftingSchemaMapping(n)}},{content:"Add Lowering Schema Mapping",disabled:!0},{content:"Remove Lowering Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLoweringSchemaMapping(n)}},{content:"Remove Lifting Schema Mapping",disabled:!0},{content:"Remove Model Reference",disabled:!0}]}),n}function createContextMenuForModelReferenceAndSchemaMappingWithLiftingAndLoweringSchemaMappingAnnotated(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping-with-lifting-and-lowering-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",disabled:!0},{content:"Add Lowering Schema Mapping",disabled:!0},{content:"Remove Lowering Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLoweringSchemaMapping(n)}},{content:"Remove Lifting Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLiftingSchemaMapping(n)}},{content:"Remove Model Reference",disabled:!0}]}),n}function createContextMenuForModelReferenceAndSchemaMappingWithLiftingSchemaMappingAndModelReferenceAnnotated(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping-with-lifting-and-model-reference-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",disabled:!0},{content:"Add Lowering Schema Mapping",select:function(n){cytoscapeContextMenuAddLoweringSchemaMapping(n)}},{content:"Remove Lowering Schema Mapping",disabled:!0},{content:"Remove Lifting Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLiftingSchemaMapping(n)}},{content:"Remove Model Reference",select:function(n){cytoscapeContextMenuRemoveModelReference(n)}}]}),n}function createContextMenuForModelReferenceAndSchemaMappingWithLoweringSchemaMappingAndModelReferenceAnnotated(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping-with-lowering-and-model-reference-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",select:function(n){cytoscapeContextMenuAddLiftingSchemaMapping(n)}},{content:"Add Lowering Schema Mapping",disabled:!0},{content:"Remove Lowering Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLoweringSchemaMapping(n)}},{content:"Remove Lifting Schema Mapping",disabled:!0},{content:"Remove Model Reference",select:function(n){cytoscapeContextMenuRemoveModelReference(n)}}]}),n}function createContextMenuForModelReferenceAndSchemaMappingWithAllAnnotations(n){return n.cxtmenu({selector:".node-model-reference-and-schema-mapping-with-lifting-and-lowering-and-model-reference-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Add Lifting Schema Mapping",disabled:!0},{content:"Add Lowering Schema Mapping",disabled:!0},{content:"Remove Lowering Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLoweringSchemaMapping(n)}},{content:"Remove Lifting Schema Mapping",select:function(n){cytoscapeContextMenuRemoveLiftingSchemaMapping(n)}},{content:"Remove Model Reference",select:function(n){cytoscapeContextMenuRemoveModelReference(n)}}]}),n}function createContextMenuForModelReferenceWithNoAnnotations(n){return n.cxtmenu({selector:".node-model-reference-only",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Remove Model Reference",disabled:!0}]}),n}function createContextMenuForModelReferenceWithModelReferenceAnnotated(n){return n.cxtmenu({selector:".node-model-reference-only-with-model-reference-annotated",commands:[{content:"Add Model Reference",select:function(n){cytoscapeContextMenuAddModelReference(n)}},{content:"Remove Model Reference",select:function(n){cytoscapeContextMenuRemoveModelReference(n)}}]}),n}function createContextMenusForGraph(n){return n=createContextMenuForModelReferenceAndSchemaMappingWithNoAnnotations(n),n=createContextMenuForModelReferenceAndSchemaMappingWithModelReferenceAnnotated(n),n=createContextMenuForModelReferenceAndSchemaMappingWithLiftingSchemaMappingAnnotated(n),n=createContextMenuForModelReferenceAndSchemaMappingWithLoweringSchemaMappingAnnotated(n),n=createContextMenuForModelReferenceAndSchemaMappingWithLiftingAndLoweringSchemaMappingAnnotated(n),n=createContextMenuForModelReferenceAndSchemaMappingWithLiftingSchemaMappingAndModelReferenceAnnotated(n),n=createContextMenuForModelReferenceAndSchemaMappingWithLoweringSchemaMappingAndModelReferenceAnnotated(n),n=createContextMenuForModelReferenceAndSchemaMappingWithAllAnnotations(n),n=createContextMenuForModelReferenceWithNoAnnotations(n),createContextMenuForModelReferenceWithModelReferenceAnnotated(n)}var cy,initialZoom,zoom,findNode=function(n,t){for(var i=0,r=t.length;i<r;i++)if(t[i].data.id===n)return t[i];return null};$(function(){$(window).resize(function(){cy.resize();cy.fit()});$(".sidebar-toggle").click(function(){setTimeout(function(){cy.resize();cy.fit();initialZoom=cy.zoom();zoom=initialZoom;$("#zoomValue").text(zoom)},300)});$("#btn_reset_graph_layout").click(function(){cy!==null&&resetGraphLayout()});$("#btn_fit_graph_layout").click(function(){cy!==null&&cy!==undefined&&cy.fit()});$("#btn_graph_zoom_in").click(function(){cy!==null&&cy.zoom(cy.zoom()+.1)});$("#btn_graph_zoom_out").click(function(){cy!==null&&cy.zoom(cy.zoom()-.1)});$(".nav-tabs a").on("shown.bs.tab",function(){$(event.target).context.hash==="#tab_design"&&cy!==null&&(cy.resize(),cy.fit())})});