!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;t.cytoscape=n()}}(function(){return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(){
/*!
            Cytoscape.js 2.7.16 (MIT licensed)
            Copyright (c) The Cytoscape Consortium
            Permission is hereby granted, free of charge, to any person obtaining a copy of
            this software and associated documentation files (the “Software”), to deal in
            the Software without restriction, including without limitation the rights to
            use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
            of the Software, and to permit persons to whom the Software is furnished to do
            so, subject to the following conditions:
            The above copyright notice and this permission notice shall be included in all
            copies or substantial portions of the Software.
            THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
            IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
            FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
            AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
            LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
            OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
            SOFTWARE.
            */
"use strict"},{}],2:[function(n,t){"use strict";var u=n("./util"),f=n("./is"),e=n("./promise"),i=function(n,t,r){if(!(this instanceof i))return new i(n,t,r);var e=this._private=u.extend({duration:1e3},t,r);e.target=n;e.style=e.style||e.css;e.started=!1;e.playing=!1;e.hooked=!1;e.applying=!1;e.progress=0;e.completes=[];e.frames=[];e.complete&&f.fn(e.complete)&&e.completes.push(e.complete);this.length=1;this[0]=this},r=i.prototype;u.extend(r,{instanceString:function(){return"animation"},hook:function(){var n=this._private,i,t;return n.hooked||(t=n.target._private.animation,i=n.queue?t.queue:t.current,i.push(this),f.elementOrCollection(n.target)&&n.target.cy().addToAnimationPool(n.target),n.hooked=!0),this},play:function(){var n=this._private;return 1===n.progress&&(n.progress=0),n.playing=!0,n.started=!1,n.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var n=this._private;return n.applying=!0,n.started=!1,n.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var n=this._private;return n.playing=!1,n.started=!1,this},stop:function(){var n=this._private;return n.playing=!1,n.started=!1,n.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(n){var t=this._private;return void 0===n?t.progress*t.duration:this.progress(n/t.duration)},progress:function(n){var t=this._private,i=t.playing;return void 0===n?t.progress:(i&&this.pause(),t.progress=n,t.started=!1,i&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var n=this._private,r=n.playing,i,t;for(r&&this.pause(),n.progress=1-n.progress,n.started=!1,i=function(t,i){var r=n[t];n[t]=n[i];n[i]=r},i("zoom","startZoom"),i("pan","startPan"),i("position","startPosition"),t=0;t<n.style.length;t++){var u=n.style[t],f=u.name,e=n.startStyle[f];n.startStyle[f]=u;n.style[t]=e}return r&&this.play(),this},promise:function(n){var t,i=this._private;switch(n){case"frame":t=i.frames;break;default:case"complete":case"completed":t=i.completes}return new e(function(n){t.push(function(){n()})})}});r.complete=r.completed;t.exports=i},{"./is":83,"./promise":86,"./util":100}],3:[function(n,t){"use strict";var i=n("../../is"),r={aStar:function(n){var rt=this,f,y,l,g,nt,b,r,k,u,v,h,t,s;n=n||{};var d=function(n,t,i,r){if(n==t)return r.push(c.getElementById(t)),r;if(t in i){var u=i[t],f=it[t];return r.push(c.getElementById(t)),r.push(c.getElementById(f)),d(n,u,i,r)}},ut=function(n,t){var r;if(0!==n.length){for(var u=0,f=t[n[0]],i=1;i<n.length;i++)r=t[n[i]],f>r&&(f=r,u=i);return u}},c=this._private.cy;if(null!=n&&null!=n.root&&(f=i.string(n.root)?this.filter(n.root)[0]:n.root[0],null!=n.goal)){y=i.string(n.goal)?this.filter(n.goal)[0]:n.goal[0];l=null!=n.heuristic&&i.fn(n.heuristic)?n.heuristic:function(){return 0};g=null!=n.weight&&i.fn(n.weight)?n.weight:function(){return 1};nt=null!=n.directed?n.directed:!1;var tt=[],e=[f.id()],p={},it={},o={},a={};o[f.id()]=0;a[f.id()]=l(f);for(var ft=this.edges().stdFilter(function(n){return!n.isLoop()}),et=this.nodes(),w=0;e.length>0;){if(b=ut(e,a),r=c.getElementById(e[b]),w++,r.id()==y.id())return k=d(f.id(),y.id(),p,[]),k.reverse(),{found:!0,distance:o[r.id()],path:rt.spawn(k),steps:w};for(tt.push(r.id()),e.splice(b,1),u=r.connectedEdges(),nt&&(u=u.stdFilter(function(n){return n.data("source")===r.id()})),u=u.intersect(ft),v=0;v<u.length;v++)h=u[v],t=h.connectedNodes().stdFilter(function(n){return n.id()!==r.id()}).intersect(et),-1==tt.indexOf(t.id())&&(s=o[r.id()]+g.apply(h,[h]),-1!=e.indexOf(t.id())?s<o[t.id()]&&(o[t.id()]=s,a[t.id()]=s+l(t),p[t.id()]=r.id()):(o[t.id()]=s,a[t.id()]=s+l(t),e.push(t.id()),p[t.id()]=r.id(),it[t.id()]=h.id()))}return{found:!1,distance:void 0,path:void 0,steps:w}}}};t.exports=r},{"../../is":83}],4:[function(n,t){"use strict";var i=n("../../is"),r=n("../../util"),u={bellmanFord:function(n){var tt=this,p,nt,w,c,l,u,g,t;if(p=(n=n||{},null!=n.weight&&i.fn(n.weight))?n.weight:function(){return 1},nt=null!=n.directed?n.directed:!1,null!=n.root){w=i.string(n.root)?this.filter(n.root)[0]:n.root[0];for(var b=this._private.cy,f=this.edges().stdFilter(function(n){return!n.isLoop()}),a=this.nodes(),v=a.length,o={},t=0;v>t;t++)o[a[t].id()]=t;for(var e=[],y=[],k=[],t=0;v>t;t++)e[t]=a[t].id()===w.id()?0:1/0,y[t]=void 0;for(c=!1,t=1;v>t;t++){for(c=!1,u=0;u<f.length;u++){var s=o[f[u].source().id()],h=o[f[u].target().id()],d=p.apply(f[u],[f[u]]),l=e[s]+d;(l<e[h]&&(e[h]=l,y[h]=s,k[h]=f[u],c=!0),nt)||(l=e[h]+d,l<e[s]&&(e[s]=l,y[s]=h,k[s]=f[u],c=!0))}if(!c)break}if(c)for(u=0;u<f.length;u++){var s=o[f[u].source().id()],h=o[f[u].target().id()],d=p.apply(f[u],[f[u]]);if(e[s]+d<e[h])return r.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(g=[],t=0;v>t;t++)g.push(a[t].id());return{distanceTo:function(n){var t;return t=i.string(n)?b.filter(n)[0].id():n.id(),e[o[t]]},pathTo:function(n){var f=function(n,t,i,r,u,f){for(;;){if(u.push(b.getElementById(r[i])),u.push(f[i]),t===i)return u;var e=n[i];if("undefined"==typeof e)return;i=e}},r,u,t;return r=i.string(n)?b.filter(n)[0].id():n.id(),u=[],t=f(y,o[w.id()],o[r],g,u,k),null!=t&&t.reverse(),tt.spawn(t)},hasNegativeWeightCycle:!1}}}};t.exports=u},{"../../is":83,"../../util":100}],5:[function(n,t){"use strict";var i=n("../../is"),u=n("../../heap"),r={betweennessCentrality:function(n){var nt,ft,w,c,ut,k,d,v,s,t,e,r,g;n=n||{};i.fn(n.weight)?(ft=n.weight,nt=!0):nt=!1;for(var ot=null!=n.directed?n.directed:!1,tt=this._private.cy,h=this.nodes(),y={},et={},b=0,p={set:function(n,t){et[n]=t;t>b&&(b=t)},get:function(n){return et[n]}},s=0;s<h.length;s++)r=h[s],c=r.id(),y[c]=ot?r.outgoers().nodes():r.openNeighborhood().nodes(),p.set(c,0);for(w=0;w<h.length;w++){for(var it=h[w].id(),rt=[],a={},o={},f={},l=new u(function(n,t){return f[n]-f[t]}),s=0;s<h.length;s++)c=h[s].id(),a[c]=[],o[c]=0,f[c]=1/0;for(o[it]=1,f[it]=0,l.push(it);!l.empty();)if(r=l.pop(),rt.push(r),nt)for(e=0;e<y[r].length;e++)t=y[r][e],k=tt.getElementById(r),ut=k.edgesTo(t).length>0?k.edgesTo(t)[0]:t.edgesTo(k)[0],d=ft.apply(ut,[ut]),t=t.id(),f[t]>f[r]+d&&(f[t]=f[r]+d,l.nodes.indexOf(t)<0?l.push(t):l.updateItem(t),o[t]=0,a[t]=[]),f[t]==f[r]+d&&(o[t]=o[t]+o[r],a[t].push(r));else for(e=0;e<y[r].length;e++)t=y[r][e].id(),f[t]==1/0&&(l.push(t),f[t]=f[r]+1),f[t]==f[r]+1&&(o[t]=o[t]+o[r],a[t].push(r));for(v={},s=0;s<h.length;s++)v[h[s].id()]=0;for(;rt.length>0;)for(t=rt.pop(),e=0;e<a[t].length;e++)r=a[t][e],v[r]=v[r]+o[r]/o[t]*(1+v[t]),t!=h[w].id()&&p.set(t,p.get(t)+v[t])}return g={betweenness:function(n){var n;return n=i.string(n)?tt.filter(n).id():n.id(),p.get(n)},betweennessNormalized:function(n){var n;return 0==b?0:(n=i.string(n)?tt.filter(n).id():n.id(),p.get(n)/b)}},g.betweennessNormalised=g.betweennessNormalized,g}};r.bc=r.betweennessCentrality;t.exports=r},{"../../heap":81,"../../is":83}],6:[function(n,t){"use strict";var i=n("../../is"),u=function(n){return n={bfs:n.bfs||!n.dfs,dfs:n.dfs||!n.bfs},function(t,r,u){var s,nt,tt,f,b,k,o,y,e,d,g;i.plainObject(t)&&!i.elementOrCollection(t)&&(s=t,t=s.roots||s.root,r=s.visit,u=s.directed,nt=s.std,tt=s.thisArg);u=2!==arguments.length||i.fn(r)?u:r;r=i.fn(r)?r:function(){};for(var it,rt=this._private.cy,f=t=i.string(t)?this.filter(t):t,h=[],c=[],p={},a={},l={},ut=0,ot=this.nodes(),st=this.edges(),e=0;e<f.length;e++)f[e].isNode()&&(h.unshift(f[e]),n.bfs&&(l[f[e].id()]=!0,c.push(f[e])),a[f[e].id()]=0);for(;0!==h.length;){if(f=n.bfs?h.shift():h.pop(),n.dfs){if(l[f.id()])continue;l[f.id()]=!0;c.push(f)}var w,ft=a[f.id()],v=p[f.id()],et=null==v?void 0:v.connectedNodes().not(f)[0];if(w=nt?r.call(tt,f,v,et,ut++,ft):r.call(f,ut++,ft,f,v,et),w===!0){it=f;break}if(w===!1)break;for(b=f.connectedEdges(u?function(){return this.data("source")===f.id()}:void 0).intersect(st),e=0;e<b.length;e++)k=b[e],o=k.connectedNodes(function(){return this.id()!==f.id()}).intersect(ot),0===o.length||l[o.id()]||(o=o[0],h.push(o),n.bfs&&(l[o.id()]=!0,c.push(o)),p[o.id()]=k,a[o.id()]=a[f.id()]+1)}for(y=[],e=0;e<c.length;e++)d=c[e],g=p[d.id()],g&&y.push(g),y.push(d);return{path:rt.collection(y,{unique:!0}),found:rt.collection(it)}}},r={breadthFirstSearch:u({bfs:!0}),depthFirstSearch:u({dfs:!0})};r.bfs=r.breadthFirstSearch;r.dfs=r.depthFirstSearch;t.exports=r},{"../../is":83}],7:[function(n,t){"use strict";var r=n("../../is"),i={closenessCentralityNormalized:function(n){var h,i,t,e,s;n=n||{};h=this.cy();i=n.harmonic;void 0===i&&(i=!0);for(var c={},o=0,u=this.nodes(),l=this.floydWarshall({weight:n.weight,directed:n.directed}),f=0;f<u.length;f++){for(t=0,e=0;e<u.length;e++)f!=e&&(s=l.distance(u[f],u[e]),t+=i?1/s:s);i||(t=1/t);t>o&&(o=t);c[u[f].id()]=t}return{closeness:function(n){var n;return 0==o?0:(n=r.string(n)?h.filter(n)[0].id():n.id(),c[n]/o)}}},closenessCentrality:function(n){var u,s,h,t,o;if(n=n||{},null!=n.root){u=r.string(n.root)?this.filter(n.root)[0]:n.root[0];s=null!=n.weight&&r.fn(n.weight)?n.weight:function(){return 1};h=null!=n.directed&&r.bool(n.directed)?n.directed:!1;t=n.harmonic;void 0===t&&(t=!0);for(var c=this.dijkstra({root:u,weight:s,directed:h}),f=0,e=this.nodes(),i=0;i<e.length;i++)e[i].id()!=u.id()&&(o=c.distanceTo(e[i]),f+=t?1/o:o);return t?f:1/f}}};i.cc=i.closenessCentrality;i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized;t.exports=i},{"../../is":83}],8:[function(n,t){"use strict";var i=n("../../is"),u=n("../../util"),r={degreeCentralityNormalized:function(n){var e,a,o,l,r,t;if(n=n||{},e=this.cy(),a=null!=n.directed?n.directed:!1,o=this.nodes(),l=o.length,a){for(var v={},y={},s=0,h=0,f=0;l>f;f++)r=o[f],t=this.degreeCentrality(u.extend({},n,{root:r})),s<t.indegree&&(s=t.indegree),h<t.outdegree&&(h=t.outdegree),v[r.id()]=t.indegree,y[r.id()]=t.outdegree;return{indegree:function(n){var n;return 0==s?0:(n=i.string(n)?e.filter(n)[0].id():n.id(),v[n]/s)},outdegree:function(n){var n;return 0==h?0:(n=i.string(n)?e.filter(n)[0].id():n.id(),y[n]/h)}}}for(var p={},c=0,f=0;l>f;f++)r=o[f],t=this.degreeCentrality(u.extend({},n,{root:r})),c<t.degree&&(c=t.degree),p[r.id()]=t.degree;return{degree:function(n){var n;return 0==c?0:(n=i.string(n)?e.filter(n)[0].id():n.id(),p[n]/c)}}},degreeCentrality:function(n){var e,f,o,l,u,t,r;if(n=n||{},e=this,null!=n&&null!=n.root){if(f=i.string(n.root)?this.filter(n.root)[0]:n.root[0],o=null!=n.weight&&i.fn(n.weight)?n.weight:function(){return 1},l=null!=n.directed?n.directed:!1,u=null!=n.alpha&&i.number(n.alpha)?n.alpha:0,l){for(var s=f.connectedEdges('edge[target = "'+f.id()+'"]').intersection(e),h=f.connectedEdges('edge[source = "'+f.id()+'"]').intersection(e),p=s.length,w=h.length,a=0,v=0,t=0;t<s.length;t++)r=s[t],a+=o.apply(r,[r]);for(t=0;t<h.length;t++)r=h[t],v+=o.apply(r,[r]);return{indegree:Math.pow(p,1-u)*Math.pow(a,u),outdegree:Math.pow(w,1-u)*Math.pow(v,u)}}for(var c=f.connectedEdges().intersection(e),b=c.length,y=0,t=0;t<c.length;t++)r=c[t],y+=o.apply(r,[r]);return{degree:Math.pow(b,1-u)*Math.pow(y,u)}}}};r.dc=r.degreeCentrality;r.dcn=r.degreeCentralityNormalised=r.degreeCentralityNormalized;t.exports=r},{"../../is":83,"../../util":100}],9:[function(n,t){"use strict";var i=n("../../is"),r=n("../../heap"),u={dijkstra:function(n,t,u){var s,b,l,d,w,f;i.plainObject(n)&&!i.elementOrCollection(n)&&(s=n,n=s.root,t=s.weight,u=s.directed);b=this._private.cy;t=i.fn(t)?t:function(){return 1};for(var tt=i.string(n)?this.filter(n)[0]:n[0],v={},y={},k={},it=this.edges().filter(function(){return!this.isLoop()}),e=this.nodes(),h=function(n){return v[n.id()]},rt=function(n,t){v[n.id()]=t;c.updateItem(n)},c=new r(function(n,t){return h(n)-h(t)}),f=0;f<e.length;f++)l=e[f],v[l.id()]=l.same(tt)?0:1/0,c.push(l);for(d=function(n,i){for(var r,s,f,h=(u?n.edgesTo(i):n.edgesWith(i)).intersect(it),e=1/0,o=0;o<h.length;o++)r=h[o],s=t.apply(r,[r]),(e>s||!f)&&(e=s,f=r);return{edge:f,dist:e}};c.size()>0;){var o=c.pop(),p=h(o),ut=o.id();if(k[ut]=p,p===Math.Infinite)break;for(w=o.neighborhood().intersect(e),f=0;f<w.length;f++){var a=w[f],ft=a.id(),g=d(o,a),nt=p+g.dist;nt<h(a)&&(rt(a,nt),y[ft]={node:o,edge:g.edge})}}return{distanceTo:function(n){var t=i.string(n)?e.filter(n)[0]:n[0];return k[t.id()]},pathTo:function(n){var u=i.string(n)?e.filter(n)[0]:n[0],t=[],f=u,r;if(u.length>0)for(t.unshift(u);y[f.id()];)r=y[f.id()],t.unshift(r.edge),t.unshift(r.node),f=r.node;return b.collection(t)}}}};t.exports=u},{"../../heap":81,"../../is":83}],10:[function(n,t){"use strict";var i=n("../../is"),r={floydWarshall:function(n){var s,p,d,r,b,l,u,k,t;n=n||{};s=this.cy();p=null!=n.weight&&i.fn(n.weight)?n.weight:function(){return 1};d=null!=n.directed?n.directed:!1;for(var f=this.edges().stdFilter(function(n){return!n.isLoop()}),w=this.nodes(),e=w.length,h={},t=0;e>t;t++)h[w[t].id()]=t;for(r=[],t=0;e>t;t++){for(b=new Array(e),u=0;e>u;u++)b[u]=t==u?0:1/0;r.push(b)}var a=[],v=[],g=function(n){for(var r,t,i=0;e>i;i++){for(r=new Array(e),t=0;e>t;t++)r[t]=void 0;n.push(r)}};for(g(a),g(v),t=0;t<f.length;t++){var c=h[f[t].source().id()],o=h[f[t].target().id()],y=p.apply(f[t],[f[t]]);r[c][o]>y&&(r[c][o]=y,a[c][o]=o,v[c][o]=f[t])}if(!d)for(t=0;t<f.length;t++){var c=h[f[t].target().id()],o=h[f[t].source().id()],y=p.apply(f[t],[f[t]]);r[c][o]>y&&(r[c][o]=y,a[c][o]=o,v[c][o]=f[t])}for(l=0;e>l;l++)for(t=0;e>t;t++)for(u=0;e>u;u++)r[t][l]+r[l][u]<r[t][u]&&(r[t][u]=r[t][l]+r[l][u],a[t][u]=a[t][l]);for(k=[],t=0;e>t;t++)k.push(w[t].id());return{distance:function(n,t){var u,f;return u=i.string(n)?s.filter(n)[0].id():n.id(),f=i.string(t)?s.filter(t)[0].id():t.id(),r[h[u]][h[f]]},path:function(n,t){var e=function(n,t,i,r,u){var f,e,o;if(n===t)return s.getElementById(r[n]);if(void 0!==i[n][t]){for(f=[s.getElementById(r[n])],e=n;n!==t;)e=n,n=i[n][t],o=u[e][n],f.push(o),f.push(s.getElementById(r[n]));return f}},r,u,f;return r=i.string(n)?s.filter(n)[0].id():n.id(),u=i.string(t)?s.filter(t)[0].id():t.id(),f=e(h[r],h[u],a,k,v),s.collection(f)}}}};t.exports=r},{"../../is":83}],11:[function(n,t){"use strict";var r=n("../../util"),i={};[n("./bfs-dfs"),n("./dijkstra"),n("./kruskal"),n("./a-star"),n("./floyd-warshall"),n("./bellman-ford"),n("./kerger-stein"),n("./page-rank"),n("./degree-centrality"),n("./closeness-centrality"),n("./betweenness-centrality")].forEach(function(n){r.extend(i,n)});t.exports=i},{"../../util":100,"./a-star":3,"./bellman-ford":4,"./betweenness-centrality":5,"./bfs-dfs":6,"./closeness-centrality":7,"./degree-centrality":8,"./dijkstra":9,"./floyd-warshall":10,"./kerger-stein":12,"./kruskal":13,"./page-rank":14}],12:[function(n,t){"use strict";var i=n("../../util"),r={kargerStein:function(n){var a=this,h,p,t,w,b,it;n=n||{};var rt=function(n,t,i){for(var o,s=i[n],h=s[1],c=s[2],f=t[h],e=t[c],u=i.filter(function(n){return t[n[1]]===f&&t[n[2]]===e?!1:t[n[1]]!==e||t[n[2]]!==f}),r=0;r<u.length;r++)o=u[r],o[1]===e?(u[r]=o.slice(0),u[r][1]=f):o[2]===e&&(u[r]=o.slice(0),u[r][2]=f);for(r=0;r<t.length;r++)t[r]===e&&(t[r]=f);return u},o=function(n,t,i,r){if(r>=i)return t;var u=Math.floor(Math.random()*t.length),f=rt(u,n,t);return o(n,f,i-1,r)},ut=this._private.cy,v=this.edges().stdFilter(function(n){return!n.isLoop()}),s=this.nodes(),r=s.length,ft=v.length,et=Math.ceil(Math.pow(Math.log(r)/Math.LN2,2)),y=Math.floor(r/Math.sqrt(2));if(2>r)return void i.error("At least 2 nodes are required for Karger-Stein algorithm");for(h={},t=0;r>t;t++)h[s[t].id()]=t;for(p=[],t=0;ft>t;t++)w=v[t],p.push([t,h[w.source().id()],h[w.target().id()]]);for(var u,c=1/0,k=[],t=0;r>t;t++)k.push(t);for(b=0;et>=b;b++){var l=k.slice(0),d=o(l,p,r,y),g=l.slice(0),f=o(l,d,y,2),e=o(g,d,y,2);f.length<=e.length&&f.length<c?(c=f.length,u=[f,l]):e.length<=f.length&&e.length<c&&(c=e.length,u=[e,g])}for(var ot=u[0].map(function(n){return v[n[0]]}),nt=[],tt=[],st=u[1][0],t=0;t<u[1].length;t++)it=u[1][t],it===st?nt.push(s[t]):tt.push(s[t]);return{cut:a.spawn(ut,ot),partition1:a.spawn(nt),partition2:a.spawn(tt)}}};t.exports=r},{"../../util":100}],13:[function(n,t){"use strict";var i=n("../../is"),r={kruskal:function(n){function h(n){for(var i,t=0;t<r.length;t++)if(i=r[t],i.anySame(n))return{eles:i,index:t}}var c=this.cy();n=i.fn(n)?n:function(){return 1};for(var u=c.collection(c,[]),r=[],f=this.nodes(),t=0;t<f.length;t++)r.push(f[t].collection());for(var a=this.edges(),l=a.toArray().sort(function(t,i){var r=n.call(t,t),u=n.call(i,i);return r-u}),t=0;t<l.length;t++){var e=l[t],v=e.source()[0],y=e.target()[0],o=h(v),s=h(y);o.index!==s.index&&(u=u.add(e),r[o.index]=o.eles.add(s.eles),r.splice(s.index,1))}return f.add(u)}};t.exports=r},{"../../is":83}],14:[function(n,t){"use strict";var i=n("../../is"),r={pageRank:function(n){var y,p,w,b,k,l,rt,a,c,r,v,t;n=n||{};y=function(n){for(var i=n.length,r=0,t=0;i>t;t++)r+=n[t];for(t=0;i>t;t++)n[t]=n[t]/r};p=null!=n&&null!=n.dampingFactor?n.dampingFactor:.8;w=null!=n&&null!=n.precision?n.precision:1e-6;b=null!=n&&null!=n.iterations?n.iterations:200;k=null!=n&&null!=n.weight&&i.fn(n.weight)?n.weight:function(){return 1};for(var et=this._private.cy,d=this.edges().stdFilter(function(n){return!n.isLoop()}),g=this.nodes(),u=g.length,ot=d.length,o={},t=0;u>t;t++)o[g[t].id()]=t;for(var f=[],s=[],nt=(1-p)/u,t=0;u>t;t++){for(l=[],r=0;u>r;r++)l.push(0);f.push(l);s.push(0)}for(t=0;ot>t;t++){var h=d[t],tt=o[h.source().id()],st=o[h.target().id()],it=k.apply(h,[h]);f[st][tt]+=it;s[tt]+=it}for(rt=1/u+nt,r=0;u>r;r++)if(0===s[r])for(t=0;u>t;t++)f[t][r]=rt;else for(t=0;u>t;t++)f[t][r]=f[t][r]/s[r]+nt;for(var ut,e=[],ft=[],t=0;u>t;t++)e.push(1),ft.push(0);for(a=0;b>a;a++){for(c=ft.slice(0),t=0;u>t;t++)for(r=0;u>r;r++)c[t]+=f[t][r]*e[r];for(y(c),ut=e,e=c,v=0,t=0;u>t;t++)v+=Math.pow(ut[t]-e[t],2);if(w>v)break}return{rank:function(n){var t;return t=i.string(n)?et.filter(n)[0].id():n.id(),e[o[t]]}}}};t.exports=r},{"../../is":83}],15:[function(n,t){"use strict";var i=n("../define"),r={animate:i.animate(),animation:i.animation(),animated:i.animated(),clearQueue:i.clearQueue(),delay:i.delay(),delayAnimation:i.delayAnimation(),stop:i.stop()};t.exports=r},{"../define":44}],16:[function(n,t){"use strict";var i=n("../util"),r={classes:function(n){var u,r,c,n,t;n=(n||"").match(/\S+/g)||[];for(var e=this,o=[],s={},t=0;t<n.length;t++)r=n[t],s[r]=!0;for(u=0;u<e.length;u++){for(var l=e[u],a=l._private,h=a.classes,f=!1,t=0;t<n.length;t++)if(r=n[t],c=h[r],!c){f=!0;break}if(!f)for(n=Object.keys(h),t=0;t<n.length;t++){var v=n[t],c=h[v],y=s[v];if(c&&!y){f=!0;break}}f&&(a.classes=i.copy(s),o.push(l))}return o.length>0&&this.spawn(o).updateStyle().trigger("class"),e},addClass:function(n){return this.toggleClass(n,!0)},hasClass:function(n){var t=this[0];return!(null==t||!t._private.classes[n])},toggleClass:function(n,t){for(var l=n.match(/\S+/g)||[],u=this,i=[],f=0,a=u.length;a>f;f++)for(var e=u[f],r=!1,o=0;o<l.length;o++){var s=l[o],h=e._private.classes,c=h[s],v=t||void 0===t&&!c;v?(h[s]=!0,c||r||(i.push(e),r=!0)):(h[s]=!1,c&&!r&&(i.push(e),r=!0))}return i.length>0&&this.spawn(i).updateStyle().trigger("class"),u},removeClass:function(n){return this.toggleClass(n,!1)},flashClass:function(n,t){var i=this;if(null==t)t=250;else if(0===t)return i;return i.addClass(n),setTimeout(function(){i.removeClass(n)},t),i}};t.exports=r},{"../util":100}],17:[function(n,t){"use strict";var i={allAre:function(n){return this.filter(n).length===this.length},is:function(n){return this.filter(n).length>0},some:function(n,t){for(var r,i=0;i<this.length;i++)if(r=t?n.apply(t,[this[i],i,this]):n(this[i],i,this),r)return!0;return!1},every:function(n,t){for(var r,i=0;i<this.length;i++)if(r=t?n.apply(t,[this[i],i,this]):n(this[i],i,this),!r)return!1;return!0},same:function(n){return n=this.cy().collection(n),this.length!==n.length?!1:this.intersect(n).length===this.length},anySame:function(n){return n=this.cy().collection(n),this.intersect(n).length>0},allAreNeighbors:function(n){return n=this.cy().collection(n),this.neighborhood().intersect(n).length===n.length}};i.allAreNeighbours=i.allAreNeighbors;t.exports=i},{}],18:[function(n,t){"use strict";var i={parent:function(n){for(var u,i,r=[],f=this._private.cy,t=0;t<this.length;t++)u=this[t],i=f.getElementById(u._private.data.parent),i.size()>0&&r.push(i);return this.spawn(r,{unique:!0}).filter(n)},parents:function(n){for(var i,u,r=[],t=this.parent();t.nonempty();){for(i=0;i<t.length;i++)u=t[i],r.push(u);t=t.parent()}return this.spawn(r,{unique:!0}).filter(n)},commonAncestors:function(n){for(var t,u,r,i=0;i<this.length;i++)u=this[i],r=u.parents(),t=t||r,t=t.intersect(r);return t.filter(n)},orphans:function(n){return this.stdFilter(function(n){return n.isNode()&&n.parent().empty()}).filter(n)},nonorphans:function(n){return this.stdFilter(function(n){return n.isNode()&&n.parent().nonempty()}).filter(n)},children:function(n){for(var r,t=[],i=0;i<this.length;i++)r=this[i],t=t.concat(r._private.children);return this.spawn(t,{unique:!0}).filter(n)},siblings:function(n){return this.parent().children().not(this).filter(n)},isParent:function(){var n=this[0];if(n)return 0!==n._private.children.length},isChild:function(){var n=this[0];if(n)return void 0!==n._private.data.parent&&0!==n.parent().length},descendants:function(n){function t(n){for(var u,r=0;r<n.length;r++)u=n[r],i.push(u),u.children().nonempty()&&t(u.children())}var i=[];return t(this.children()),this.spawn(i,{unique:!0}).filter(n)}};i.ancestors=i.parents;t.exports=i},{}],19:[function(n,t){"use strict";var r,u,i=n("../define");r=u={data:i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:i.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:i.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var n=this[0];if(n)return n._private.data.id}};r.attr=r.data;r.removeAttr=r.removeData;t.exports=u},{"../define":44}],20:[function(n,t){"use strict";function u(n){return function(t){var i=this,u;if(void 0===t&&(t=!0),0!==i.length&&i.isNode()&&!i.removed()){for(var f=0,e=i[0],o=e._private.edges,r=0;r<o.length;r++)u=o[r],!t&&u.isLoop()||(f+=n(e,u));return f}}}function i(n,t){return function(i){for(var r,o,f,e=this.nodes(),u=0;u<e.length;u++)o=e[u],f=o[n](i),void 0!==f&&(void 0===r||t(f,r))&&(r=f);return r}}var f=n("../util"),r={};f.extend(r,{degree:u(function(n,t){return t.source().same(t.target())?2:1}),indegree:u(function(n,t){return t.target().same(n)?1:0}),outdegree:u(function(n,t){return t.source().same(n)?1:0})});f.extend(r,{minDegree:i("degree",function(n,t){return t>n}),maxDegree:i("degree",function(n,t){return n>t}),minIndegree:i("indegree",function(n,t){return t>n}),maxIndegree:i("indegree",function(n,t){return n>t}),minOutdegree:i("outdegree",function(n,t){return t>n}),maxOutdegree:i("outdegree",function(n,t){return n>t})});f.extend(r,{totalDegree:function(n){for(var i=0,r=this.nodes(),t=0;t<r.length;t++)i+=r[t].degree(n);return i}});t.exports=r},{"../util":100}],21:[function(n,t){"use strict";function y(n){return{includeNodes:f["default"](n.includeNodes,e.includeNodes),includeEdges:f["default"](n.includeEdges,e.includeEdges),includeLabels:f["default"](n.includeLabels,e.includeLabels),includeShadows:f["default"](n.includeShadows,e.includeShadows),includeOverlays:f["default"](n.includeOverlays,e.includeOverlays),useCache:f["default"](n.useCache,e.useCache)}}var i,c,p=n("../define"),o=n("../is"),f=n("../util"),k=n("../math"),v;i=c={position:p.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(n){var t=n.updateCompoundBounds();t.rtrigger("position")},canSet:function(n){return!n.locked()&&!n.isParent()}}),silentPosition:p.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(n){n.updateCompoundBounds()},canSet:function(n){return!n.locked()&&!n.isParent()}}),positions:function(n,t){var s,r,i,n,u,f,e;if(o.plainObject(n))this.position(n);else if(o.fn(n)){for(s=n,r=0;r<this.length;r++)i=this[r],n=s.apply(i,[r,i]),!n||i.locked()||i.isParent()||(u=i._private.position,u.x=n.x,u.y=n.y);f=this.updateCompoundBounds();e=f.length>0?this.add(f):this;t?e.trigger("position"):e.rtrigger("position")}return this},silentPositions:function(n){return this.positions(n,!0)},renderedPosition:function(n,t){var r=this[0],h=this.cy(),u=h.zoom(),f=h.pan(),i=o.plainObject(n)?n:void 0,c=void 0!==i||void 0!==t&&o.string(n),s,e;if(r&&r.isNode()){if(!c)return s=r._private.position,i={x:s.x*u+f.x,y:s.y*u+f.y},void 0===n?i:i[n];for(e=0;e<this.length;e++)r=this[e],void 0!==t?r._private.position[n]=(t-f[n])/u:void 0!==i&&(r._private.position={x:(i.x-f.x)/u,y:(i.y-f.y)/u});this.rtrigger("position")}else if(!c)return;return this},relativePosition:function(n,t){var r=this[0],v=this.cy(),u=o.plainObject(n)?n:void 0,h=void 0!==u||void 0!==t&&o.string(n),c=v.hasCompoundNodes(),s,f;if(r&&r.isNode()){if(!h){var l=r._private.position,i=c?r.parent():null,e=i&&i.length>0,a=e;return e&&(i=i[0]),f=a?i._private.position:{x:0,y:0},u={x:l.x-f.x,y:l.y-f.y},void 0===n?u:u[n]}for(s=0;s<this.length;s++){var r=this[s],i=c?r.parent():null,e=i&&i.length>0,a=e;e&&(i=i[0]);f=a?i._private.position:{x:0,y:0};void 0!==t?r._private.position[n]=t+f[n]:void 0!==u&&(r._private.position={x:u.x+f.x,y:u.y+f.y})}this.rtrigger("position")}else if(!h)return;return this},renderedBoundingBox:function(n){var t=this.boundingBox(n),u=this.cy(),i=u.zoom(),r=u.pan(),f=t.x1*i+r.x,e=t.x2*i+r.x,o=t.y1*i+r.y,s=t.y2*i+r.y;return{x1:f,x2:e,y1:o,y2:s,w:e-f,h:s-o}},updateCompoundBounds:function(){function f(n){if(n.isParent()){var i=n._private,f=n.children(),e="include"===n.pstyle("compound-sizing-wrt-labels").value,t=f.boundingBox({includeLabels:e,includeShadows:!1,includeOverlays:!1,useCache:!1}),u=i.position;i.autoWidth=t.w;u.x=(t.x1+t.x2)/2;i.autoHeight=t.h;u.y=(t.y1+t.y2)/2;r.push(n)}}var i=this.cy(),r,n,t,u;if(!i.styleEnabled()||!i.hasCompoundNodes())return i.collection();for(r=[],n=this;n.nonempty();){for(t=0;t<n.length;t++)u=n[t],f(u);n=n.parent()}return this.spawn(r)}};var r=function(n){return n===1/0||n===-(1/0)?0:n},u=function(n,t,i,r,u){r-t!=0&&u-i!=0&&(n.x1=t<n.x1?t:n.x1,n.x2=r>n.x2?r:n.x2,n.y1=i<n.y1?i:n.y1,n.y2=u>n.y2?u:n.y2)},d=function(n,t){return u(n,t.x1,t.y1,t.x2,t.y2)},s=function(n,t,i){return f.getPrefixedProperty(n,t,i)},l=function(n,t,i){var f,e,s=t._private,r=s.rstyle,o=r.arrowWidth/2,h=t.pstyle(i+"-arrow-shape").value;"none"!==h&&("source"===i?(f=r.srcX,e=r.srcY):"target"===i?(f=r.tgtX,e=r.tgtY):(f=r.midX,e=r.midY),u(n,f-o,e-o,f+o,e+o))},a=function(n,t,i,r){var a,et,vt;a=i?i+"-":"";var ot=t._private,v=ot.rstyle,bt=t.pstyle(a+"label").strValue;if(bt){var f,e,o,h,kt=t.pstyle("text-halign"),dt=t.pstyle("text-valign"),gt=s(v,"labelWidth",i),ni=s(v,"labelHeight",i),c=s(v,"labelX",i),l=s(v,"labelY",i),st=t.pstyle(a+"text-margin-x").pfValue,ht=t.pstyle(a+"text-margin-y").pfValue,ct=t.isEdge(),y=t.pstyle(a+"text-rotation"),p=t.pstyle("text-shadow-blur").pfValue/2,lt=t.pstyle("text-shadow-offset-x").pfValue,at=t.pstyle("text-shadow-offset-y").pfValue,ti=t.pstyle("text-shadow-opacity").value,w=t.pstyle("text-outline-width").pfValue,ii=t.pstyle("text-border-width").pfValue,b=ii/2,ut=ni,ft=gt,k=ft/2,d=ut/2;if(ct)f=c-k,e=c+k,o=l-d,h=l+d;else{switch(kt.value){case"left":f=c-ft;e=c;break;case"center":f=c-k;e=c+k;break;case"right":f=c;e=c+ft}switch(dt.value){case"top":o=l-ut;h=l;break;case"center":o=l-d;h=l+d;break;case"bottom":o=l;h=l+ut}}if(et=ct&&"autorotate"===y.strValue,vt=null!=y.pfValue&&0!==y.pfValue,et||vt){var yt=et?s(ot.rstyle,"labelAngle",i):y.pfValue,pt=Math.cos(yt),wt=Math.sin(yt),g=function(n,t){return n-=c,t-=l,{x:n*pt-t*wt+c,y:n*wt+t*pt+l}},nt=g(f,o),tt=g(f,h),it=g(e,o),rt=g(e,h);f=Math.min(nt.x,tt.x,it.x,rt.x);e=Math.max(nt.x,tt.x,it.x,rt.x);o=Math.min(nt.y,tt.y,it.y,rt.y);h=Math.max(nt.y,tt.y,it.y,rt.y)}f+=st-Math.max(w,b);e+=st+Math.max(w,b);o+=ht-Math.max(w,b);h+=ht+Math.max(w,b);u(n,f,o,e,h);r.includeShadows&&ti>0&&(f+=-p+lt,e+=+p+lt,o+=-p+at,h+=+p+at,u(n,f,o,e,h))}return n},g=function(n,t){var f,e,o,s,rt,ut,pt=n._private.cy,wt=pt._private,y=wt.styleEnabled,i={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)},d=n._private,bt=y?n.pstyle("display").value:"element",kt=n.isNode(),ft=n.isEdge(),st="none"!==bt,et,v,g,h,ot,c,w,nt,tt,b,p;if(st){if(et=0,v=0,y&&t.includeOverlays&&(et=n.pstyle("overlay-opacity").value,0!==et&&(v=n.pstyle("overlay-padding").value)),g=0,h=0,y&&(g=n.pstyle("width").pfValue,h=g/2),kt&&t.includeNodes){ot=d.position;rt=ot.x;ut=ot.y;var g=n.outerWidth(),ht=g/2,dt=n.outerHeight(),ct=dt/2;f=rt-ht-v;e=rt+ht+v;o=ut-ct-v;s=ut+ct+v;u(i,f,o,e,s)}else if(ft&&t.includeEdges)if(c=d.rstyle||{},y&&(f=Math.min(c.srcX,c.midX,c.tgtX),e=Math.max(c.srcX,c.midX,c.tgtX),o=Math.min(c.srcY,c.midY,c.tgtY),s=Math.max(c.srcY,c.midY,c.tgtY),f-=h,e+=h,o-=h,s+=h,u(i,f,o,e,s)),y&&"haystack"===n.pstyle("curve-style").strValue)w=c.haystackPts,(f=w[0].x,o=w[0].y,e=w[1].x,s=w[1].y,f>e)&&(p=f,f=e,e=p),o>s&&(p=o,o=s,s=p),u(i,f-h,o-h,e+h,s+h);else{for(nt=c.bezierPts||c.linePts||[],tt=0;tt<nt.length;tt++)b=nt[tt],f=b.x-h,e=b.x+h,o=b.y-h,s=b.y+h,u(i,f,o,e,s);if(0===nt.length){var gt=d.source,ni=gt._private,lt=ni.position,ti=d.target,ii=ti._private,at=ii.position;(f=lt.x,e=at.x,o=lt.y,s=at.y,f>e)&&(p=f,f=e,e=p);o>s&&(p=o,o=s,s=p);f-=h;e+=h;o-=h;s+=h;u(i,f,o,e,s)}}if(y){if(f=i.x1,e=i.x2,o=i.y1,s=i.y2,t.includeShadows&&n.pstyle("shadow-opacity").value>0){var it=n.pstyle("shadow-blur").pfValue/2,vt=n.pstyle("shadow-offset-x").pfValue,yt=n.pstyle("shadow-offset-y").pfValue;u(i,f-it+vt,o-it+yt,e+it+vt,s+it+yt)}u(i,f-v,o-v,e+v,s+v)}y&&t.includeEdges&&ft&&(l(i,n,"mid-source",t),l(i,n,"mid-target",t),l(i,n,"source",t),l(i,n,"target",t));y&&t.includeLabels&&(a(i,n,null,t),ft&&(a(i,n,"source",t),a(i,n,"target",t)))}return i.x1=r(i.x1),i.y1=r(i.y1),i.x2=r(i.x2),i.y2=r(i.y2),i.w=r(i.x2-i.x1),i.h=r(i.y2-i.y1),i.w>0&&i.h>0&&st&&k.expandBoundingBox(i,1),i},h=function(n){return n?"t":"f"},w=function(n){var t="";return t+=h(n.incudeNodes),t+=h(n.includeEdges),t+=h(n.includeLabels),t+=h(n.includeShadows),t+h(n.includeOverlays)},b=function(n,t){var r,i=n._private,f=n.cy().headless(),u=t===e?nt:w(t);return t.useCache&&!f&&i.bbCache&&i.bbCache[u]?r=i.bbCache[u]:(r=g(n,t),f||(i.bbCache=i.bbCache||{},i.bbCache[u]=r)),r},e={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeShadows:!0,includeOverlays:!0,useCache:!0},nt=w(e);c.recalculateRenderedStyle=function(n){var t=this.cy(),i=t.renderer(),r=t.styleEnabled();return i&&r&&i.recalculateRenderedStyle(this,n),this};c.boundingBox=function(n){var t,u,i;if(1===this.length&&this[0]._private.bbCache&&(void 0===n||void 0===n.useCache||n.useCache===!0))return n=void 0===n?e:y(n),b(this[0],n);t={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)};n=n||f.staticEmptyObject();var o=y(n),s=this,c=s.cy(),h=c.styleEnabled();for(h&&this.recalculateRenderedStyle(o.useCache),u=0;u<s.length;u++)i=s[u],h&&i.isEdge()&&"bezier"===i.pstyle("curve-style").strValue&&i.parallelEdges().recalculateRenderedStyle(o.useCache),d(t,b(i,o));return t.x1=r(t.x1),t.y1=r(t.y1),t.x2=r(t.x2),t.y2=r(t.y2),t.w=r(t.x2-t.x1),t.h=r(t.y2-t.y1),t};v=function(n){n.uppercaseName=f.capitalize(n.name);n.autoName="auto"+n.uppercaseName;n.labelName="label"+n.uppercaseName;n.outerName="outer"+n.uppercaseName;n.uppercaseOuterName=f.capitalize(n.outerName);i[n.name]=function(){var t=this[0],i=t._private,u=i.cy,f=u._private.styleEnabled,r;if(t){if(!f)return 1;if(t.isParent())return i[n.autoName]||0;r=t.pstyle(n.name);switch(r.strValue){case"label":return i.rstyle[n.labelName]||0;default:return r.pfValue}}};i["outer"+n.uppercaseName]=function(){var t=this[0],i=t._private,r=i.cy,u=r._private.styleEnabled;if(t){if(u){var f=t[n.name](),e=t.pstyle("border-width").pfValue,o=2*t.pstyle("padding").pfValue;return f+e+o}return 1}};i["rendered"+n.uppercaseName]=function(){var t=this[0],i;if(t)return i=t[n.name](),i*this.cy().zoom()};i["rendered"+n.uppercaseOuterName]=function(){var t=this[0],i;if(t)return i=t[n.outerName](),i*this.cy().zoom()}};v({name:"width"});v({name:"height"});i.modelPosition=i.point=i.position;i.modelPositions=i.points=i.positions;i.renderedPoint=i.renderedPosition;i.relativePoint=i.relativePosition;i.boundingbox=i.boundingBox;i.renderedBoundingbox=i.renderedBoundingBox;t.exports=c},{"../define":44,"../is":83,"../math":85,"../util":100}],22:[function(n,t){"use strict";var i=n("../util"),r=n("../is"),u=function(n,t,u){var a=this,f,e;if(u=!(void 0!==u&&!u),void 0===n||void 0===t||!r.core(n))return void i.error("An element must have a core reference and parameters set");if(f=t.group,null==f&&(f=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==f&&"edges"!==f)return void i.error("An element must be of type `nodes` or `edges`; you specified `"+f+"`");if(this.length=1,this[0]=this,this._private={cy:n,single:!0,data:t.data||{},position:t.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:f,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!t.selected,selectable:void 0===t.selectable?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable?!0:!!t.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],traversalCache:{}},t.renderedPosition){var s=t.renderedPosition,h=n.pan(),c=n.zoom();this._private.position={x:(s.x-h.x)/c,y:(s.y-h.y)/c}}if(r.string(t.classes))for(var l=t.classes.split(/\s+/),o=0,v=l.length;v>o;o++)e=l[o],e&&""!==e&&(a._private.classes[e]=!0);(t.style||t.css)&&n.style().applyBypass(this,t.style||t.css);(void 0===u||u)&&this.restore()};t.exports=u},{"../is":83,"../util":100}],23:[function(n,t){"use strict";var i=n("../define"),r={on:i.on(),one:i.on({unbindSelfOnTrigger:!0}),once:i.on({unbindAllBindersOnTrigger:!0}),off:i.off(),trigger:i.trigger(),rtrigger:function(n,t){if(0!==this.length)return(this.cy().notify({type:n,eles:this}),this.trigger(n,t),this)}};i.eventAliasesOn(r);t.exports=r},{"../define":44}],24:[function(n,t){"use strict";var r=n("../is"),f=n("../selector"),u={nodes:function(n){return this.filter(function(n,t){return t.isNode()}).filter(n)},edges:function(n){return this.filter(function(n,t){return t.isEdge()}).filter(n)},filter:function(n){var u,t,i;if(void 0===n)return this;if(r.string(n)||r.elementOrCollection(n))return f(n).filter(this);if(r.fn(n)){for(u=[],t=0;t<this.length;t++)i=this[t],n.apply(i,[t,i])&&u.push(i);return this.spawn(u)}return this.spawn()},not:function(n){var i,t,u,f;if(n){for(r.string(n)&&(n=this.filter(n)),i=[],t=0;t<this.length;t++)u=this[t],f=n._private.ids[u.id()],f||i.push(u);return this.spawn(i)}return this},absoluteComplement:function(){var n=this._private.cy;return n.mutableElements().not(this)},intersect:function(n){var u,c,i;if(r.string(n))return u=n,this.filter(u);for(var f=[],e=this,o=n,s=this.length<n.length,l=s?o._private.ids:e._private.ids,h=s?e:o,t=0;t<h.length;t++)c=h[t]._private.data.id,i=l[c],i&&f.push(i);return this.spawn(f)},xor:function(n){var e=this._private.cy;r.string(n)&&(n=e.$(n));var t=[],i=this,u=n,f=function(n,i){for(var r=0;r<n.length;r++){var u=n[r],f=u._private.data.id,e=i._private.ids[f];e||t.push(u)}};return f(i,u),f(u,i),this.spawn(t)},diff:function(n){var s=this._private.cy;r.string(n)&&(n=s.$(n));var t=[],i=[],u=[],f=this,e=n,o=function(n,t,i){for(var r=0;r<n.length;r++){var f=n[r],e=f._private.data.id,o=t._private.ids[e];o?u.push(f):i.push(f)}};return o(f,e,t),o(e,f,i),{left:this.spawn(t,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(u,{unique:!0})}},add:function(n){var e=this._private.cy,u,i,t,f;if(!n)return this;for(r.string(n)&&(u=n,n=e.mutableElements().filter(u)),i=[],t=0;t<this.length;t++)i.push(this[t]);for(t=0;t<n.length;t++)f=!this._private.ids[n[t].id()],f&&i.push(n[t]);return this.spawn(i)},merge:function(n){var t=this._private,s=t.cy,o,e,f;if(!n)return this;for(n&&r.string(n)&&(o=n,n=s.mutableElements().filter(o)),e=0;e<n.length;e++){var i=n[e],u=i._private.data.id,h=!t.ids[u];h?(f=this.length++,this[f]=i,t.ids[u]=i,t.indexes[u]=f):(f=t.indexes[u],this[f]=i,t.ids[u]=i)}return this},unmergeOne:function(n){var u;n=n[0];var i=this._private,r=n._private.data.id,t=i.indexes[r];if(null==t)return this;if(this[t]=void 0,i.ids[r]=void 0,i.indexes[r]=void 0,u=t===this.length-1,this.length>1&&!u){var f=this.length-1,e=this[f],o=e._private.data.id;this[f]=void 0;this[t]=e;i.indexes[o]=t}return this.length--,this},unmerge:function(n){var u=this._private.cy,i,t;if(!n)return this;for(n&&r.string(n)&&(i=n,n=u.mutableElements().filter(i)),t=0;t<n.length;t++)this.unmergeOne(n[t]);return this},map:function(n,t){for(var u,e,f=[],r=this,i=0;i<r.length;i++)u=r[i],e=t?n.apply(t,[u,i,r]):n(u,i,r),f.push(e);return f},stdFilter:function(n,t){for(var u,e,f=[],r=this,i=0;i<r.length;i++)u=r[i],e=t?n.apply(t,[u,i,r]):n(u,i,r),e&&f.push(u);return this.spawn(f)},max:function(n,t){for(var u,e,o,f=-(1/0),r=this,i=0;i<r.length;i++)u=r[i],e=t?n.apply(t,[u,i,r]):n(u,i,r),e>f&&(f=e,o=u);return{value:f,ele:o}},min:function(n,t){for(var u,e,o,f=1/0,r=this,i=0;i<r.length;i++)u=r[i],e=t?n.apply(t,[u,i,r]):n(u,i,r),f>e&&(f=e,o=u);return{value:f,ele:o}}},i=u;i.u=i["|"]=i["+"]=i.union=i.or=i.add;i["\\"]=i["!"]=i["-"]=i.difference=i.relativeComplement=i.subtract=i.not;i.n=i["&"]=i["."]=i.and=i.intersection=i.intersect;i["^"]=i["(+)"]=i["(-)"]=i.symmetricDifference=i.symdiff=i.xor;i.fnFilter=i.filterFn=i.stdFilter;i.complement=i.abscomp=i.absoluteComplement;t.exports=u},{"../is":83,"../selector":87}],25:[function(n,t){"use strict";var i={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var n=this[0];if(n)return n._private.group}};t.exports=i},{}],26:[function(n,t){"use strict";var r=n("../util"),u=n("../is"),e=n("./element"),o={generate:function(n,t,i){for(var u=null!=i?i:r.uuid();n.hasElementWithId(u);)u=r.uuid();return u}},f=function(n,t,i){var s,h,k,f,v,c,l;if(void 0===n||!u.core(n))return void r.error("A collection must have a reference to the core");var a={},y={},p=!1;if(t){if(t.length>0&&u.plainObject(t[0])&&!u.element(t[0])){p=!0;for(var w=[],b={},f=0,v=t.length;v>f;f++){if(s=t[f],null==s.data&&(s.data={}),h=s.data,null==h.id)h.id=o.generate(n,s);else if(n.hasElementWithId(h.id)||b[h.id])continue;k=new e(n,s,!1);w.push(k);b[h.id]=!0}t=w}}else t=[];for(this.length=0,f=0,v=t.length;v>f;f++)c=t[f],c&&(l=c._private.data.id,i&&(!i.unique||a[l])||(a[l]=c,y[l]=this.length,this[this.length]=c,this.length++));this._private={cy:n,ids:a,indexes:y};p&&this.restore()},i=e.prototype=f.prototype;i.instanceString=function(){return"collection"};i.spawn=function(n,t,i){return u.core(n)||(i=t,t=n,n=this.cy()),new f(n,t,i)};i.spawnSelf=function(){return this.spawn(this)};i.cy=function(){return this._private.cy};i.element=function(){return this[0]};i.collection=function(){return u.collection(this)?this:new f(this._private.cy,[this])};i.unique=function(){return new f(this._private.cy,this,{unique:!0})};i.hasElementWithId=function(n){return!!this._private.ids[n]};i.getElementById=function(n){var i=this._private.cy,t=this._private.ids[n];return t?t:new f(i)};i.poolIndex=function(){var n=this._private.cy,t=n._private.elements,i=this._private.data.id;return t._private.indexes[i]};i.json=function(n){var i=this.element(),o=this.cy(),t,f,e;if(null==i&&n)return this;if(null!=i){if(t=i._private,u.plainObject(n))return o.startBatch(),n.data&&i.data(n.data),n.position&&i.position(n.position),f=function(r,u,f){var e=n[r];null!=e&&e!==t[r]&&(e?i[u]():i[f]())},f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),null!=n.classes&&i.classes(n.classes),o.endBatch(),this;if(void 0===n)return e={data:r.copy(t.data),position:r.copy(t.position),group:t.group,removed:t.removed,selected:t.selected,selectable:t.selectable,locked:t.locked,grabbable:t.grabbable,classes:null},e.classes=Object.keys(t.classes).filter(function(n){return t.classes[n]}).join(" "),e}};i.jsons=function(){for(var i,r,t=[],n=0;n<this.length;n++)i=this[n],r=i.json(),t.push(r);return t};i.clone=function(){for(var t=this.cy(),i=[],n=0;n<this.length;n++){var r=this[n],u=r.json(),o=new e(t,u,!1);i.push(o)}return new f(t,i)};i.copy=i.clone;i.restore=function(n){var g=this,s=g.cy(),ht=s._private,tt,w,b,p,a,ut,ft,y,t,et,at,k,ot,d,h,e,i,st,l,vt;void 0===n&&(n=!0);for(var v,nt=[],ct=[],e=0,yt=g.length;yt>e;e++)i=g[e],i.removed()&&(i.isNode()?nt.push(i):ct.push(i));for(v=nt.concat(ct),tt=function(){v.splice(e,1);e--},e=0;e<v.length;e++){var i=v[e],c=i._private,t=c.data;if(c.traversalCache=null,void 0===t.id)t.id=o.generate(s,i);else if(u.number(t.id))t.id=""+t.id;else{if(u.emptyString(t.id)||!u.string(t.id)){r.error("Can not create element with invalid string ID `"+t.id+"`");tt();continue}if(s.hasElementWithId(t.id)){r.error("Can not create second element with ID `"+t.id+"`");tt();continue}}if(w=t.id,i.isNode()&&(y=i,b=c.position,null==b.x&&(b.x=0),null==b.y&&(b.y=0)),i.isEdge()){for(var it=i,lt=["source","target"],pt=lt.length,rt=!1,l=0;pt>l;l++)p=lt[l],a=t[p],u.number(a)&&(a=t[p]=""+t[p]),null==a||""===a?(r.error("Can not create edge `"+w+"` with unspecified "+p),rt=!0):s.hasElementWithId(a)||(r.error("Can not create edge `"+w+"` with nonexistant "+p+" `"+a+"`"),rt=!0);if(rt){tt();continue}ut=s.getElementById(t.source);ft=s.getElementById(t.target);ut._private.edges.push(it);ft._private.edges.push(it);it._private.source=ut;it._private.target=ft}c.ids={};c.ids[w]=i;c.indexes={};c.indexes[w]=i;c.removed=!1;s.addToPool(i)}for(e=0;e<nt.length;e++)if(y=nt[e],t=y._private.data,u.number(t.parent)&&(t.parent=""+t.parent),et=t.parent,at=null!=et,at)if(k=s.getElementById(et),k.empty())t.parent=void 0;else{for(ot=!1,d=k;!d.empty();){if(y.same(d)){ot=!0;t.parent=void 0;break}d=d.parent()}ot||(k[0]._private.children.push(y),y._private.parent=k[0],ht.hasCompoundNodes=!0)}if(v.length>0){for(h=new f(s,v),e=0;e<h.length;e++)if(i=h[e],!i.isNode()){for(st=i.parallelEdges(),l=0;l<st.length;l++)st[l]._private.traversalCache=null;i.source()[0]._private.traversalCache=null;i.target()[0]._private.traversalCache=null}vt=ht.hasCompoundNodes?h.add(h.connectedNodes()).add(h.parent()):h;vt.updateStyle(n);n?h.rtrigger("add"):h.trigger("add")}return g};i.removed=function(){var n=this[0];return n&&n._private.removed};i.inside=function(){var n=this[0];return n&&!n._private.removed};i.remove=function(n){function d(n){for(var i=n._private.edges,t=0;t<i.length;t++)h(i[t])}function g(n){for(var i=n._private.children,t=0;t<i.length;t++)h(i[t])}function h(n){var t=p[n.id()];t||(p[n.id()]=!0,n.isNode()?(e.push(n),d(n),g(n)):e.unshift(n))}function y(n,t){var i=n._private.edges;r.removeFromArray(i,t);n._private.traversalCache=null}function nt(n){for(var i=n.parallelEdges(),t=0;t<i.length;t++)i[t]._private.traversalCache=null}function tt(n,t){t=t[0];n=n[0];var f=n._private.children,i=n.id();r.removeFromArray(f,t);u.ids[i]||(u.ids[i]=!0,u.push(n))}var c=this,l=[],e=[],p={},o=c._private.cy,w,u,b,k,a,v,s,i,t;for(void 0===n&&(n=!0),i=0,w=c.length;w>i;i++)t=c[i],h(t);for(u=[],u.ids={},o.removeFromPool(e),i=0;i<e.length;i++)t=e[i],(t._private.removed=!0,l.push(t),t.isEdge())?(b=t.source()[0],k=t.target()[0],y(b,t),y(k,t),nt(t)):(a=t.parent(),0!==a.length&&tt(a,t));for(v=o._private.elements,o._private.hasCompoundNodes=!1,i=0;i<v.length;i++)if(t=v[i],t.isParent()){o._private.hasCompoundNodes=!0;break}for(s=new f(this.cy(),l),s.size()>0&&(n&&this.cy().notify({type:"remove",eles:s}),s.trigger("remove")),i=0;i<u.length;i++)t=u[i],t.removed()||t.updateStyle();return new f(o,l)};i.move=function(n){var u=this._private.cy,r,f,l,t,i,e;if(void 0!==n.source||void 0!==n.target){var o=n.source,s=n.target,h=u.hasElementWithId(o),c=u.hasElementWithId(s);if(h||c){for(r=this.jsons(),this.remove(),t=0;t<r.length;t++)i=r[t],e=this[t],"edges"===i.group&&(h&&(i.data.source=o),c&&(i.data.target=s),i.scratch=e._private.scratch);return u.add(r)}}else if(void 0!==n.parent&&(f=n.parent,l=null===f||u.hasElementWithId(f),l)){var r=this.jsons(),a=this.descendants(),v=a.union(a.union(this).connectedEdges()).jsons();for(this.remove(),t=0;t<r.length;t++)i=r[t],e=this[t],"nodes"===i.group&&(i.data.parent=null===f?void 0:f,i.scratch=e._private.scratch);return u.add(r.concat(v))}return this};[n("./algorithms"),n("./animation"),n("./class"),n("./comparators"),n("./compounds"),n("./data"),n("./degree"),n("./dimensions"),n("./events"),n("./filter"),n("./group"),n("./index"),n("./iteration"),n("./layout"),n("./style"),n("./switch-functions"),n("./traversing")].forEach(function(n){r.extend(i,n)});t.exports=f},{"../is":83,"../util":100,"./algorithms":11,"./animation":15,"./class":16,"./comparators":17,"./compounds":18,"./data":19,"./degree":20,"./dimensions":21,"./element":22,"./events":23,"./filter":24,"./group":25,"./index":26,"./iteration":27,"./layout":28,"./style":29,"./switch-functions":30,"./traversing":31}],27:[function(n,t){"use strict";var i=n("../is"),r=n("./zsort"),u={each:function(n){var t,r,u;if(i.fn(n))for(t=0;t<this.length;t++)if(r=this[t],u=n.apply(r,[t,r]),u===!1)break;return this},forEach:function(n,t){var r,u,f;if(i.fn(n))for(r=0;r<this.length;r++)if(u=this[r],f=t?n.apply(t,[u,r,this]):n(u,r,this),f===!1)break;return this},toArray:function(){for(var t=[],n=0;n<this.length;n++)t.push(this[n]);return t},slice:function(n,t){var u=[],r=this.length,i;for(null==t&&(t=r),null==n&&(n=0),0>n&&(n=r+n),0>t&&(t=r+t),i=n;i>=0&&t>i&&r>i;i++)u.push(this[i]);return this.spawn(u)},size:function(){return this.length},eq:function(n){return this[n]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(n){if(!i.fn(n))return this;var t=this.toArray().sort(n);return this.spawn(t)},sortByZIndex:function(){return this.sort(r)},zDepth:function(){var t=this[0],n,i,r;if(t){if(n=t._private,i=n.group,"nodes"===i)return r=n.data.parent?t.parents().size():0,t.isParent()?r:Number.MAX_VALUE;var u=n.source,f=n.target,e=u.zDepth(),o=f.zDepth();return Math.max(e,o,0)}}};t.exports=u},{"../is":83,"./zsort":32}],28:[function(n,t){"use strict";var r=n("../is"),u=n("../util"),f=n("../promise"),i={layoutPositions:function(n,t,i){var s=this.nodes(),u=this.cy(),e,h,c;if(n.trigger({type:"layoutstart",layout:n}),n.animations=[],t.animate){for(e=0;e<s.length;e++){var o=s[e],a=i.call(o,e,o),l=o.position();r.number(l.x)&&r.number(l.y)||o.silentPosition({x:0,y:0});h=o.animation({position:a,duration:t.animationDuration,easing:t.animationEasing});n.animations.push(h);h.play()}u.on("step.*",c=function(){t.fit&&u.fit(t.eles,t.padding)});n.one("layoutstop",function(){u.off("step.*",c)});n.one("layoutready",t.ready);n.trigger({type:"layoutready",layout:n});f.all(n.animations.map(function(n){return n.promise()})).then(function(){u.off("step.*",c);null!=t.zoom&&u.zoom(t.zoom);t.pan&&u.pan(t.pan);t.fit&&u.fit(t.eles,t.padding);n.one("layoutstop",t.stop);n.trigger({type:"layoutstop",layout:n})})}else s.positions(i),t.fit&&u.fit(t.eles,t.padding),null!=t.zoom&&u.zoom(t.zoom),t.pan&&u.pan(t.pan),n.one("layoutready",t.ready),n.trigger({type:"layoutready",layout:n}),n.one("layoutstop",t.stop),n.trigger({type:"layoutstop",layout:n});return this},layout:function(n){var t=this.cy();return t.layout(u.extend({},n,{eles:this})),this},makeLayout:function(n){var t=this.cy();return t.makeLayout(u.extend({},n,{eles:this}))}};i.createLayout=i.makeLayout;t.exports=i},{"../is":83,"../promise":86,"../util":100}],29:[function(n,t){"use strict";var r=n("../is"),i={updateStyle:function(n){var t=this._private.cy,r;if(!t.styleEnabled())return this;if(t._private.batchingStyle)return r=t._private.batchStyleEles,r.merge(this),this;var u=t.hasCompoundNodes(),f=t.style(),i=this;return(n=!(!n&&void 0!==n),u&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents())),f.apply(i),u)&&i.updateCompoundBounds(),n?i.rtrigger("style"):i.trigger("style"),this},updateMappers:function(n){var r=this._private.cy,u=r.style(),t,i;return(n=!(!n&&void 0!==n),!r.styleEnabled())?this:(u.updateMappers(this),t=this.updateCompoundBounds(),i=t.length>0?this.add(t):this,n?i.rtrigger("style"):i.trigger("style"),this)},parsedStyle:function(n){var t=this[0];if(t.cy().styleEnabled())return t?t._private.style[n]||t.cy().style().getDefaultProperty(n):void 0},renderedStyle:function(n){var r=this.cy(),t,i;return r.styleEnabled()?(t=this[0],t?(i=t.cy().style().getRenderedStyle(t),void 0===n?i:i[n]):void 0):this},style:function(n,t){var s=this.cy(),o,f,h,i,e,u;if(!s.styleEnabled())return this;if(o=!1,f=s.style(),r.plainObject(n))h=n,f.applyBypass(this,h,o),i=this.updateCompoundBounds(),e=i.length>0?this.add(i):this,e.rtrigger("style");else if(r.string(n)){if(void 0===t)return u=this[0],u?f.getStylePropertyValue(u,n):void 0;f.applyBypass(this,n,t,o);i=this.updateCompoundBounds();e=i.length>0?this.add(i):this;e.rtrigger("style")}else if(void 0===n)return u=this[0],u?f.getRawStyle(u):void 0;return this},removeStyle:function(n){var f=this.cy(),t,r,u,s;if(!f.styleEnabled())return this;var e=!1,o=f.style(),i=this;if(void 0===n)for(t=0;t<i.length;t++)r=i[t],o.removeAllBypasses(r,e);else for(n=n.split(/\s+/),t=0;t<i.length;t++)r=i[t],o.removeBypasses(r,n,e);return u=this.updateCompoundBounds(),s=u.length>0?this.add(u):this,s.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var r=this.cy(),n,u,t,i,e,o;if(!r.styleEnabled())return!0;if(n=this[0],u=r.hasCompoundNodes(),n){if("visible"!==n.pstyle("visibility").value||"element"!==n.pstyle("display").value||0===n.pstyle("width").pfValue)return!1;if("nodes"===n._private.group){if(0===n.pstyle("height").pfValue)return!1;if(!u)return!0;if(t=n._private.data.parent?n.parents():null,t)for(i=0;i<t.length;i++){var f=t[i],s=f.pstyle("visibility").value,h=f.pstyle("display").value;if("visible"!==s||"element"!==h)return!1}return!0}return e=n._private.source,o=n._private.target,e.visible()&&o.visible()}},hidden:function(){var n=this[0];if(n)return!n.visible()},effectiveOpacity:function(){var u=this.cy(),f,n,e,t,i,r,o,s;if(!u.styleEnabled())return 1;if(f=u.hasCompoundNodes(),n=this[0],n){if(e=n._private,t=n.pstyle("opacity").value,!f)return t;if(i=e.data.parent?n.parents():null,i)for(r=0;r<i.length;r++)o=i[r],s=o.pstyle("opacity").value,t=s*t;return t}},transparent:function(){var i=this.cy(),n,t;return i.styleEnabled()?(n=this[0],t=n.cy().hasCompoundNodes(),n?t?0===n.effectiveOpacity():0===n.pstyle("opacity").value:void 0):!1},backgrounding:function(){var t=this.cy(),n;return t.styleEnabled()?(n=this[0],!!n._private.backgrounding):!1}};i.bypass=i.css=i.style;i.renderedCss=i.renderedStyle;i.removeBypass=i.removeCss=i.removeStyle;i.pstyle=i.parsedStyle;t.exports=i},{"../is":83}],30:[function(n,t){"use strict";function u(n){return function(){var t=arguments,o=[],s,r,u,f,e;if(2===t.length){s=t[0];r=t[1];this.on(n.event,s,r)}else if(1===t.length){r=t[0];this.on(n.event,r)}else if(0===t.length){for(u=0;u<this.length;u++){var i=this[u],h=!n.ableField||i._private[n.ableField],c=i._private[n.field]!=n.value;if(n.overrideAble&&(f=n.overrideAble(i),void 0!==f&&(h=f,!f)))return this;h&&(i._private[n.field]=n.value,c&&o.push(i))}e=this.spawn(o);e.updateStyle();e.trigger(n.event)}return this}}function r(n){i[n.field]=function(){var t=this[0],i;if(t)return n.overrideField&&(i=n.overrideField(t),void 0!==i)?i:t._private[n.field]};i[n.on]=u({event:n.on,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!0});i[n.off]=u({event:n.off,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!1})}var i={};r({field:"locked",overrideField:function(n){if(n.cy().autolock())return!0},on:"lock",off:"unlock"});r({field:"grabbable",overrideField:function(n){if(n.cy().autoungrabify())return!1},on:"grabify",off:"ungrabify"});r({field:"selected",ableField:"selectable",overrideAble:function(n){if(n.cy().autounselectify())return!1},on:"select",off:"unselect"});r({field:"selectable",overrideField:function(n){if(n.cy().autounselectify())return!1},on:"selectify",off:"unselectify"});i.deselect=i.unselect;i.grabbed=function(){var n=this[0];if(n)return n._private.grabbed};r({field:"active",on:"activate",off:"unactivate"});i.inactive=function(){var n=this[0];if(n)return!n._private.active};t.exports=i},{}],31:[function(n,t){"use strict";function f(n){return function(t){for(var f,u,r=[],i=0;i<this.length;i++)f=this[i],u=f._private[n.attr],u&&r.push(u);return this.spawn(r,{unique:!0}).filter(t)}}function e(n){return function(t){var o=[],y=this._private.cy,i=n||{},e,r;s.string(t)&&(t=y.$(t));for(var h=this._private.ids,c=t._private.ids,f=0;f<t.length;f++)for(e=t[f]._private.edges,r=0;r<e.length;r++){var l=e[r],u=l._private.data,a=h[u.source]&&c[u.target],v=c[u.source]&&h[u.target],p=a||v;if(p){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!a)continue;if(i.thisIsTgt&&!v)continue}o.push(l)}}return this.spawn(o,{unique:!0})}}function o(n){return n=u.extend({},{codirected:!1},n),function(t){for(var u=[],f=this.edges(),e=n,i=0;i<f.length;i++)for(var b=f[i],o=b._private,s=o.source,h=s._private.data.id,c=o.data.target,l=s._private.edges,r=0;r<l.length;r++){var a=l[r],v=a._private.data,y=v.target,p=v.source,w=y===c&&p===h,k=h===y&&c===p;(e.codirected&&w||!e.codirected&&(w||k))&&u.push(a)}return this.spawn(u,{unique:!0}).filter(t)}}var u=n("../util"),s=n("../is"),i={},r=function(n,t){return function(i,r,u,f){var e,o=i,h=this;if(null==o?e="null":s.elementOrCollection(o)&&1===o.length&&(e="#"+o.id()),1===h.length&&e){var c=h[0]._private,l=c.traversalCache=c.traversalCache||{},a=l[t]=l[t]||{},v=a[e];return v?v:a[e]=n.call(h,i,r,u,f)}return n.call(h,i,r,u,f)}},h=function(n){return function(t){for(var i,f=this,e=[],r=0;r<f.length;r++)if(i=f[r],i.isNode()){for(var o=!1,s=i.connectedEdges(),u=0;u<s.length;u++){var h=s[u],c=h.source(),l=h.target();if(n.noIncomingEdges&&l===i&&c!==i||n.noOutgoingEdges&&c===i&&l!==i){o=!0;break}}o||e.push(i)}return this.spawn(e,{unique:!0}).filter(t)}},c=function(n){return function(t){for(var r,o,u,s=this,i=[],e=0;e<s.length;e++)if(r=s[e],r.isNode())for(o=r.connectedEdges(),u=0;u<o.length;u++){var f=o[u],h=f.source(),c=f.target();n.outgoing&&h===r?(i.push(f),i.push(c)):n.incoming&&c===r&&(i.push(f),i.push(h))}return this.spawn(i,{unique:!0}).filter(t)}},l=function(n){return function(t){for(var i,f,r,e,o,u=this,s=[],h={};;){if(i=n.outgoing?u.outgoers():u.incomers(),0===i.length)break;for(f=!1,r=0;r<i.length;r++)e=i[r],o=e.id(),h[o]||(h[o]=!0,s.push(e),f=!0);if(!f)break;u=i}return this.spawn(s,{unique:!0}).filter(t)}};u.extend(i,{roots:h({noIncomingEdges:!0}),leaves:h({noOutgoingEdges:!0}),outgoers:r(c({outgoing:!0}),"outgoers"),successors:l({outgoing:!0}),incomers:r(c({incoming:!0}),"incomers"),predecessors:l({incoming:!0})});u.extend(i,{neighborhood:r(function(n){for(var t=[],f=this.nodes(),i=0;i<f.length;i++)for(var e=f[i],o=e.connectedEdges(),r=0;r<o.length;r++){var u=o[r],s=u.source(),c=u.target(),h=e===s?c:s;h.length>0&&t.push(h[0]);t.push(u[0])}return this.spawn(t,{unique:!0}).filter(n)},"neighborhood"),closedNeighborhood:function(n){return this.neighborhood().add(this).filter(n)},openNeighborhood:function(n){return this.neighborhood(n)}});i.neighbourhood=i.neighborhood;i.closedNeighbourhood=i.closedNeighborhood;i.openNeighbourhood=i.openNeighborhood;u.extend(i,{source:r(function(n){var t,i=this[0];return i&&(t=i._private.source||i.cy().collection()),t&&n?t.filter(n):t},"source"),target:r(function(n){var t,i=this[0];return i&&(t=i._private.target||i.cy().collection()),t&&n?t.filter(n):t},"target"),sources:f({attr:"source"}),targets:f({attr:"target"})});u.extend(i,{edgesWith:r(e(),"edgesWith",!0),edgesTo:r(e({thisIsSrc:!0}),"edgesTo",!0)});u.extend(i,{connectedEdges:r(function(n){for(var r,u,t,o,f=[],e=this,i=0;i<e.length;i++)if(r=e[i],r.isNode())for(u=r._private.edges,t=0;t<u.length;t++)o=u[t],f.push(o);return this.spawn(f,{unique:!0}).filter(n)},"connectedEdges"),connectedNodes:r(function(n){for(var t,i=[],u=this,r=0;r<u.length;r++)t=u[r],t.isEdge()&&(i.push(t.source()[0]),i.push(t.target()[0]));return this.spawn(i,{unique:!0}).filter(n)},"connectedNodes"),parallelEdges:r(o(),"parallelEdges"),codirectedEdges:r(o({codirected:!0}),"codirectedEdges")});u.extend(i,{components:function(){var n=this,e=n.cy(),o=n.spawn(),t=n.nodes().spawnSelf(),u=[],f=function(n,i){o.merge(n);t.unmerge(n);i.merge(n)},i,r;if(t.empty())return n.spawn();do i=e.collection(),u.push(i),r=t[0],f(r,i),n.bfs({directed:!1,roots:r,visit:function(n,t,r){f(r,i)}});while(t.length>0);return u.map(function(n){var t=n.connectedEdges().stdFilter(function(t){return n.anySame(t.source())&&n.anySame(t.target())});return n.union(t)})}});t.exports=i},{"../is":83,"../util":100}],32:[function(n,t){"use strict";var i=function(n,t){var h=n.cy(),r=n.pstyle("z-index").value-t.pstyle("z-index").value,u=0,f=0,c=h.hasCompoundNodes(),e=n.isNode(),l=!e,o=t.isNode(),a=!o,i,s;return c&&(u=n.zDepth(),f=t.zDepth()),i=u-f,s=0===i,s?e&&a?1:l&&o?-1:0===r?n.poolIndex()-t.poolIndex():r:i};t.exports=i},{}],33:[function(n,t){"use strict";var i=n("../is"),u=n("../util"),r=n("../collection"),f=n("../collection/element"),e={add:function(n){var o,s=this,h,e,y,t,v,c,l,w,a;if(i.elementOrCollection(n))if(h=n,h._private.cy===s)o=h.restore();else{for(t=[],e=0;e<h.length;e++)y=h[e],t.push(y.json());o=new r(s,t)}else if(i.array(n))t=n,o=new r(s,t);else if(i.plainObject(n)&&(i.array(n.nodes)||i.array(n.edges))){for(var b=n,t=[],p=["nodes","edges"],e=0,k=p.length;k>e;e++)if(v=p[e],c=b[v],i.array(c))for(l=0,w=c.length;w>l;l++)a=u.extend({group:v},c[l]),t.push(a);o=new r(s,t)}else a=n,o=new f(s,a).collection();return o},remove:function(n){if(!i.elementOrCollection(n)&&i.string(n)){var t=n;n=this.$(t)}return n.remove()},load:function(n,t,r){var f=this,e,o;return f.notifications(!1),e=f.mutableElements(),e.length>0&&e.remove(),null!=n&&(i.plainObject(n)||i.array(n))&&f.add(n),f.one("layoutready",function(n){f.notifications(!0);f.trigger(n);f.notify({type:"load",eles:f.mutableElements()});f.one("load",t);f.trigger("load")}).one("layoutstop",function(){f.one("done",r);f.trigger("done")}),o=u.extend({},f._private.options.layout),o.eles=f.elements(),f.layout(o),this}};t.exports=e},{"../collection":26,"../collection/element":22,"../is":83,"../util":100}],34:[function(n,t){"use strict";var r=n("../define"),u=n("../util"),i=n("../is"),f={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(n){var t=this;t.styleEnabled()&&t._private.aniEles.merge(n)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function s(){t._private.animationsRunning&&u.requestAnimationFrame(function(n){h(n);s()})}function h(n){function e(t,r){var v=t._private,f=v.animation.current,y=v.animation.queue,p=!1,c,h,e,s,u;for(0===f.length&&(c=y.shift(),c&&f.push(c)),h=function(n){for(var i,t=n.length-1;t>=0;t--)i=n[t],i();n.splice(0,n.length)},e=f.length-1;e>=0;e--)s=f[e],u=s._private,u.stopped?(f.splice(e,1),u.hooked=!1,u.playing=!1,u.started=!1,h(u.frames)):(u.playing||u.applying)&&(u.playing&&u.applying&&(u.applying=!1),u.started||l(t,s,n),a(t,s,n,r),i.fn(u.step)&&u.step.call(t,n),u.applying&&(u.applying=!1),h(u.frames),s.completed()&&(f.splice(e,1),u.hooked=!1,u.playing=!1,u.started=!1,h(u.completes)),p=!0);return r||0!==f.length||0!==y.length||o.push(t),p}for(var s,h,c,v,r=t._private.aniEles,o=[],u=!1,f=0;f<r.length;f++)s=r[f],h=e(s),u=u||h;c=e(t,!0);(u||c)&&(r.length>0?(v=r.updateCompoundBounds().spawnSelf().merge(r),t.notify({type:"draw",eles:v})):t.notify({type:"draw"}));r.unmerge(o);t.trigger("step")}function l(n,r,u){var s=i.core(n),c=!s,h=n,l=t._private.style,f=r._private,e,o;c&&(e=h._private.position,f.startPosition=f.startPosition||{x:e.x,y:e.y},f.startStyle=f.startStyle||l.getAnimationStartStyle(h,f.style));s&&(o=t._private.pan,f.startPan=f.startPan||{x:o.x,y:o.y},f.startZoom=null!=f.startZoom?f.startZoom:t._private.zoom);f.started=!0;f.startTime=u-f.progress*f.duration}function a(n,u,e,s){var rt=t._private.style,ut=!s,tt=n._private,h=u._private,k=h.easing,at=h.startTime,v,ft,l,y,c,a,b,nt;if(h.easingImpl||(null==k?h.easingImpl=o.linear:(i.string(k)?(ft=rt.parse("transition-timing-function",k),v=ft.value):v=k,i.string(v)?(l=v,y=[]):(l=v[1],y=v.slice(2).map(function(n){return+n})),y.length>0?("spring"===l&&y.push(h.duration),h.easingImpl=o[l].apply(null,y)):h.easingImpl=o[l])),a=h.easingImpl,c=0===h.duration?1:(e-at)/h.duration,h.applying&&(c=h.progress),0>c?c=0:c>1&&(c=1),null==h.delay){var d=h.startPosition,p=h.position,et=tt.position;p&&ut&&(f(d.x,p.x)&&(et.x=r(d.x,p.x,c,a)),f(d.y,p.y)&&(et.y=r(d.y,p.y,c,a)),n.trigger("position"));var g=h.startPan,w=h.pan,ot=tt.pan,st=null!=w&&s;st&&(f(g.x,w.x)&&(ot.x=r(g.x,w.x,c,a)),f(g.y,w.y)&&(ot.y=r(g.y,w.y,c,a)),n.trigger("pan"));var ht=h.startZoom,it=h.zoom,ct=null!=it&&s;if(ct&&(f(ht,it)&&(tt.zoom=r(ht,it,c,a)),n.trigger("zoom")),(st||ct)&&n.trigger("viewport"),b=h.style,b&&b.length>0&&ut){for(nt=0;nt<b.length;nt++){var lt=b[nt],l=lt.name,vt=lt,yt=h.startStyle[l],pt=r(yt,vt,c,a);rt.overrideBypass(n,l,pt)}n.trigger("style")}}return h.progress=c,c}function f(n,t){return null==n||null==t?!1:i.number(n)&&i.number(t)?!0:!(!n||!t)}function v(n,t,i){var r=1-i,u=i*i;return 3*r*r*i*n+3*r*u*t+u*i}function n(n,t){return function(i,r,u){return i+(r-i)*v(n,t,u)}}function r(n,t,r,u){var e,f,s,o,l,h,c;if(0>r?r=0:r>1&&(r=1),e=null!=n.pfValue||null!=n.value?null!=n.pfValue?n.pfValue:n.value:n,f=null!=t.pfValue||null!=t.value?null!=t.pfValue?t.pfValue:t.value:t,i.number(e)&&i.number(f))return u(e,f,r);if(i.array(e)&&i.array(f)){for(s=[],o=0;o<f.length;o++)l=e[o],h=f[o],null!=l&&null!=h?(c=u(l,h,r),n.roundValue&&(c=Math.round(c)),s.push(c)):s.push(h);return s}}var t=this,e,c,o;if(t._private.animationsRunning=!0,t.styleEnabled()){e=t.renderer();e&&e.beforeRender?e.beforeRender(function(n,t){h(t)},e.beforeRenderPriorities.animations):s();
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */
c=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function n(n,i,r){var u={x:n.x+r.dx*i,v:n.v+r.dv*i,tension:n.tension,friction:n.friction};return{dx:u.v,dv:t(u)}}function i(i,r){var u={dx:i.v,dv:t(i)},f=n(i,.5*r,u),e=n(i,.5*r,f),o=n(i,r,e),s=1/6*(u.dx+2*(f.dx+e.dx)+o.dx),h=1/6*(u.dv+2*(f.dv+e.dv)+o.dv);return i.x=i.x+s*r,i.v=i.v+h*r,i}return function r(n,t,u){var o,s,f,h={x:-1,v:0,tension:null,friction:null},c=[0],e=0,l=.0001,a=.016;for(n=parseFloat(n)||500,t=parseFloat(t)||20,u=u||null,h.tension=n,h.friction=t,o=null!==u,o?(e=r(n,t),s=e/u*a):s=a;;)if(f=i(f||h,s),c.push(1+f.x),e+=16,!(Math.abs(f.x)>l&&Math.abs(f.v)>l))break;return o?function(n){return c[n*(c.length-1)|0]}:e}}();o={linear:function(n,t,i){return n+(t-n)*i},ease:n(.25,.1,.25,1),"ease-in":n(.42,0,1,1),"ease-out":n(0,0,.58,1),"ease-in-out":n(.42,0,.58,1),"ease-in-sine":n(.47,0,.745,.715),"ease-out-sine":n(.39,.575,.565,1),"ease-in-out-sine":n(.445,.05,.55,.95),"ease-in-quad":n(.55,.085,.68,.53),"ease-out-quad":n(.25,.46,.45,.94),"ease-in-out-quad":n(.455,.03,.515,.955),"ease-in-cubic":n(.55,.055,.675,.19),"ease-out-cubic":n(.215,.61,.355,1),"ease-in-out-cubic":n(.645,.045,.355,1),"ease-in-quart":n(.895,.03,.685,.22),"ease-out-quart":n(.165,.84,.44,1),"ease-in-out-quart":n(.77,0,.175,1),"ease-in-quint":n(.755,.05,.855,.06),"ease-out-quint":n(.23,1,.32,1),"ease-in-out-quint":n(.86,0,.07,1),"ease-in-expo":n(.95,.05,.795,.035),"ease-out-expo":n(.19,1,.22,1),"ease-in-out-expo":n(1,0,0,1),"ease-in-circ":n(.6,.04,.98,.335),"ease-out-circ":n(.075,.82,.165,1),"ease-in-out-circ":n(.785,.135,.15,.86),spring:function(n,t,i){if(0===i)return o.linear;var r=c(n,t,i);return function(n,t,i){return n+(t-n)*r(i)}},"cubic-bezier":function(t,i,r,u){return n(t,i,r,u)}}}}};t.exports=f},{"../define":44,"../is":83,"../util":100}],35:[function(n,t){"use strict";var i=n("../define"),r={on:i.on(),one:i.on({unbindSelfOnTrigger:!0}),once:i.on({unbindAllBindersOnTrigger:!0}),off:i.off(),trigger:i.trigger()};i.eventAliasesOn(r);t.exports=r},{"../define":44}],36:[function(n,t){"use strict";var i={png:function(n){var t=this._private.renderer;return n=n||{},t.png(n)},jpg:function(n){var t=this._private.renderer;return n=n||{},n.bg=n.bg||"#fff",t.jpg(n)}};i.jpeg=i.jpg;t.exports=i},{}],37:[function(n,t){"use strict";var s=n("../window"),r=n("../util"),u=n("../collection"),i=n("../is"),h=n("../promise"),f=n("../define"),e=function(n){var o=this,e,f,y,a,t,p;n=r.extend({},n);e=n.container;e&&!i.htmlElement(e)&&i.htmlElement(e[0])&&(e=e[0]);f=e?e._cyreg:null;f=f||{};f&&f.cy&&(f.cy.destroy(),f={});y=f.readies=f.readies||[];e&&(e._cyreg=f);f.cy=o;a=void 0!==s&&void 0!==e&&!n.headless;t=n;t.layout=r.extend({name:a?"grid":"null"},t.layout);t.renderer=r.extend({name:a?"canvas":"null"},t.renderer);var c=function(n,t,i){return void 0!==t?t:void 0!==i?i:n},l=this._private={container:e,ready:!1,initrender:!1,options:t,elements:new u(this),listeners:[],aniEles:new u(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,t.zoomingEnabled),userZoomingEnabled:c(!0,t.userZoomingEnabled),panningEnabled:c(!0,t.panningEnabled),userPanningEnabled:c(!0,t.userPanningEnabled),boxSelectionEnabled:c(!0,t.boxSelectionEnabled),autolock:c(!1,t.autolock,t.autolockNodes),autoungrabify:c(!1,t.autoungrabify,t.autoungrabifyNodes),autounselectify:c(!1,t.autounselectify),styleEnabled:void 0===t.styleEnabled?a:t.styleEnabled,zoom:i.number(t.zoom)?t.zoom:1,pan:{x:i.plainObject(t.pan)&&i.number(t.pan.x)?t.pan.x:0,y:i.plainObject(t.pan)&&i.number(t.pan.y)?t.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1},v=t.selectionType;l.selectionType=void 0===v||"additive"!==v&&"single"!==v?"single":v;i.number(t.minZoom)&&i.number(t.maxZoom)&&t.minZoom<t.maxZoom?(l.minZoom=t.minZoom,l.maxZoom=t.maxZoom):i.number(t.minZoom)&&void 0===t.maxZoom?l.minZoom=t.minZoom:i.number(t.maxZoom)&&void 0===t.minZoom&&(l.maxZoom=t.maxZoom);p=function(n,t){var r=n.some(i.promise);return r?h.all(n).then(t):void t(n)};o.initRenderer(r.extend({hideEdgesOnViewport:t.hideEdgesOnViewport,textureOnViewport:t.textureOnViewport,wheelSensitivity:i.number(t.wheelSensitivity)&&t.wheelSensitivity>0?t.wheelSensitivity:1,motionBlur:void 0===t.motionBlur?!1:t.motionBlur,motionBlurOpacity:void 0===t.motionBlurOpacity?.05:t.motionBlurOpacity,pixelRatio:i.number(t.pixelRatio)&&t.pixelRatio>0?t.pixelRatio:void 0,desktopTapThreshold:void 0===t.desktopTapThreshold?4:t.desktopTapThreshold,touchTapThreshold:void 0===t.touchTapThreshold?8:t.touchTapThreshold},t.renderer));p([t.style,t.elements],function(n){var r=n[0],u=n[1];l.styleEnabled&&o.setStyle(r);t.initrender&&(o.on("initrender",t.initrender),o.on("initrender",function(){l.initrender=!0}));o.load(u,function(){var n,r;for(o.startAnimationLoop(),l.ready=!0,i.fn(t.ready)&&o.on("ready",t.ready),n=0;n<y.length;n++){r=y[n];o.on("ready",r)}f&&(f.readies=[]);o.trigger("ready")},t.done)})},o=e.prototype;r.extend(o,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(n){return this.isReady()?this.trigger("ready",[],n):this.on("ready",n),this},initrender:function(){return this._private.initrender},destroy:function(){var n=this;return n.stopAnimationLoop(),n.destroyRenderer(),n},hasElementWithId:function(n){return this._private.elements.hasElementWithId(n)},getElementById:function(n){return this._private.elements.getElementById(n)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(n){return this._private.elements.merge(n),this},removeFromPool:function(n){return this._private.elements.unmerge(n),this},container:function(){return this._private.container},options:function(){return r.copy(this._private.options)},json:function(n){var t=this,o=t._private,y=t.mutableElements(),s,h,c,l,a,v,f,e,u;if(i.plainObject(n)){if(t.startBatch(),n.elements){if(s={},h=function(n,i){for(var u=0;u<n.length;u++){var f=n[u],e=f.data.id,o=t.getElementById(e);s[e]=!0;0!==o.length?o.json(f):i?t.add(r.extend({group:i},f)):t.add(f)}},i.array(n.elements))h(n.elements);else for(c=["nodes","edges"],f=0;f<c.length;f++)l=c[f],a=n.elements[l],i.array(a)&&h(a,l);y.stdFilter(function(n){return!s[n.id()]}).remove()}for(n.style&&t.style(n.style),null!=n.zoom&&n.zoom!==o.zoom&&t.zoom(n.zoom),n.pan&&(n.pan.x===o.pan.x&&n.pan.y===o.pan.y||t.pan(n.pan)),v=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],f=0;f<v.length;f++)e=v[f],null!=n[e]&&t[e](n[e]);return t.endBatch(),this}if(void 0===n)return u={},u.elements={},y.forEach(function(n){var t=n.group();u.elements[t]||(u.elements[t]=[]);u.elements[t].push(n.json())}),this._private.styleEnabled&&(u.style=t.style().json()),u.zoomingEnabled=t._private.zoomingEnabled,u.userZoomingEnabled=t._private.userZoomingEnabled,u.zoom=t._private.zoom,u.minZoom=t._private.minZoom,u.maxZoom=t._private.maxZoom,u.panningEnabled=t._private.panningEnabled,u.userPanningEnabled=t._private.userPanningEnabled,u.pan=r.copy(t._private.pan),u.boxSelectionEnabled=t._private.boxSelectionEnabled,u.renderer=r.copy(t._private.options.renderer),u.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,u.textureOnViewport=t._private.options.textureOnViewport,u.wheelSensitivity=t._private.options.wheelSensitivity,u.motionBlur=t._private.options.motionBlur,u},scratch:f.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:f.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})});[n("./add-remove"),n("./animation"),n("./events"),n("./export"),n("./layout"),n("./notification"),n("./renderer"),n("./search"),n("./style"),n("./viewport")].forEach(function(n){r.extend(o,n)});t.exports=e},{"../collection":26,"../define":44,"../is":83,"../promise":86,"../util":100,"../window":107,"./add-remove":33,"./animation":34,"./events":35,"./export":36,"./layout":38,"./notification":39,"./renderer":40,"./search":41,"./style":42,"./viewport":43}],38:[function(n,t){"use strict";var i=n("../util"),u=n("../is"),r={layout:function(n){var t=this._private.prevLayout=null==n?this._private.prevLayout:this.makeLayout(n);return t.run(),this},makeLayout:function(n){var t=this,r,f,e;return null==n?void i.error("Layout options must be specified to make a layout"):null==n.name?void i.error("A `name` must be specified to make a layout"):(r=n.name,f=t.extension("layout",r),null==f)?void i.error("Can not apply layout: No such layout `"+r+"` found; did you include its JS file?"):(e=u.string(n.eles)?t.$(n.eles):null!=n.eles?n.eles:t.$(),new f(i.extend({},n,{cy:t,eles:e})))}};r.createLayout=r.makeLayout;t.exports=r},{"../is":83,"../util":100}],39:[function(n,t){"use strict";var i={notify:function(n){var t=this._private,u,i,r;if(t.batchingNotify)return u=t.batchNotifyEles,i=t.batchNotifyTypes,n.eles&&u.merge(n.eles),void(i.ids[n.type]||(i.push(n.type),i.ids[n.type]=!0));t.notificationsEnabled&&(r=this.renderer(),r&&r.notify(n))},notifications:function(n){var t=this._private;return void 0===n?t.notificationsEnabled:void(t.notificationsEnabled=!!n)},noNotifications:function(n){this.notifications(!1);n();this.notifications(!0)},startBatch:function(){var n=this._private;return null==n.batchCount&&(n.batchCount=0),0===n.batchCount&&(n.batchingStyle=n.batchingNotify=!0,n.batchStyleEles=this.collection(),n.batchNotifyEles=this.collection(),n.batchNotifyTypes=[],n.batchNotifyTypes.ids={}),n.batchCount++,this},endBatch:function(){var n=this._private;return n.batchCount--,0===n.batchCount&&(n.batchingStyle=!1,n.batchStyleEles.updateStyle(),n.batchingNotify=!1,this.notify({type:n.batchNotifyTypes,eles:n.batchNotifyEles})),this},batch:function(n){return this.startBatch(),n(),this.endBatch(),this},batchData:function(n){var t=this;return this.batch(function(){for(var r=Object.keys(n),i=0;i<r.length;i++){var u=r[i],f=n[u],e=t.getElementById(u);e.data(f)}})}};t.exports=i},{}],40:[function(n,t){"use strict";var r=n("../util"),i={renderTo:function(n,t,i,r){var u=this._private.renderer;return u.renderTo(n,t,i,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(n){var t=this,i=t.extension("renderer",n.name),u;if(null==i)return void r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",n.name);u=r.extend({},n,{cy:t});t._private.renderer=new i(u)},destroyRenderer:function(){var t=this,n;if(t.notify({type:"destroy"}),n=t.container(),n)for(n._cyreg=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);t._private.renderer=null},onRender:function(n){return this.on("render",n)},offRender:function(n){return this.off("render",n)}};i.invalidateDimensions=i.resize;t.exports=i},{"../util":100}],41:[function(n,t){"use strict";var r=n("../is"),u=n("../collection"),i={collection:function(n,t){return r.string(n)?this.$(n):r.elementOrCollection(n)?n.collection():r.array(n)?new u(this,n,t):new u(this)},nodes:function(n){var t=this.$(function(){return this.isNode()});return n?t.filter(n):t},edges:function(n){var t=this.$(function(){return this.isEdge()});return n?t.filter(n):t},$:function(n){var t=this._private.elements;return n?t.filter(n):t.spawnSelf()},mutableElements:function(){return this._private.elements}};i.elements=i.filter=i.$;t.exports=i},{"../collection":26,"../is":83}],42:[function(n,t){"use strict";var i=n("../is"),r=n("../style"),u={style:function(n){if(n){var t=this.setStyle(n);t.update()}return this._private.style},setStyle:function(n){var t=this._private;return t.style=i.stylesheet(n)?n.generateStyle(this):i.array(n)?r.fromJson(this,n):i.string(n)?r.fromString(this,n):r(this),t.style}};t.exports=u},{"../is":83,"../style":92}],43:[function(n,t){"use strict";var i=n("../is"),u=n("../window"),r={autolock:function(n){return void 0===n?this._private.autolock:(this._private.autolock=!!n,this)},autoungrabify:function(n){return void 0===n?this._private.autoungrabify:(this._private.autoungrabify=!!n,this)},autounselectify:function(n){return void 0===n?this._private.autounselectify:(this._private.autounselectify=!!n,this)},panningEnabled:function(n){return void 0===n?this._private.panningEnabled:(this._private.panningEnabled=!!n,this)},userPanningEnabled:function(n){return void 0===n?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!n,this)},zoomingEnabled:function(n){return void 0===n?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!n,this)},userZoomingEnabled:function(n){return void 0===n?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!n,this)},boxSelectionEnabled:function(n){return void 0===n?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!n,this)},pan:function(){var t,u,f,e,o,n=arguments,r=this._private.pan;switch(n.length){case 0:return r;case 1:if(i.string(n[0]))return t=n[0],r[t];if(i.plainObject(n[0])){if(!this._private.panningEnabled)return this;f=n[0];e=f.x;o=f.y;i.number(e)&&(r.x=e);i.number(o)&&(r.y=o);this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=n[0];u=n[1];"x"!==t&&"y"!==t||!i.number(u)||(r[t]=u);this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(){var t,r,u,f,e,n=arguments,o=this._private.pan;if(!this._private.panningEnabled)return this;switch(n.length){case 1:i.plainObject(n[0])&&(u=n[0],f=u.x,e=u.y,i.number(f)&&(o.x+=f),i.number(e)&&(o.y+=e),this.trigger("pan viewport"));break;case 2:t=n[0];r=n[1];"x"!==t&&"y"!==t||!i.number(r)||(o[t]+=r);this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(n,t){var i=this.getFitViewport(n,t),r;return i&&(r=this._private,r.zoom=i.zoom,r.pan=i.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})),this},getFitViewport:function(n,t){var r,s,f,u,e,o,h;if((i.number(n)&&void 0===t&&(t=n,n=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(i.string(n)?(s=n,n=this.$(s)):i.boundingBox(n)?(f=n,r={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1):i.elementOrCollection(n)||(n=this.mutableElements()),r=r||n.boundingBox(),e=this.width(),o=this.height(),t=i.number(t)?t:0,!isNaN(e)&&!isNaN(o)&&e>0&&o>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0))return u=Math.min((e-2*t)/r.w,(o-2*t)/r.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u,h={x:(e-u*(r.x1+r.x2))/2,y:(o-u*(r.y1+r.y2))/2},{zoom:u,pan:h}},minZoom:function(n){return void 0===n?this._private.minZoom:(i.number(n)&&(this._private.minZoom=n),this)},maxZoom:function(n){return void 0===n?this._private.maxZoom:(i.number(n)&&(this._private.maxZoom=n),this)},zoom:function(n){var r,t,l;if(void 0===n)return this._private.zoom;if(i.number(n))t=n;else if(i.plainObject(n)){if(t=n.level,n.position){var e=n.position,o=this._private.pan,s=this._private.zoom;r={x:e.x*s+o.x,y:e.y*s+o.y}}else n.renderedPosition&&(r=n.renderedPosition);if(r&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled||!i.number(t)||r&&(!i.number(r.x)||!i.number(r.y)))return this;if(t=t>this._private.maxZoom?this._private.maxZoom:t,t=t<this._private.minZoom?this._private.minZoom:t,r){var u=this._private.pan,h=this._private.zoom,c=t,f={x:-c/h*(r.x-u.x)+r.x,y:-c/h*(r.y-u.y)+r.y};this._private.zoom=t;this._private.pan=f;l=u.x!==f.x||u.y!==f.y;this.trigger(" zoom "+(l?" pan ":"")+" viewport ")}else this._private.zoom=t,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(n){var t=this._private,e=!0,o=!0,r=[],h=!1,s=!1,f,u;return n?(i.number(n.zoom)||(e=!1),i.plainObject(n.pan)||(o=!1),!e&&!o)?this:(e&&(f=n.zoom,f<t.minZoom||f>t.maxZoom||!t.zoomingEnabled?h=!0:(t.zoom=f,r.push("zoom"))),o&&(!h||!n.cancelOnFailedZoom)&&t.panningEnabled&&(u=n.pan,i.number(u.x)&&(t.pan.x=u.x,s=!1),i.number(u.y)&&(t.pan.y=u.y,s=!1),s||r.push("pan")),r.length>0&&(r.push("viewport"),this.trigger(r.join(" ")),this.notify({type:"viewport"})),this):this},center:function(n){var t=this.getCenterPan(n);return t&&(this._private.pan=t,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(n,t){var u;if(this._private.panningEnabled){i.string(n)?(u=n,n=this.mutableElements().filter(u)):i.elementOrCollection(n)||(n=this.mutableElements());var r=n.boundingBox(),f=this.width(),e=this.height();return t=void 0===t?this._private.zoom:t,{x:(f-t*(r.x1+r.x2))/2,y:(e-t*(r.y1+r.y2))/2}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var n=this._private,t=n.container;return n.sizeCache=n.sizeCache||(t?function(){var i=t.getBoundingClientRect(),r=u.getComputedStyle(t),n=function(n){return parseFloat(r.getPropertyValue(n))};return{width:i.width-n("padding-left")-n("padding-right")-n("border-left-width")-n("border-right-width"),height:i.height-n("padding-top")-n("padding-bottom")-n("border-top-width")-n("border-bottom-width")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,i=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-t.x)/i,x2:(r.x2-t.x)/i,y1:(r.y1-t.y)/i,y2:(r.y2-t.y)/i};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var n=this.width(),t=this.height();return{x1:0,y1:0,x2:n,y2:t,w:n,h:t}}};r.centre=r.center;r.autolockNodes=r.autolock;r.autoungrabifyNodes=r.autoungrabify;t.exports=r},{"../is":83,"../window":107}],44:[function(n,t){"use strict";var r=n("./util"),i=n("./is"),e=n("./selector"),o=n("./promise"),s=n("./event"),f=n("./animation"),u={data:function(n){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(){},canSet:function(){return!0}};return n=r.extend({},t,n),function(t,r){var u=n,f=this,y=void 0!==f.length,o=y?f:[f],s=y?f[0]:f,e,p,c,a,v,d,h;if(i.string(t)){if(u.allowGetting&&void 0===r)return s&&(h=s._private[u.field][t]),h;if(u.allowSetting&&void 0!==r&&(c=!u.immutableKeys[t],c)){for(e=0,p=o.length;p>e;e++)u.canSet(o[e])&&(o[e]._private[u.field][t]=r);u.updateStyle&&f.updateStyle();u.onSet(f);u.settingTriggersEvent&&f[u.triggerFnName](u.settingEvent)}}else if(u.allowSetting&&i.plainObject(t)){for(var l,w,b=t,k=Object.keys(b),e=0;e<k.length;e++)if(l=k[e],w=b[l],c=!u.immutableKeys[l],c)for(a=0;a<o.length;a++)v=o[a],u.canSet(v)&&(v._private[u.field][l]=w);u.updateStyle&&f.updateStyle();u.onSet(f);u.settingTriggersEvent&&f[u.triggerFnName](u.settingEvent)}else if(u.allowBinding&&i.fn(t)){d=t;f.on(u.bindingEvent,d)}else if(u.allowGetting&&void 0===t)return s&&(h=s._private[u.field]),h;return f}},removeData:function(n){return n=r.extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},n),function(t){var r=n,e=this,y=void 0!==e.length,s=y?e:[e],l,u,c,f,v;if(i.string(t)){for(var h=t.split(/\s+/),p=h.length,o=0;p>o;o++)if(f=h[o],!i.emptyString(f)&&(l=!r.immutableKeys[f],l))for(u=0,c=s.length;c>u;u++)s[u]._private[r.field][f]=void 0;r.triggerEvent&&e[r.triggerFnName](r.event)}else if(void 0===t){for(u=0,c=s.length;c>u;u++)for(var a=s[u]._private[r.field],h=Object.keys(a),o=0;o<h.length;o++)f=h[o],v=!r.immutableKeys[f],v&&(a[f]=void 0);r.triggerEvent&&e[r.triggerFnName](r.event)}return e}},event:{regex:/(\w+)(\.(?:\w+|\*))?/,universalNamespace:".*",optionalTypeRegex:/(\w+)?(\.(?:\w+|\*))?/,falseCallback:function(){return!1}},on:function(n){return n=r.extend({},{unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1},n),function(t,r,f,o){var h=this,nt=void 0!==h.length,l=nt?h:[h],d=i.string(t),g=n,w,b,a,s,v,k,c,p;if(i.plainObject(r)?(o=f,f=r,r=void 0):(i.fn(r)||r===!1)&&(o=r,f=void 0,r=void 0),(i.fn(f)||f===!1)&&(o=f,f=void 0),!i.fn(o)&&o!==!1&&d)return h;for(d&&(w={},w[t]=o,t=w),b=Object.keys(t),a=0;a<b.length;a++)if(s=b[a],o=t[s],o===!1&&(o=u.event.falseCallback),i.fn(o))for(s=s.split(/\s+/),v=0;v<s.length;v++)if(k=s[v],!i.emptyString(k)&&(c=k.match(u.event.regex),c))for(var tt=c[1],it=c[2]?c[2]:void 0,rt={callback:o,data:f,delegated:!!r,selector:r,selObj:new e(r),type:tt,namespace:it,unbindSelfOnTrigger:g.unbindSelfOnTrigger,unbindAllBindersOnTrigger:g.unbindAllBindersOnTrigger,binders:l},y=0;y<l.length;y++)p=l[y]._private=l[y]._private||{},p.listeners=p.listeners||[],p.listeners.push(rt);return h}},eventAliasesOn:function(n){var t=n;t.addListener=t.listen=t.bind=t.on;t.removeListener=t.unlisten=t.unbind=t.off;t.emit=t.trigger;t.pon=t.promiseOn=function(){var n=this,t=Array.prototype.slice.call(arguments,0);return new o(function(i){var u=function(t){n.off.apply(n,f);i(t)},r=t.concat([u]),f=r.concat([]);n.on.apply(n,r)})}},off:function(n){return n=r.extend({},{},n),function(n,t,r){var h=this,nt=void 0!==h.length,e=nt?h:[h],tt=i.string(n),f,v,y,l,o,a,p,s;if(0===arguments.length){for(f=0;f<e.length;f++)e[f]._private=e[f]._private||{},w.listeners=[];return h}for(((i.fn(t)||t===!1)&&(r=t,t=void 0),tt)&&(v={},v[n]=r,n=v),y=Object.keys(n),l=0;l<y.length;l++)for(o=y[l],r=n[o],r===!1&&(r=u.event.falseCallback),o=o.split(/\s+/),a=0;a<o.length;a++)if(p=o[a],!i.emptyString(p)&&(s=p.match(u.event.optionalTypeRegex),s))for(var d=s[1]?s[1]:void 0,g=s[2]?s[2]:void 0,f=0;f<e.length;f++)for(var w=e[f]._private=e[f]._private||{},b=w.listeners=w.listeners||[],c=0;c<b.length;c++){var k=b[c],it=!g||g===k.namespace,rt=!d||k.type===d,ut=!r||r===k.callback,ft=it&&rt&&ut;ft&&(b.splice(c,1),c--)}return h}},trigger:function(n){return n=r.extend({},{},n),function(t,r,f){var w=this,wt=void 0!==w.length,ot=wt?w:[w],bt=i.string(t),kt=i.plainObject(t),dt=i.event(t),it=this._private=this._private||{},l=it.cy||(i.core(this)?this:null),gt=l?l.hasCompoundNodes():!1,rt,e,st,c,a,b,v,d,ft,g,nt,tt,y,vt,yt,et,p,pt;if(bt){for(rt=t.split(/\s+/),t=[],c=0;c<rt.length;c++)if(e=rt[c],!i.emptyString(e)){var ut=e.match(u.event.regex),ni=ut[1],ti=ut[2]?ut[2]:void 0;t.push({type:ni,namespace:ti})}}else kt&&(st=t,t=[st]);for(r?i.array(r)||(r=[r]):r=[],c=0;c<t.length;c++)for(a=t[c],b=0;b<ot.length;b++){var e,h=ot[b],it=h._private=h._private||{},k=it.listeners=it.listeners||[],ii=i.element(h),ht=ii||n.layout;if(dt?(e=a,e.cyTarget=e.cyTarget||h,e.cy=e.cy||l):e=new s(a,{cyTarget:h,cy:l,namespace:a.namespace}),a.layout&&(e.layout=a.layout),n.layout&&(e.layout=h),e.cyPosition){var ct=e.cyPosition,lt=l.zoom(),at=l.pan();e.cyRenderedPosition={x:ct.x*lt+at.x,y:ct.y*lt+at.y}}for(f&&(k=[{namespace:e.namespace,type:e.type,callback:f}]),v=0;v<k.length;v++){var o=k[v],ri=!o.namespace||o.namespace===e.namespace||o.namespace===u.event.universalNamespace,ui=o.type===e.type,fi=o.delegated?h!==e.cyTarget&&i.element(e.cyTarget)&&o.selObj.matches(e.cyTarget):!0,ei=ri&&ui&&fi;if(ei){if(d=[e],d=d.concat(r),e.data=o.data?o.data:void 0,(o.unbindSelfOnTrigger||o.unbindAllBindersOnTrigger)&&(k.splice(v,1),v--),o.unbindAllBindersOnTrigger)for(ft=o.binders,g=0;g<ft.length;g++)if(nt=ft[g],nt&&nt!==h)for(tt=nt._private.listeners,y=0;y<tt.length;y++)vt=tt[y],vt===o&&(tt.splice(y,1),y--);yt=o.delegated?e.cyTarget:h;et=o.callback.apply(yt,d);(et===!1||e.isPropagationStopped())&&(ht=!1,et===!1&&(e.stopPropagation(),e.preventDefault()))}}ht&&(p=gt?h._private.parent:null,pt=null!=p&&0!==p.length,pt?(p=p[0],p.trigger(e)):l.trigger(e))}return w}},animated:function(n){return n=r.extend({},{},n),function(){var n=this,i=void 0!==n.length,r=i?n:[n],u=this._private.cy||this,t;return u.styleEnabled()?(t=r[0],t?t._private.animation.current.length>0:void 0):!1}},clearQueue:function(n){return n=r.extend({},{},n),function(){var t=this,u=void 0!==t.length,i=u?t:[t],f=this._private.cy||this,n,r;if(!f.styleEnabled())return this;for(n=0;n<i.length;n++)r=i[n],r._private.animation.queue=[];return this}},delay:function(n){return n=r.extend({},{},n),function(n,t){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:n,duration:n,complete:t}):this}},delayAnimation:function(n){return n=r.extend({},{},n),function(n,t){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:n,duration:n,complete:t}):this}},animation:function(n){return n=r.extend({},{},n),function(n,t){var s=this,v=void 0!==s.length,y=v?s:[s],i=this._private.cy||this,u=!v,p=!u,w,b,h,c,l,a,e,o;if(!i.styleEnabled())return this;w=i.style();switch(n=r.extend({},n,t),void 0===n.duration&&(n.duration=400),n.duration){case"slow":n.duration=600;break;case"fast":n.duration=200}if(b=0===Object.keys(n).length,b)return new f(y[0],n);if(p&&(n.style=w.getPropsList(n.style||n.css),n.css=void 0),n.renderedPosition&&p){var k=n.renderedPosition,d=i.pan(),g=i.zoom();n.position={x:(k.x-d.x)/g,y:(k.y-d.y)/g}}return n.panBy&&u&&(h=n.panBy,c=i.pan(),n.pan={x:c.x+h.x,y:c.y+h.y}),l=n.center||n.centre,l&&u&&(a=i.getCenterPan(l.eles,n.zoom),a&&(n.pan=a)),n.fit&&u&&(e=n.fit,o=i.getFitViewport(e.eles||e.boundingBox,e.padding),o&&(n.pan=o.pan,n.zoom=o.zoom)),new f(y[0],n)}},animate:function(n){return n=r.extend({},{},n),function(n,t){var u=this,o=void 0!==u.length,f=o?u:[u],s=this._private.cy||this,i;if(!s.styleEnabled())return this;for(t&&(n=r.extend({},n,t)),i=0;i<f.length;i++){var e=f[i],h=e.animated()&&(void 0===n.queue||n.queue),c=e.animation(n,h?{queue:!0}:void 0);c.play()}return this}},stop:function(n){return n=r.extend({},{},n),function(n,t){var r=this,l=void 0!==r.length,e=l?r:[r],o=this._private.cy||this,i,h,c;if(!o.styleEnabled())return this;for(i=0;i<e.length;i++){for(var a=e[i],u=a._private,s=u.animation.current,f=0;f<s.length;f++)h=s[f],c=h._private,t&&(c.duration=0);n&&(u.animation.queue=[]);t||(u.animation.current=[])}return o.notify({eles:this,type:"draw"}),this}}};t.exports=u},{"./animation":2,"./event":45,"./is":83,"./promise":86,"./selector":87,"./util":100}],45:[function(n,t){"use strict";function i(){return!1}function r(){return!0}
/*!
            Event object based on jQuery events, MIT license
            https://jquery.org/license/
            https://tldrlegal.com/license/mit-license
            https://github.com/jquery/jquery/blob/master/src/event.js
            */
var u=function(n,t){return this instanceof u?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented?r:i):this.type=n,t&&(this.type=void 0!==t.type?t.type:this.type,this.cy=t.cy,this.cyTarget=t.cyTarget,this.cyPosition=t.cyPosition,this.cyRenderedPosition=t.cyRenderedPosition,this.namespace=t.namespace,this.layout=t.layout,this.data=t.data,this.message=t.message),void(this.timeStamp=n&&n.timeStamp||Date.now())):new u(n,t)};u.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=r;var n=this.originalEvent;n&&n.preventDefault&&n.preventDefault()},stopPropagation:function(){this.isPropagationStopped=r;var n=this.originalEvent;n&&n.stopPropagation&&n.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r;this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i};t.exports=u},{}],46:[function(n,t){"use strict";function f(n,t,f){var a=f,v=function(r){i.error("Can not register `"+t+"` for `"+n+"` since `"+r+"` already exists in the prototype and can not be overridden")},w,b,rt,ut,c;if("core"===n){if(u.prototype[t])return v(t);u.prototype[t]=f}else if("collection"===n){if(o.prototype[t])return v(t);o.prototype[t]=f}else if("layout"===n){for(var g=function(n){this.options=n;f.call(this,n);y.plainObject(this._private)||(this._private={});this._private.cy=n.cy;this._private.listeners=[]},h=g.prototype=Object.create(f.prototype),nt=[],p=0;p<nt.length;p++)w=nt[p],h[w]=h[w]||function(){return this};h.start&&!h.run?h.run=function(){return this.start(),this}:!h.start&&h.run&&(h.start=function(){return this.run(),this});b=f.prototype.stop;h.stop=function(){var i=this.options,n,t;if(i&&i.animate&&(n=this.animations,n))for(t=0;t<n.length;t++)n[t].stop();return b?b.call(this):this.trigger("layoutstop"),this};h.destroy||(h.destroy=function(){return this});h.on=r.on({layout:!0});h.one=r.on({layout:!0,unbindSelfOnTrigger:!0});h.once=r.on({layout:!0,unbindAllBindersOnTrigger:!0});h.off=r.off({layout:!0});h.trigger=r.trigger({layout:!0});r.eventAliasesOn(h);a=g}else if("renderer"===n&&"null"!==t&&"base"!==t){var tt=e("renderer","base"),k=tt.prototype,ft=f,d=f.prototype,it=function(){tt.apply(this,arguments);ft.apply(this,arguments)},l=it.prototype;for(c in k){if(rt=k[c],ut=null!=d[c],ut)return v(c);l[c]=rt}for(c in d)l[c]=d[c];k.clientFunctions.forEach(function(n){l[n]=l[n]||function(){i.error("Renderer does not implement `renderer."+n+"()` on its prototype")}});a=it}return i.setMap({map:s,keys:[n,t],value:a})}function e(n,t){return i.getMap({map:s,keys:[n,t]})}function l(n,t,r,u,f){return i.setMap({map:h,keys:[n,t,r,u],value:f})}function a(n,t,r,u){return i.getMap({map:h,keys:[n,t,r,u]})}var i=n("./util"),r=n("./define"),o=n("./collection"),u=n("./core"),v=n("./extensions"),y=n("./is"),s={},h={},c=function(){return 2===arguments.length?e.apply(null,arguments):3===arguments.length?f.apply(null,arguments):4===arguments.length?a.apply(null,arguments):5===arguments.length?l.apply(null,arguments):void i.error("Invalid extension access syntax")};u.prototype.extension=c;v.forEach(function(n){n.extensions.forEach(function(t){f(n.type,t.name,t.impl)})});t.exports=c},{"./collection":26,"./core":37,"./define":44,"./extensions":47,"./is":83,"./util":100}],47:[function(n,t){"use strict";t.exports=[{type:"layout",extensions:n("./layout")},{type:"renderer",extensions:n("./renderer")}]},{"./layout":53,"./renderer":78}],48:[function(n,t){"use strict";function r(n){this.options=u.extend({},e,n)}var u=n("../../util"),f=n("../../math"),i=n("../../is"),e={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e,ct=this.options,r=ct,a=ct.cy,it=r.eles,o=it.nodes().not(":parent"),ii=it,s=f.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),rt,lt,d,w,b,h,u,wt,ut,g,nt,kt,ft,k,y,ht,n,l,v,c;if(i.elementOrCollection(r.roots))e=r.roots;else if(i.array(r.roots)){for(rt=[],n=0;n<r.roots.length;n++)lt=r.roots[n],u=a.getElementById(lt),rt.push(u);e=a.collection(rt)}else if(i.string(r.roots))e=a.$(r.roots);else if(r.directed)e=o.roots();else{for(d=[],w=o;w.length>0;)b=a.collection(),it.bfs({roots:w[0],visit:function(n,t,i){b=b.add(i)},directed:!1}),w=w.not(b),d.push(b);for(e=a.collection(),n=0;n<d.length;n++){var at=d[n],ri=at.maxDegree(!1),ui=at.filter(function(){return this.degree(!1)===ri});e=e.add(ui)}}var t=[],vt={},yt={},fi={},ei={},pt={};for(ii.bfs({roots:e,directed:r.directed,visit:function(n,i,r,u,f){var s=this[0],e=s.id(),o,h;(t[i]||(t[i]=[]),t[i].push(s),vt[e]=!0,yt[e]=i,fi[e]=f,ei[e]=u,f)&&(o=f.id(),h=pt[o]=pt[o]||[],h.push(r))}}),h=[],n=0;n<o.length;n++)u=o[n],vt[u.id()]||h.push(u);for(wt=3*h.length,ut=0;0!==h.length&&wt>ut;){for(var c=h.shift(),bt=c.neighborhood().nodes(),g=!1,n=0;n<bt.length;n++)if(l=yt[bt[n].id()],void 0!==l){t[l].push(c);g=!0;break}g||h.push(c);ut++}for(;0!==h.length;)c=h.shift(),g=!1,g||(0===t.length&&t.push([]),t[0].push(c));for(nt=function(){for(var r,i,u,n=0;n<t.length;n++)for(r=t[n],i=0;i<r.length;i++)u=r[i],u._private.scratch.breadthfirst={depth:n,index:i}},nt(),kt=function(n){for(var r,u=n.connectedEdges(function(){return this.data("target")===n.id()}),o=n._private.scratch.breadthfirst,f=0,t=0;t<u.length;t++){var s=u[t],e=s.source()[0],i=e._private.scratch.breadthfirst;o.depth<=i.depth&&f<i.depth&&(f=i.depth,r=e)}return r},ft=0;ft<r.maximalAdjustments;ft++){for(var oi=t.length,et=[],n=0;oi>n;n++)for(var l=t[n],si=l.length,v=0;si>v;v++){var u=l[v],p=u._private.scratch.breadthfirst,ot=kt(u);ot&&(p.intEle=ot,et.push(u))}for(n=0;n<et.length;n++){var u=et[n],p=u._private.scratch.breadthfirst,ot=p.intEle,hi=ot._private.scratch.breadthfirst;for(t[p.depth].splice(p.index,1),k=hi.depth+1;k>t.length-1;)t.push([]);t[k].push(u);p.depth=k;p.index=t[k].length-1}nt()}if(y=0,r.avoidOverlap){for(n=0;n<o.length;n++){var ci=o[n],dt=ci.boundingBox(),li=dt.w,ai=dt.h;y=Math.max(y,li,ai)}y*=r.spacingFactor}for(var st={},gt=function(n){if(st[n.id()])return st[n.id()];for(var f=n._private.scratch.breadthfirst.depth,e=n.neighborhood().nodes().not(":parent").intersection(o),i=0,r=0,u=0;u<e.length;u++){var c=e[u],s=c._private.scratch.breadthfirst,l=s.index,h=s.depth,a=t[h].length;(f>h||0===f)&&(i+=l/a,r++)}return r=Math.max(1,r),i/=r,0===r&&(i=void 0),st[n.id()]=i,i},vi=function(n,t){var i=gt(n),r=gt(t);return i-r},ni=0;3>ni;ni++){for(n=0;n<t.length;n++)t[n]=t[n].sort(vi);nt()}for(ht=0,n=0;n<t.length;n++)ht=Math.max(t[n].length,ht);for(var tt={x:s.x1+s.w/2,y:s.x1+s.h/2},yi=function(n,i){var a=n._private.scratch.breadthfirst,u=a.depth,o=a.index,h=t[u].length,v=Math.max(s.w/(h+1),y),p=Math.max(s.h/(t.length+1),y),f=Math.min(s.w/2/t.length,s.h/2/t.length),e,c,l;return(f=Math.max(f,y),r.circle)?r.circle?(e=f*u+f-(t.length>0&&t[0].length<=3?f/2:0),c=2*Math.PI/t[u].length*o,0===u&&1===t[0].length&&(e=1),{x:tt.x+e*Math.cos(c),y:tt.y+e*Math.sin(c)}):{x:tt.x+(o+1-(h+1)/2)*v,y:(u+1)*p}:(l={x:tt.x+(o+1-(h+1)/2)*v,y:(u+1)*p},i?l:l)},ti={},n=t.length-1;n>=0;n--)for(l=t[n],v=0;v<l.length;v++)c=l[v],ti[c.id()]=yi(c,n===t.length-1);return o.layoutPositions(this,r,function(){return ti[this.id()]}),this};t.exports=r},{"../../is":83,"../../math":85,"../../util":100}],49:[function(n,t){"use strict";function i(n){this.options=r.extend({},e,n)}var r=n("../../util"),u=n("../../math"),f=n("../../is"),e={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};i.prototype.run=function(){var h=this.options,n=h,c=h.cy,w=n.eles,b=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise,t=w.nodes().not(":parent"),p;n.sort&&(t=t.sort(n.sort));for(var e,i=u.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()}),l={x:i.x1+i.w/2,y:i.y1+i.h/2},k=void 0===n.sweep?2*Math.PI-2*Math.PI/t.length:n.sweep,o=k/Math.max(1,t.length-1),r=0,s=0;s<t.length;s++){var d=t[s],a=d.boundingBox(),g=a.w,nt=a.h;r=Math.max(r,g,nt)}if(e=f.number(n.radius)?n.radius:t.length<=1?0:Math.min(i.h,i.w)/2-r,t.length>1&&n.avoidOverlap){r*=1.75;var v=Math.cos(o)-Math.cos(0),y=Math.sin(o)-Math.sin(0),tt=Math.sqrt(r*r/(v*v+y*y));e=Math.max(tt,e)}return p=function(t){var i=n.startAngle+t*o*(b?1:-1),r=e*Math.cos(i),u=e*Math.sin(i);return{x:l.x+r,y:l.y+u}},t.layoutPositions(this,n,p),this};t.exports=i},{"../../is":83,"../../math":85,"../../util":100}],50:[function(n,t){"use strict";function i(n){this.options=r.extend({},f,n)}var r=n("../../util"),u=n("../../math"),f={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(n){return n.degree()},levelWidth:function(n){return n.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};i.prototype.run=function(){for(var p,o,w,a,rt,s,f,et,i,d,g=this.options,t=g,ot=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,nt=g.cy,st=t.eles,e=st.nodes().not(":parent"),h=u.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:nt.width(),h:nt.height()}),tt={x:h.x1+h.w/2,y:h.y1+h.h/2},l=[],it=t.startAngle,y=0,n=0;n<e.length;n++)o=e[n],p=t.concentric.apply(o,[o]),l.push({value:p,node:o}),o._private.scratch.concentric=p;for(e.updateStyle(),n=0;n<e.length;n++)o=e[n],w=o.boundingBox(),y=Math.max(y,w.w,w.h);l.sort(function(n,t){return t.value-n.value});for(var ht=t.levelWidth(e),r=[[]],c=r[0],n=0;n<l.length;n++)a=l[n],c.length>0&&(rt=Math.abs(c[0].value-a.value),rt>=ht&&(c=[],r.push(c))),c.push(a);if(s=y+t.minNodeSpacing,!t.avoidOverlap){var ct=r.length>0&&r[0].length>1,lt=Math.min(h.w,h.h)/2-s,at=lt/(r.length+ct?1:0);s=Math.min(s,at)}for(f=0,n=0;n<r.length;n++){var i=r[n],vt=void 0===t.sweep?2*Math.PI-2*Math.PI/i.length:t.sweep,b=i.dTheta=vt/Math.max(1,i.length-1);if(i.length>1&&t.avoidOverlap){var ut=Math.cos(b)-Math.cos(0),ft=Math.sin(b)-Math.sin(0),yt=Math.sqrt(s*s/(ut*ut+ft*ft));f=Math.max(yt,f)}i.r=f;f+=s}if(t.equidistant){for(var k=0,f=0,n=0;n<r.length;n++)i=r[n],et=i.r-f,k=Math.max(k,et);for(f=0,n=0;n<r.length;n++)i=r[n],0===n&&(f=i.r),i.r=f,f+=k}for(d={},n=0;n<r.length;n++)for(var i=r[n],b=i.dTheta,f=i.r,v=0;v<i.length;v++){var a=i[v],it=t.startAngle+(ot?1:-1)*b*v,pt={x:tt.x+f*Math.cos(it),y:tt.y+f*Math.sin(it)};d[a.node.id()]=pt}return e.layoutPositions(this,t,function(){var n=this.id();return d[n]}),this};t.exports=i},{"../../math":85,"../../util":100}],51:[function(n,t){"use strict";function i(n){this.options=f.extend({},h,n);this.options.layout=this}var r,f=n("../../util"),o=n("../../math"),s=n("../../thread"),u=n("../../is"),h={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,randomize:!1,componentSpacing:100,nodeRepulsion:function(){return 4e5},nodeOverlap:10,idealEdgeLength:function(){return 10},edgeElasticity:function(){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};i.prototype.run=function(){var n=this.options,e=n.cy,t=this,u=this.thread,i,l;u&&!u.stopped()||(u=this.thread=s({disabled:!n.useMultitasking}));t.stopped=!1;t.trigger({type:"layoutstart",layout:t});r=!0===n.debug;i=c(e,t,n);r&&a(i);n.randomize&&v(i,e);var p=Date.now(),o=!1,h=function(t){t=t||{};o&&!t.next||!t.force&&Date.now()-p<n.animationThreshold||(o=!0,f.requestAnimationFrame(function(){y(i,e,n);!0===n.fit&&e.fit(n.padding);o=!1;t.next&&t.next()}))};return u.on("message",function(n){var t=n.message;i.layoutNodes=t;h()}),u.pass({layoutInfo:i,options:{animate:n.animate,refresh:n.refresh,componentSpacing:n.componentSpacing,nodeOverlap:n.nodeOverlap,nestingFactor:n.nestingFactor,gravity:n.gravity,numIter:n.numIter,initialTemp:n.initialTemp,coolingFactor:n.coolingFactor,minTemp:n.minTemp}}).run(function(n){var t=n.layoutInfo,i=n.options,s=!1,h=function(n,t){c(n,t);v(n,t);y(n,t);p(n,t);w(n,t)},c=function(n,t){for(var o,u,s,i=0;i<n.graphSet.length;i++)for(var f=n.graphSet[i],e=f.length,r=0;e>r;r++)for(o=n.layoutNodes[n.idToIndex[f[r]]],u=r+1;e>u;u++)s=n.layoutNodes[n.idToIndex[f[u]]],l(o,s,n,t)},l=function(n,t,i,u){var k=n.cmptId,d=t.cmptId,f,e,h;if((k===d||i.isCompound)&&(f=t.positionX-n.positionX,e=t.positionY-n.positionY,0!==f||0!==e)){if(h=a(n,t,f,e),h>0)var o=u.nodeOverlap*h,s=Math.sqrt(f*f+e*e),v=o*f/s,y=o*e/s;else var p=r(n,f,e),w=r(t,-1*f,-1*e),c=w.x-p.x,l=w.y-p.y,b=c*c+l*l,s=Math.sqrt(b),o=(n.nodeRepulsion+t.nodeRepulsion)/b,v=o*c/s,y=o*l/s;n.isLocked||(n.offsetX-=v,n.offsetY-=y);t.isLocked||(t.offsetX+=v,t.offsetY+=y)}},a=function(n,t,i,r){var u,f;return u=i>0?n.maxX-t.minX:t.maxX-n.minX,f=r>0?n.maxY-t.minY:t.maxY-n.minY,u>=0&&f>=0?Math.sqrt(u*u+f*f):0},r=function(n,t,i){var o=n.positionX,s=n.positionY,e=n.height||1,h=n.width||1,u=i/t,f=e/h,r={};return 0===t&&i>0?(r.x=o,r.y=s+e/2,r):0===t&&0>i?(r.x=o,r.y=s+e/2,r):t>0&&u>=-1*f&&f>=u?(r.x=o+h/2,r.y=s+h*i/2/t,r):0>t&&u>=-1*f&&f>=u?(r.x=o-h/2,r.y=s-h*i/2/t,r):i>0&&(-1*f>=u||u>=f)?(r.x=o+e*t/2/i,r.y=s+e/2,r):0>i&&(-1*f>=u||u>=f)?(r.x=o-e*t/2/i,r.y=s-e/2,r):r},v=function(n){for(var o,s,u=0;u<n.edgeSize;u++){var f=n.layoutEdges[u],w=n.idToIndex[f.sourceId],t=n.layoutNodes[w],b=n.idToIndex[f.targetId],i=n.layoutNodes[b],h=i.positionX-t.positionX,c=i.positionY-t.positionY;if(0===h&&0===c)return;var v=r(t,h,c),y=r(i,-1*h,-1*c),l=y.x-v.x,a=y.y-v.y,e=Math.sqrt(l*l+a*a),p=Math.pow(f.idealLength-e,2)/f.elasticity;0!==e?(o=p*l/e,s=p*a/e):(o=0,s=0);t.isLocked||(t.offsetX+=o,t.offsetY+=s);i.isLocked||(i.offsetX-=o,i.offsetY-=s)}},y=function(n,t){for(var u,c,l,a,f,i,y,p,h=1,r=0;r<n.graphSet.length;r++){if(u=n.graphSet[r],c=u.length,0===r)l=n.clientHeight/2,a=n.clientWidth/2;else var w=n.layoutNodes[n.idToIndex[u[0]]],v=n.layoutNodes[n.idToIndex[w.parentId]],l=v.positionX,a=v.positionY;for(f=0;c>f;f++)if(i=n.layoutNodes[n.idToIndex[u[f]]],!i.isLocked){var e=l-i.positionX,o=a-i.positionY,s=Math.sqrt(e*e+o*o);s>h&&(y=t.gravity*e/s,p=t.gravity*o/s,i.offsetX+=y,i.offsetY+=p)}}},p=function(n){var i=[],o=0,f=-1,e;for(i.push.apply(i,n.graphSet[0]),f+=n.graphSet[0].length;f>=o;){var s=i[o++],h=n.idToIndex[s],t=n.layoutNodes[h],r=t.children;if(0<r.length&&!t.isLocked){for(var c=t.offsetX,l=t.offsetY,u=0;u<r.length;u++)e=n.layoutNodes[n.idToIndex[r[u]]],e.offsetX+=c,e.offsetY+=l,i[++f]=r[u];t.offsetX=0;t.offsetY=0}}},w=function(n){for(var r,t,i=0;i<n.nodeSize;i++)t=n.layoutNodes[i],0<t.children.length&&(t.maxX=void 0,t.minX=void 0,t.maxY=void 0,t.minY=void 0);for(i=0;i<n.nodeSize;i++)t=n.layoutNodes[i],0<t.children.length||t.isLocked||(r=b(t.offsetX,t.offsetY,n.temperature),t.positionX+=r.x,t.positionY+=r.y,t.offsetX=0,t.offsetY=0,t.minX=t.positionX-t.width,t.maxX=t.positionX+t.width,t.minY=t.positionY-t.height,t.maxY=t.positionY+t.height,o(t,n));for(i=0;i<n.nodeSize;i++)t=n.layoutNodes[i],0<t.children.length&&!t.isLocked&&(t.positionX=(t.maxX+t.minX)/2,t.positionY=(t.maxY+t.minY)/2,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY)},b=function(n,t,i){var r=Math.sqrt(n*n+t*t),u;return r>i?{x:i*n/r,y:i*t/r}:{x:n,y:t}},o=function(n,t){var u=n.parentId,i,r;if(null!=u)return i=t.layoutNodes[t.idToIndex[u]],r=!1,(null==i.maxX||n.maxX+i.padRight>i.maxX)&&(i.maxX=n.maxX+i.padRight,r=!0),(null==i.minX||n.minX-i.padLeft<i.minX)&&(i.minX=n.minX-i.padLeft,r=!0),(null==i.maxY||n.maxY+i.padBottom>i.maxY)&&(i.maxY=n.maxY+i.padBottom,r=!0),(null==i.minY||n.minY-i.padTop<i.minY)&&(i.minY=n.minY-i.padTop,r=!0),r?o(i,t):void 0},k=function(n,i){for(var h,r,e,u,a=t.layoutNodes,o=[],f=0;f<a.length;f++){var v=a[f],y=v.cmptId,w=o[y]=o[y]||[];w.push(v)}for(h=0,f=0;f<o.length;f++)if(r=o[f],r){for(r.x1=1/0,r.x2=-(1/0),r.y1=1/0,r.y2=-(1/0),e=0;e<r.length;e++)u=r[e],r.x1=Math.min(r.x1,u.positionX-u.width/2),r.x2=Math.max(r.x2,u.positionX+u.width/2),r.y1=Math.min(r.y1,u.positionY-u.height/2),r.y2=Math.max(r.y2,u.positionY+u.height/2);r.w=r.x2-r.x1;r.h=r.y2-r.y1;h+=r.w*r.h}o.sort(function(n,t){return t.w*t.h-n.w*n.h});for(var c=0,p=0,l=0,s=0,b=Math.sqrt(h)*t.clientWidth/t.clientHeight,f=0;f<o.length;f++)if(r=o[f],r){for(e=0;e<r.length;e++)u=r[e],u.isLocked||(u.positionX+=c,u.positionY+=p);c+=r.w+i.componentSpacing;l+=r.w+i.componentSpacing;s=Math.max(s,r.h);l>b&&(p+=s+i.componentSpacing,c=0,l=0,s=0)}},d=function(n){return s?!1:(h(t,i,n),t.temperature=t.temperature*i.coolingFactor,!(t.temperature<i.minTemp))},u=0,e,f;do{for(e=0;e<i.refresh&&u<i.numIter;){if(f=d(u),!f)break;e++;u++}i.animate&&broadcast(t.layoutNodes)}while(f&&u+1<i.numIter);return k(t,i),t}).then(function(n){i.layoutNodes=n.layoutNodes;u.stop();l()}),l=function(){h({force:!0,next:function(){t.one("layoutstop",n.stop);t.trigger({type:"layoutstop",layout:t})}})},this};i.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this};i.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var c=function(n,t,i){for(var y,p,s,k,d,c,ot,a,h,nt=i.eles.edges(),tt=i.eles.nodes(),f={isCompound:n.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:tt.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:nt.size(),temperature:i.initialTemp,clientWidth:n.width(),clientHeight:n.width(),boundingBox:o.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()})},it=i.eles.components(),rt={},e=0;e<it.length;e++)for(y=it[e],c=0;c<y.length;c++)p=y[c],rt[p.id()]=e;for(e=0;e<f.nodeSize;e++){var s=tt[e],ut=s.boundingBox(),r={};r.isLocked=s.locked();r.id=s.data("id");r.parentId=s.data("parent");r.cmptId=rt[s.id()];r.children=[];r.positionX=s.position("x");r.positionY=s.position("y");r.offsetX=0;r.offsetY=0;r.height=ut.w;r.width=ut.h;r.maxX=r.positionX+r.width/2;r.minX=r.positionX-r.width/2;r.maxY=r.positionY+r.height/2;r.minY=r.positionY-r.height/2;r.padLeft=parseFloat(s.style("padding"));r.padRight=parseFloat(s.style("padding"));r.padTop=parseFloat(s.style("padding"));r.padBottom=parseFloat(s.style("padding"));r.nodeRepulsion=u.fn(i.nodeRepulsion)?i.nodeRepulsion.call(s,s):i.nodeRepulsion;f.layoutNodes.push(r);f.idToIndex[r.id]=e}for(var w=[],ft=0,b=-1,et=[],e=0;e<f.nodeSize;e++)s=f.layoutNodes[e],k=s.parentId,null!=k?f.layoutNodes[f.idToIndex[k]].children.push(s.id):(w[++b]=s.id,et.push(s.id));for(f.graphSet.push(et);b>=ft;){var at=w[ft++],vt=f.idToIndex[at],p=f.layoutNodes[vt],v=p.children;if(v.length>0)for(f.graphSet.push(v),e=0;e<v.length;e++)w[++b]=v[e]}for(e=0;e<f.graphSet.length;e++)for(d=f.graphSet[e],c=0;c<d.length;c++)ot=f.idToIndex[d[c]],f.indexToGraph[ot]=e;for(e=0;e<f.edgeSize;e++){a=nt[e];h={};h.id=a.data("id");h.sourceId=a.data("source");h.targetId=a.data("target");var st=u.fn(i.idealEdgeLength)?i.idealEdgeLength.call(a,a):i.idealEdgeLength,yt=u.fn(i.edgeElasticity)?i.edgeElasticity.call(a,a):i.edgeElasticity,ht=f.idToIndex[h.sourceId],ct=f.idToIndex[h.targetId],pt=f.indexToGraph[ht],wt=f.indexToGraph[ct];if(pt!=wt){for(var bt=l(h.sourceId,h.targetId,f),lt=f.graphSet[bt],g=0,r=f.layoutNodes[ht];-1===lt.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],g++;for(r=f.layoutNodes[ct];-1===lt.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],g++;st*=g*i.nestingFactor}h.idealLength=st;h.elasticity=yt;f.layoutEdges.push(h)}return f},l=function(n,t,i){var r=e(n,t,0,i);return 2>r.count?0:r.graph},e=function(n,t,i,r){var u=r.graphSet[i],f,o,c,s;if(-1<u.indexOf(n)&&-1<u.indexOf(t))return{count:2,graph:i};for(f=0,o=0;o<u.length;o++){var l=u[o],a=r.idToIndex[l],h=r.layoutNodes[a].children;if(0!==h.length&&(c=r.indexToGraph[r.idToIndex[h[0]]],s=e(n,t,c,r),0!==s.count)){if(1!==s.count)return s;if(f++,2===f)break}}return{count:f,graph:i}},a=function(n){var i,e,u,t,f;if(r){for(console.debug("layoutNodes:"),t=0;t<n.nodeSize;t++)i=n.layoutNodes[t],u="\nindex: "+t+"\nId: "+i.id+"\nChildren: "+i.children.toString()+"\nparentId: "+i.parentId+"\npositionX: "+i.positionX+"\npositionY: "+i.positionY+"\nOffsetX: "+i.offsetX+"\nOffsetY: "+i.offsetY+"\npadLeft: "+i.padLeft+"\npadRight: "+i.padRight+"\npadTop: "+i.padTop+"\npadBottom: "+i.padBottom,console.debug(u);console.debug("idToIndex");for(t in n.idToIndex)console.debug("Id: "+t+"\nIndex: "+n.idToIndex[t]);for(console.debug("Graph Set"),e=n.graphSet,t=0;t<e.length;t++)console.debug("Set : "+t+": "+e[t].toString());for(u="IndexToGraph",t=0;t<n.indexToGraph.length;t++)u+="\nIndex : "+t+" Graph: "+n.indexToGraph[t];for(console.debug(u),u="Layout Edges",t=0;t<n.layoutEdges.length;t++)f=n.layoutEdges[t],u+="\nEdge Index: "+t+" ID: "+f.id+" SouceID: "+f.sourceId+" TargetId: "+f.targetId+" Ideal Length: "+f.idealLength;console.debug(u);u="nodeSize: "+n.nodeSize;u+="\nedgeSize: "+n.edgeSize;u+="\ntemperature: "+n.temperature;console.debug(u)}},v=function(n){for(var t,r=n.clientWidth,u=n.clientHeight,i=0;i<n.nodeSize;i++)t=n.layoutNodes[i],0!==t.children.length||t.isLocked||(t.positionX=Math.random()*r,t.positionY=Math.random()*u)},y=function(n,t,i){var f=i.layout,e=i.eles.nodes(),u=n.boundingBox,r={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};i.boundingBox&&(e.forEach(function(t){var i=n.layoutNodes[n.idToIndex[t.data("id")]];r.x1=Math.min(r.x1,i.positionX);r.x2=Math.max(r.x2,i.positionX);r.y1=Math.min(r.y1,i.positionY);r.y2=Math.max(r.y2,i.positionY)}),r.w=r.x2-r.x1,r.h=r.y2-r.y1);e.positions(function(t,f){var e=n.layoutNodes[n.idToIndex[f.data("id")]],o,s;return i.boundingBox?(o=(e.positionX-r.x1)/r.w,s=(e.positionY-r.y1)/r.h,{x:u.x1+o*u.w,y:u.y1+s*u.h}):{x:e.positionX,y:e.positionY}});!0!==n.ready&&(n.ready=!0,f.one("layoutready",i.ready),f.trigger({type:"layoutready",layout:this}))};t.exports=i},{"../../is":83,"../../math":85,"../../thread":98,"../../util":100}],52:[function(n,t){"use strict";function i(n){this.options=r.extend({},f,n)}var r=n("../../util"),u=n("../../math"),f={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};i.prototype.run=function(){var tt=this.options,t=tt,it=tt.cy,lt=t.eles,e=lt.nodes().not(":parent"),i,c,l,s,h,a,v,p,n,ct;if(t.sort&&(e=e.sort(t.sort)),i=u.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:it.width(),h:it.height()}),0===i.h||0===i.w)e.layoutPositions(this,t,function(){return{x:i.x1,y:i.y1}});else{var o=e.size(),rt=Math.sqrt(o*i.h/i.w),r=Math.round(rt),f=Math.round(i.w/i.h*rt),k=function(n){if(null==n)return Math.min(r,f);var t=Math.min(r,f);t==r?r=n:f=n},d=function(n){if(null==n)return Math.max(r,f);var t=Math.max(r,f);t==r?r=n:f=n},w=t.rows,b=null!=t.cols?t.cols:t.columns;if(null!=w&&null!=b)r=w,f=b;else if(null!=w&&null==b)r=w,f=Math.ceil(o/r);else if(null==w&&null!=b)f=b,r=Math.ceil(o/f);else if(f*r>o)c=k(),l=d(),(c-1)*l>=o?k(c-1):(l-1)*c>=o&&d(l-1);else for(;o>f*r;)c=k(),l=d(),(l+1)*c>=o?d(l+1):k(c+1);if(s=i.w/f,h=i.h/r,t.condense&&(s=0,h=0),t.avoidOverlap)for(a=0;a<e.length;a++){v=e[a];n=v._private.position;null!=n.x&&null!=n.y||(n.x=0,n.y=0);var ut=v.boundingBox(),ft=t.avoidOverlapPadding,at=ut.w+ft,vt=ut.h+ft;s=Math.max(s,at);h=Math.max(h,vt)}for(var et={},nt=function(n,t){return!!et["c-"+n+"-"+t]},ot=function(n,t){et["c-"+n+"-"+t]=!0},g=0,y=0,st=function(){y++;y>=f&&(y=0,g++)},ht={},a=0;a<e.length;a++)if(v=e[a],p=t.position(v),p&&(void 0!==p.row||void 0!==p.col)){if(n={row:p.row,col:p.col},void 0===n.col)for(n.col=0;nt(n.row,n.col);)n.col++;else if(void 0===n.row)for(n.row=0;nt(n.row,n.col);)n.row++;ht[v.id()]=n;ot(n.row,n.col)}ct=function(n,t){var u,f,r;if(t.locked()||t.isParent())return!1;if(r=ht[t.id()],r)u=r.col*s+s/2+i.x1,f=r.row*h+h/2+i.y1;else{for(;nt(g,y);)st();u=y*s+s/2+i.x1;f=g*h+h/2+i.y1;ot(g,y);st()}return{x:u,y:f}};e.layoutPositions(this,t,ct)}return this};t.exports=i},{"../../math":85,"../../util":100}],53:[function(n,t){"use strict";t.exports=[{name:"breadthfirst",impl:n("./breadthfirst")},{name:"circle",impl:n("./circle")},{name:"concentric",impl:n("./concentric")},{name:"cose",impl:n("./cose")},{name:"grid",impl:n("./grid")},{name:"null",impl:n("./null")},{name:"preset",impl:n("./preset")},{name:"random",impl:n("./random")}]},{"./breadthfirst":48,"./circle":49,"./concentric":50,"./cose":51,"./grid":52,"./null":54,"./preset":55,"./random":56}],54:[function(n,t){"use strict";function i(n){this.options=r.extend({},u,n)}var r=n("../../util"),u={ready:function(){},stop:function(){}};i.prototype.run=function(){var t=this.options,i=t.eles,n=this;return t.cy,n.trigger("layoutstart"),i.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.trigger("layoutready"),n.one("layoutstop",t.stop),n.trigger("layoutstop"),this};i.prototype.stop=function(){return this};t.exports=i},{"../../util":100}],55:[function(n,t){"use strict";function i(n){this.options=r.extend({},f,n)}var r=n("../../util"),u=n("../../is"),f={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};i.prototype.run=function(){function t(t){if(null==n.positions)return null;if(f)return n.positions.apply(t,[t]);var i=n.positions[t._private.data.id];return null==i?null:i}var n=this.options,i=n.eles,r=i.nodes(),f=u.fn(n.positions);return r.layoutPositions(this,n,function(n,i){var r=t(i);return i.locked()||null==r?!1:r}),this};t.exports=i},{"../../is":83,"../../util":100}],56:[function(n,t){"use strict";function i(n){this.options=r.extend({},f,n)}var r=n("../../util"),u=n("../../math"),f={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};i.prototype.run=function(){var n=this.options,i=n.cy,r=n.eles,f=r.nodes().not(":parent"),t=u.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),e=function(){return{x:t.x1+Math.round(Math.random()*t.w),y:t.y1+Math.round(Math.random()*t.h)}};return f.layoutPositions(this,n,e),this};t.exports=i},{"../../math":85,"../../util":100}],57:[function(n,t){"use strict";var r=n("../../../math"),f=n("../../../is"),i=n("../../../util"),u={};u.arrowShapeWidth=.3;u.registerArrowShapes=function(){var e=this.arrowShapes={},u=this,s=function(n,t,i,r,u,f){var e=u.x-i/2-f,o=u.x+i/2+f,s=u.y-i/2-f,h=u.y+i/2+f;return n>=e&&o>=n&&t>=s&&h>=t},h=function(n,t,i,r,u){var f=n*Math.cos(r)-t*Math.sin(r),e=n*Math.sin(r)+t*Math.cos(r),o=f*i,s=e*i,h=o+u.x,c=s+u.y;return{x:h,y:c}},t=function(n,t,i,r){for(var e,o,f=[],u=0;u<n.length;u+=2)e=n[u],o=n[u+1],f.push(h(e,o,t,i,r));return f},o=function(n){for(var r,i=[],t=0;t<n.length;t++)r=n[t],i.push(r.x,r.y);return i},n=function(n,h){f.string(h)&&(h=e[h]);e[n]=i.extend({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(n,i,u,f,e,s){var h=o(t(this.points,u+2*s,f,e));return r.pointInsidePolygonPoints(n,i,h)},roughCollide:s,draw:function(n,i,r,f){var e=t(this.points,i,r,f);u.arrowShapeImpl("polygon")(n,e)},spacing:function(){return 0},gap:function(n){return 2*n.pstyle("width").pfValue}},h)};n("none",{collide:i.falsify,roughCollide:i.falsify,draw:i.noop,spacing:i.zeroify,gap:i.zeroify});n("triangle",{points:[-.15,-.3,0,0,.15,-.3]});n("arrow","triangle");n("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:s,draw:function(n,i,r,f){var o=t(this.points,i,r,f),e=this.controlPoint,s=h(e[0],e[1],i,r,f);u.arrowShapeImpl(this.name)(n,o,s)},gap:function(n){return n.pstyle("width").pfValue}});n("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(n,i,u,f,e,s){var h=o(t(this.points,u+2*s,f,e)),c=o(t(this.pointsTee,u+2*s,f,e));return r.pointInsidePolygonPoints(n,i,h)||r.pointInsidePolygonPoints(n,i,c)},draw:function(n,i,r,f){var e=t(this.points,i,r,f),o=t(this.pointsTee,i,r,f);u.arrowShapeImpl(this.name)(n,e,o)}});n("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(n){return n.pstyle("width").pfValue}});n("circle",{radius:.15,collide:function(n,t,i,r,u,f){var e=u;return Math.pow(e.x-n,2)+Math.pow(e.y-t,2)<=Math.pow((i+2*f)*this.radius,2)},draw:function(n,t,i,r){u.arrowShapeImpl(this.name)(n,r.x,r.y,this.radius*t)},spacing:function(n){return u.getArrowWidth(n.pstyle("width").pfValue)*this.radius}});n("inhibitor",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(){return 1},gap:function(){return 1}});n("tee","inhibitor");n("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]});n("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(n){return n.pstyle("width").pfValue}})};t.exports=u},{"../../../is":83,"../../../math":85,"../../../util":100}],58:[function(n,t){"use strict";function o(n,t,r){for(var f,e=function(n,t,r,u){return i.qbezierAt(n,t,r,u)},o=t._private,s=o.rstyle.bezierPts,u=0;u<n.bezierProjPcts.length;u++)f=n.bezierProjPcts[u],s.push({x:e(r[0],r[2],r[4],f),y:e(r[1],r[3],r[5],f)})}var i=n("../../../math"),u=n("../../../is"),f=n("../../../util"),s=n("../../../collection/zsort"),h=n("../../../window"),r={},e;r.registerCalculationListeners=function(){var r=this.cy,t=r.collection(),i=this,n=function(n,i){var r,u;for(t.merge(n),r=0;r<n.length;r++){var o=n[r],e=o._private,f=e.rstyle;f.clean=!1;e.bbCache=null;u=f.dirtyEvents=f.dirtyEvents||{length:0};u[i.type]||(u[i.type]=!0,u.length++)}},u;i.binder(r).on("position.* style.* free.*","node",function(t){var i=t.cyTarget,u;(n(i,t),n(i.connectedEdges(),t),r.hasCompoundNodes())&&(u=i.parents(),n(u,t),n(u.connectedEdges(),t))}).on("add.* background.*","node",function(t){var i=t.cyTarget;n(i,t)}).on("add.* style.*","edge",function(t){var i=t.cyTarget;n(i,t);n(i.parallelEdges(),t)}).on("remove.*","edge",function(t){for(var r,f=t.cyTarget,u=f.parallelEdges(),i=0;i<u.length;i++)r=u[i],r.removed()||n(r,t)});u=function(n){var f,e,u;if(n){if(f=i.onUpdateEleCalcsFns,f)for(u=0;u<f.length;u++)e=f[u],e(n,t);for(i.recalculateRenderedStyle(t,!1),u=0;u<t.length;u++)t[u]._private.rstyle.dirtyEvents=null;t=r.collection()}};i.beforeRender(u,i.beforeRenderPriorities.eleCalcs)};r.onUpdateEleCalcs=function(n){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(n)};r.recalculateRenderedStyle=function(n,t){var o=[],s=[],r;if(!this.destroyed){for(void 0===t&&(t=!0),r=0;r<n.length;r++){var u=n[r],e=u._private,i=e.rstyle;t&&i.clean||u.removed()||("nodes"===e.group?s.push(u):o.push(u),i.clean=!0)}for(r=0;r<s.length;r++){var u=s[r],e=u._private,i=e.rstyle,h=e.position;this.recalculateNodeLabelProjection(u);i.nodeX=h.x;i.nodeY=h.y;i.nodeW=u.pstyle("width").pfValue;i.nodeH=u.pstyle("height").pfValue}for(this.recalculateEdgeProjections(o),r=0;r<o.length;r++){var u=o[r],e=u._private,i=e.rstyle,f=e.rscratch;this.recalculateEdgeLabelProjections(u);i.srcX=f.arrowStartX;i.srcY=f.arrowStartY;i.tgtX=f.arrowEndX;i.tgtY=f.arrowEndY;i.midX=f.midX;i.midY=f.midY;i.labelAngle=f.labelAngle;i.sourceLabelAngle=f.sourceLabelAngle;i.targetLabelAngle=f.targetLabelAngle}}};r.projectIntoViewport=function(n,t){var i=this.cy,r=this.findContainerClientCoords(),e=r[0],o=r[1],u=i.pan(),f=i.zoom(),s=(n-e-u.x)/f,h=(t-o-u.y)/f;return[s,h]};r.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,t=r.getBoundingClientRect(),u=h.getComputedStyle(r),n=function(n){return parseFloat(u.getPropertyValue(n))},i={left:n("padding-left")+n("border-left-width"),right:n("padding-right")+n("border-right-width"),top:n("padding-top")+n("border-top-width"),bottom:n("padding-bottom")+n("border-bottom-width")};return this.containerBB=[t.left+i.left,t.top+i.top,t.right-t.left-i.left-i.right,t.bottom-t.top-i.top-i.bottom]};r.invalidateContainerClientCoordsCache=function(){this.containerBB=null};r.findNearestElement=function(n,t,i,r){return this.findNearestElements(n,t,i,r)[0]};r.findNearestElements=function(n,t,r,u){function s(n,t){if(n.isNode()){if(k)return;k=n;o.push(n)}if(n.isEdge()&&(null==t||l>t))if(v){if(v.pstyle("z-index").value===n.pstyle("z-index").value)for(var i=0;i<o.length;i++)if(o[i].isEdge()){o[i]=n;v=n;l=null!=t?t:l;break}}else o.push(n),v=n,l=null!=t?t:l}function y(i){var v=i._private,l,a;if("no"!==i.pstyle("events").strValue){var f=i.outerWidth()+2*nt,e=i.outerHeight()+2*nt,o=f/2,h=e/2,u=v.position;if(u.x-o<=n&&n<=u.x+o&&u.y-h<=t&&t<=u.y+h){if(l=!r||i.visible()&&!i.transparent(),r&&!l)return;if(a=c.nodeShapes[d.getNodeShape(i)],a.checkPoint(n,t,0,f,e,u.x,u.y))return s(i,0),!0}}}function tt(u){var a=u._private,e,f,l,g;if("no"!==u.pstyle("events").strValue){var p,v,h=a.rscratch,nt=u.pstyle("width").pfValue,b=nt/2+w,tt=b*b,rt=2*b,ut=a.source,ft=a.target,et=!1,k=function(){if(void 0!==v)return v;if(!r)return v=!0,!0;var n=u.visible()&&!u.transparent();return n?(v=!0,!0):(v=!1,!1)};if("segments"===h.edgeType||"straight"===h.edgeType||"haystack"===h.edgeType){for(e=h.allpts,f=0;f+3<e.length;f+=2)if((et=i.inLineVicinity(n,t,e[f],e[f+1],e[f+2],e[f+3],rt))&&k()&&tt>(p=i.sqdistToFiniteLine(n,t,e[f],e[f+1],e[f+2],e[f+3])))return s(u,p),!0}else if("bezier"===h.edgeType||"multibezier"===h.edgeType||"self"===h.edgeType||"compound"===h.edgeType)for(e=h.allpts,f=0;f+5<h.allpts.length;f+=4)if((et=i.inBezierVicinity(n,t,e[f],e[f+1],e[f+2],e[f+3],e[f+4],e[f+5],rt))&&k()&&tt>(p=i.sqdistToQuadraticBezier(n,t,e[f],e[f+1],e[f+2],e[f+3],e[f+4],e[f+5])))return s(u,p),!0;if(k())for(var ut=ut||a.source,ft=ft||a.target,ot=d.getArrowWidth(nt),st=[{name:"source",x:h.arrowStartX,y:h.arrowStartY,angle:h.srcArrowAngle},{name:"target",x:h.arrowEndX,y:h.arrowEndY,angle:h.tgtArrowAngle},{name:"mid-source",x:h.midX,y:h.midY,angle:h.midsrcArrowAngle},{name:"mid-target",x:h.midX,y:h.midY,angle:h.midtgtArrowAngle}],f=0;f<st.length;f++)if(l=st[f],g=c.arrowShapes[u.pstyle(l.name+"-arrow-shape").value],g.roughCollide(n,t,ot,l.angle,{x:l.x,y:l.y},w)&&g.collide(n,t,ot,l.angle,{x:l.x,y:l.y},w))return s(u),!0;it&&o.length>0&&(y(ut),y(ft))}}function h(n,t,i){return f.getPrefixedProperty(n,t,i)}function a(r,u){var k,d=r._private,g=rt,nt,tt,ct;if(k=u?u+"-":"",nt=r.pstyle(k+"label").value,tt="yes"===r.pstyle("text-events").strValue,tt&&nt){var f=d.rstyle,it=r.pstyle("text-border-width").pfValue,l=h(f,"labelWidth",u)+it/2+2*g,a=h(f,"labelHeight",u)+it/2+2*g,e=h(f,"labelX",u),o=h(f,"labelY",u),v=h(d.rscratch,"labelAngle",u),y=e-l/2,p=e+l/2,w=o-a/2,b=o+a/2;if(v){var ut=Math.cos(v),ft=Math.sin(v),c=function(n,t){return n-=e,t-=o,{x:n*ut-t*ft+e,y:n*ft+t*ut+o}},et=c(y,w),ot=c(y,b),st=c(p,w),ht=c(p,b),lt=[et.x,et.y,st.x,st.y,ht.x,ht.y,ot.x,ot.y];if(i.pointInsidePolygonPoints(n,t,lt))return s(r),!0}else if(ct={w:l,h:a,x1:y,x2:p,y1:w,y2:b},i.inBoundingBox(ct,n,t))return s(r),!0}}for(var e,v,k,d=this,c=this,g=c.getCachedZSortedEles(),o=[],p=c.cy.zoom(),it=c.cy.hasCompoundNodes(),w=(u?24:8)/p,nt=(u?8:2)/p,rt=(u?8:2)/p,l=1/0,b=g.length-1;b>=0;b--)e=g[b],e.isNode()?y(e)||a(e):tt(e)||a(e)||a(e,"source")||a(e,"target");return o};r.getAllInBox=function(n,t,r,u){var v=this.getCachedZSortedEles(),l=v.nodes,y=v.edges,s=[],d=Math.min(n,r),g=Math.max(n,r),nt=Math.min(t,u),tt=Math.max(t,u),o,e,p,w,h;for(n=d,r=g,t=nt,u=tt,o=i.makeBoundingBox({x1:n,y1:t,x2:r,y2:u}),e=0;e<l.length;e++)p=l[e],w=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1}),i.boundingBoxesIntersect(o,w)&&s.push(l[e]);for(h=0;h<y.length;h++){var a=y[h],c=a._private,f=c.rscratch;if((null==f.startX||null==f.startY||i.inBoundingBox(o,f.startX,f.startY))&&(null==f.endX||null==f.endY||i.inBoundingBox(o,f.endX,f.endY)))if("bezier"===f.edgeType||"multibezier"===f.edgeType||"self"===f.edgeType||"compound"===f.edgeType||"segments"===f.edgeType||"haystack"===f.edgeType){for(var b=c.rstyle.bezierPts||c.rstyle.linePts||c.rstyle.haystackPts,k=!0,e=0;e<b.length;e++)if(!i.pointInBoundingBox(o,b[e])){k=!1;break}k&&s.push(a)}else"haystack"!==f.edgeType&&"straight"!==f.edgeType||s.push(a)}return s};r.getNodeShape=function(n){var r=this,t=n.pstyle("shape").value,i;return n.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":"polygon"===t?(i=n.pstyle("shape-polygon-points").value,r.nodeShapes.makePolygon(i).name):t};r.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)};r.updateCachedGrabbedEles=function(){var i=this.cachedZSortedEles,r,u,t,n;for(i.drag=[],i.nondrag=[],r=[],t=0;t<i.length;t++)n=i[t],u=n._private.rscratch,n.grabbed()&&!n.isParent()?r.push(n):u.inDragLayer?i.drag.push(n):i.nondrag.push(n);for(t=0;t<r.length;t++)n=r[t],i.drag.push(n)};r.getCachedZSortedEles=function(n){var u,t,r,i;if(n||!this.cachedZSortedEles){for(u=this.cy.mutableElements(),t=[],t.nodes=[],t.edges=[],r=0;r<u.length;r++)i=u[r],(i.animated()||i.visible()&&!i.transparent())&&(t.push(i),i.isNode()?t.nodes.push(i):t.edges.push(i));t.sort(s);this.cachedZSortedEles=t;this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};r.projectLines=function(n){var i=n._private,r=i.rscratch,u=r.edgeType,e,t,f;if(i.rstyle.bezierPts=null,i.rstyle.linePts=null,i.rstyle.haystackPts=null,"multibezier"===u||"bezier"===u||"self"===u||"compound"===u)for(t=(i.rstyle.bezierPts=[],0);t+5<r.allpts.length;t+=4)o(this,n,r.allpts.slice(t,t+6));else if("segments"===u)for(e=i.rstyle.linePts=[],t=0;t+1<r.allpts.length;t+=2)e.push({x:r.allpts[t],y:r.allpts[t+1]});else"haystack"===u&&(f=r.haystackPts,i.rstyle.haystackPts=[{x:f[0],y:f[1]},{x:f[2],y:f[3]}]);i.rstyle.arrowWidth=this.getArrowWidth(n.pstyle("width").pfValue)*this.arrowShapeWidth};r.projectBezier=r.projectLines;r.recalculateNodeLabelProjection=function(n){var l=n.pstyle("label").strValue;if(!u.emptyString(l)){var i,r,e=n._private,o=n.width(),s=n.height(),f=n.pstyle("padding").pfValue,t=e.position,a=n.pstyle("text-halign").strValue,v=n.pstyle("text-valign").strValue,h=e.rscratch,c=e.rstyle;switch(a){case"left":i=t.x-o/2-f;break;case"right":i=t.x+o/2+f;break;default:i=t.x}switch(v){case"top":r=t.y-s/2-f;break;case"bottom":r=t.y+s/2+f;break;default:r=t.y}h.labelX=i;h.labelY=r;c.labelX=i;c.labelY=r;this.applyLabelDimensions(n)}};r.recalculateEdgeLabelProjections=function(n){var r,s=n._private,t=s.rscratch,e=this,h={mid:n.pstyle("label").strValue,source:n.pstyle("source-label").strValue,target:n.pstyle("target-label").strValue},u,o,c;(h.mid||h.source||h.target)&&(r={x:t.midX,y:t.midY},u=function(n,t,i){f.setPrefixedProperty(s.rscratch,n,t,i);f.setPrefixedProperty(s.rstyle,n,t,i)},u("labelX",null,r.x),u("labelY",null,r.y),o=function(){function a(n,t,r,u,f){var o=i.dist(t,r),e=n.segments[n.segments.length-1],s={p0:t,p1:r,t0:u,t1:f,startDist:e?e.startDist+e.length:0,length:o};n.segments.push(s);n.length+=o}var h,n,u,l,f;if(o.cache)return o.cache;for(h=[],n=0;n+5<t.allpts.length;n+=4){var v={x:t.allpts[n],y:t.allpts[n+1]},y={x:t.allpts[n+2],y:t.allpts[n+3]},p={x:t.allpts[n+4],y:t.allpts[n+5]};h.push({p0:v,p1:y,p2:p,startDist:0,length:0,segments:[]})}for(var c=s.rstyle.bezierPts,r=e.bezierProjPcts.length,n=0;n<h.length;n++){for(u=h[n],l=h[n-1],l&&(u.startDist=l.startDist+l.length),a(u,u.p0,c[n*r],0,e.bezierProjPcts[0]),f=0;r-1>f;f++)a(u,c[n*r+f],c[n*r+f+1],e.bezierProjPcts[f],e.bezierProjPcts[f+1]);a(u,c[n*r+r-1],u.p2,e.bezierProjPcts[r-1],1)}return o.cache=h},c=function(f){var g,w="source"===f,s,a,c,ft,ht,l;if(h[f]){var b=n.pstyle(f+"-text-offset").pfValue,rt=function(n,t){var i=t.x-n.x,r=t.y-n.y;return Math.atan(r/i)},ct=function(n,t,r,u){var f=i.bound(0,u-.001,1),e=i.bound(0,u+.001,1),o=i.qbezierPtAt(n,t,r,f),s=i.qbezierPtAt(n,t,r,e);return rt(o,s)};switch(t.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var k,d=o(),ut=0,nt=0,e=0;e<d.length;e++){for(s=d[w?e:d.length-1-e],a=0;a<s.segments.length;a++)if(c=s.segments[w?a:s.segments.length-1-a],ft=e===d.length-1&&a===s.segments.length-1,ut=nt,nt+=c.length,nt>=b||ft){k={cp:s,segment:c};break}if(k)break}var s=k.cp,c=k.segment,et=(b-ut)/c.length,ot=c.t1-c.t0,l=w?c.t0+ot*et:c.t1-ot*et;l=i.bound(0,l,1);r=i.qbezierPtAt(s.p0,s.p1,s.p2,l);g=ct(s.p0,s.p1,s.p2,l,r);break;case"straight":case"segments":case"haystack":for(var tt,st,v,y,it=0,p=t.allpts.length,e=0;p>e+3&&(w?(v={x:t.allpts[e],y:t.allpts[e+1]},y={x:t.allpts[e+2],y:t.allpts[e+3]}):(v={x:t.allpts[p-2-e],y:t.allpts[p-1-e]},y={x:t.allpts[p-4-e],y:t.allpts[p-3-e]}),tt=i.dist(v,y),st=it,it+=tt,!(it>=b));e+=2);ht=b-st;l=ht/tt;l=i.bound(0,l,1);r=i.lineAt(v,y,l);g=rt(v,y)}u("labelX",f,r.x);u("labelY",f,r.y);u("labelAutoAngle",f,g)}},c("source"),c("target"),this.applyLabelDimensions(n))};r.applyLabelDimensions=function(n){this.applyPrefixedLabelDimensions(n);n.isEdge()&&(this.applyPrefixedLabelDimensions(n,"source"),this.applyPrefixedLabelDimensions(n,"target"))};r.applyPrefixedLabelDimensions=function(n,t){var i=n._private,u=this.getLabelText(n,t),r=this.calculateLabelDimensions(n,u);f.setPrefixedProperty(i.rstyle,"labelWidth",t,r.width);f.setPrefixedProperty(i.rscratch,"labelWidth",t,r.width);f.setPrefixedProperty(i.rstyle,"labelHeight",t,r.height);f.setPrefixedProperty(i.rscratch,"labelHeight",t,r.height)};r.getLabelText=function(n,t){var v=n._private,k=t?t+"-":"",i=n.pstyle(k+"label").strValue,c=n.pstyle("text-transform").value,u=function(n,i){return i?(f.setPrefixedProperty(v.rscratch,n,t,i),i):f.getPrefixedProperty(v.rscratch,n,t)},o;if("none"==c||("uppercase"==c?i=i.toUpperCase():"lowercase"==c&&(i=i.toLowerCase())),"wrap"===n.pstyle("text-wrap").value){if(o=u("labelKey"),o&&u("labelWrapKey")===o)return u("labelWrapCachedText");for(var y=i.split("\n"),p=n.pstyle("text-max-width").pfValue,e=[],l=0;l<y.length;l++){var s=y[l],d=this.calculateLabelDimensions(n,s,"line="+s),g=d.width;if(g>p){for(var w=s.split(/\s+/),r="",a=0;a<w.length;a++){var h=w[a],b=0===r.length?h:r+" "+h,nt=this.calculateLabelDimensions(n,b,"testLine="+b),tt=nt.width;p>=tt?r+=h+" ":(e.push(r),r=h+" ")}r.match(/^\s+$/)||e.push(r)}else e.push(s)}u("labelWrapCachedLines",e);i=u("labelWrapCachedText",e.join("\n"));u("labelWrapKey",o)}return i};r.calculateLabelDimensions=function(n,t,i){var s=this,f=n._private.labelStyleKey+"$@$"+t,e,r;if(i&&(f+="$@$"+i),e=s.labelDimCache||(s.labelDimCache={}),e[f])return e[f];var o=1,h=n.pstyle("font-style").strValue,c=o*n.pstyle("font-size").pfValue+"px",l=n.pstyle("font-family").strValue,a=n.pstyle("font-weight").strValue,u=this.labelCalcDiv;return u||(u=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(u)),r=u.style,r.fontFamily=l,r.fontStyle=h,r.fontSize=c,r.fontWeight=a,r.position="absolute",r.left="-9999px",r.top="-9999px",r.zIndex="-1",r.visibility="hidden",r.pointerEvents="none",r.padding="0",r.lineHeight="1",r.whiteSpace="wrap"===n.pstyle("text-wrap").value?"pre":"normal",u.textContent=t,e[f]={width:Math.ceil(u.clientWidth/o),height:Math.ceil(u.clientHeight/o)},e[f]};r.recalculateEdgeProjections=function(n){this.findEdgeControlPoints(n)};r.findEdgeControlPoints=function(n){var dt,gt,e,o,sr,hr,f,s,y,k,ut,et,ni,ti,ot,pi,ii,l,cr,r,wr,t,nt,tt,wt,tr,ir,rr,du,c,w,or,hi,lt,h,vt;if(n&&0!==n.length){for(var b,li=this,ff=li.cy,ef=ff.hasCompoundNodes(),ft={},ai=[],vi=[],h=0;h<n.length;h++){var r=n[h],kt=r._private,yi=kt.data,rt=r.pstyle("curve-style").value,d="unbundled-bezier"===rt||"segments"===rt;"none"!==r.pstyle("display").value&&("haystack"!==rt?(dt=yi.source,gt=yi.target,b=dt>gt?gt+"$-$"+dt:dt+"$-$"+gt,d&&(b="unbundled$-$"+yi.id),null==ft[b]&&(ft[b]=[],ai.push(b)),ft[b].push(r),d&&(ft[b].hasUnbundled=!0)):vi.push(r))}for(ii=0;ii<ai.length;ii++){if(b=ai[ii],l=ft[b],(l.sort(function(n,t){return n.poolIndex()-t.poolIndex()}),e=l[0]._private.source,o=l[0]._private.target,!l.hasUnbundled&&e.id()>o.id())&&(cr=e,e=o,o=cr),sr=e._private,hr=o._private,f=sr.position,s=hr.position,y=e.outerWidth(),k=e.outerHeight(),ut=o.outerWidth(),et=o.outerHeight(),ni=li.nodeShapes[this.getNodeShape(e)],ti=li.nodeShapes[this.getNodeShape(o)],pi=!1,l.length>1&&e!==o||l.hasUnbundled){var st=ni.intersectLine(f.x,f.y,y,k,s.x,s.y,0),ht=ti.intersectLine(s.x,s.y,ut,et,f.x,f.y,0),lr={x1:st[0],x2:ht[0],y1:st[1],y2:ht[1]},ar={x1:f.x,x2:s.x,y1:f.y,y2:s.y},wi=ht[1]-st[1],bi=ht[0]-st[0],vr=Math.sqrt(bi*bi+wi*wi),yr={x:bi,y:wi},pr={x:yr.x/vr,y:yr.y/vr};ot={x:-pr.y,y:pr.x};ti.checkPoint(st[0],st[1],0,ut,et,s.x,s.y)&&ni.checkPoint(ht[0],ht[1],0,y,k,f.x,f.y)&&(ot={},pi=!0)}for(h=0;h<l.length;h++){r=l[h];wr=r._private;t=wr.rscratch;var of=t.lastEdgeIndex,br=h,sf=t.lastNumEdges,kr=l.length,rt=r.pstyle("curve-style").value,g=r.pstyle("control-point-distances"),yt=r.pstyle("control-point-weights"),hf=g&&yt?Math.min(g.value.length,yt.value.length):1,pt=r.pstyle("control-point-step-size").pfValue,ct=g?g.pfValue[0]:void 0,ki=yt.value[0],d="unbundled-bezier"===rt||"segments"===rt,di=r.pstyle("edge-distances").value,gi=r.pstyle("segment-weights"),nr=r.pstyle("segment-distances"),cf=Math.min(gi.pfValue.length,nr.pfValue.length),lf=t.lastSrcCtlPtX,dr=f.x,af=t.lastSrcCtlPtY,gr=f.y,vf=t.lastSrcCtlPtW,nu=e.outerWidth(),yf=t.lastSrcCtlPtH,tu=e.outerHeight(),pf=t.lastTgtCtlPtX,iu=s.x,wf=t.lastTgtCtlPtY,ru=s.y,bf=t.lastTgtCtlPtW,uu=o.outerWidth(),kf=t.lastTgtCtlPtH,fu=o.outerHeight(),df=t.lastCurveStyle,eu=rt,gf=t.lastCtrlptDists,ou=g?g.strValue:null,ne=t.lastCtrlptWs,su=yt.strValue,te=t.lastSegmentWs,hu=gi.strValue,ie=t.lastSegmentDs,cu=nr.strValue,re=t.lastStepSize,lu=pt,ue=t.lastEdgeDistances,au=di;if(t.badBezier=pi?!0:!1,lf!==dr||af!==gr||vf!==nu||yf!==tu||pf!==iu||wf!==ru||bf!==uu||kf!==fu||df!==eu||gf!==ou||ne!==su||te!==hu||ie!==cu||re!==lu||ue!==au||!(of===br&&sf===kr||d)){if(t.lastSrcCtlPtX=dr,t.lastSrcCtlPtY=gr,t.lastSrcCtlPtW=nu,t.lastSrcCtlPtH=tu,t.lastTgtCtlPtX=iu,t.lastTgtCtlPtY=ru,t.lastTgtCtlPtW=uu,t.lastTgtCtlPtH=fu,t.lastEdgeIndex=br,t.lastNumEdges=kr,t.lastCurveStyle=eu,t.lastCtrlptDists=ou,t.lastCtrlptWs=su,t.lastSegmentDs=cu,t.lastSegmentWs=hu,t.lastStepSize=lu,t.lastEdgeDistances=au,e===o)t.edgeType="self",nt=h,tt=pt,d&&(nt=0,tt=ct),t.ctrlpts=[f.x,f.y-(1+Math.pow(k,1.12)/100)*tt*(nt/3+1),f.x-(1+Math.pow(y,1.12)/100)*tt*(nt/3+1),f.y];else if(ef&&(e.isParent()||e.isChild()||o.isParent()||o.isChild())&&(e.parents().anySame(o)||o.parents().anySame(e))){t.edgeType="compound";t.badBezier=!1;nt=h;tt=pt;d&&(nt=0,tt=ct);var vu=50,yu={x:f.x-y/2,y:f.y-k/2},pu={x:s.x-ut/2,y:s.y-et/2},ri={x:Math.min(yu.x,pu.x),y:Math.min(yu.y,pu.y)},wu=.5,fe=Math.max(wu,Math.log(.01*y)),ee=Math.max(wu,Math.log(.01*ut));t.ctrlpts=[ri.x,ri.y-(1+Math.pow(vu,1.12)/100)*tt*(nt/3+1)*fe,ri.x-(1+Math.pow(vu,1.12)/100)*tt*(nt/3+1)*ee,ri.y]}else if("segments"===rt)for(t.edgeType="segments",t.segpts=[],wt=0;cf>wt;wt++){var bu=gi.pfValue[wt],ku=nr.pfValue[wt],ui=1-bu,fi=bu,it="node-position"===di?ar:lr,ei={x:it.x1*ui+it.x2*fi,y:it.y1*ui+it.y2*fi};t.segpts.push(ei.x+ot.x*ku,ei.y+ot.y*ku)}else if(l.length%2!=1||h!==Math.floor(l.length/2)||d)for(tr=d,t.edgeType=tr?"multibezier":"bezier",t.ctrlpts=[],c=0;hf>c;c++){rr=(.5-l.length/2+h)*pt;du=i.signum(rr);tr&&(ct=g?g.pfValue[c]:pt,ki=yt.value[c]);ir=d?ct:void 0!==ct?du*ct:void 0;var gu=void 0!==ir?ir:rr,ui=1-ki,fi=ki,it="node-position"===di?ar:lr,ei={x:it.x1*ui+it.x2*fi,y:it.y1*ui+it.y2*fi};t.ctrlpts.push(ei.x+ot.x*gu,ei.y+ot.y*gu)}else t.edgeType="straight";this.findEndpoints(r);var oe=!u.number(t.startX)||!u.number(t.startY),se=!u.number(t.arrowStartX)||!u.number(t.arrowStartY),he=!u.number(t.endX)||!u.number(t.endY),ce=!u.number(t.arrowEndX)||!u.number(t.arrowEndY),le=this.getArrowWidth(r.pstyle("width").pfValue)*this.arrowShapeWidth,p=3*le;if("bezier"===t.edgeType){var ur=i.dist({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),nf=p>ur,fr=i.dist({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),tf=p>fr,er=!1;if(oe||se||nf){er=!0;var a={x:t.ctrlpts[0]-f.x,y:t.ctrlpts[1]-f.y},oi=Math.sqrt(a.x*a.x+a.y*a.y),v={x:a.x/oi,y:a.y/oi},bt=Math.max(y,k),si={x:t.ctrlpts[0]+2*v.x*bt,y:t.ctrlpts[1]+2*v.y*bt},rf=ni.intersectLine(f.x,f.y,y,k,si.x,si.y,0);nf?(t.ctrlpts[0]=t.ctrlpts[0]+v.x*(p-ur),t.ctrlpts[1]=t.ctrlpts[1]+v.y*(p-ur)):(t.ctrlpts[0]=rf[0]+v.x*p,t.ctrlpts[1]=rf[1]+v.y*p)}if(he||ce||tf){er=!0;var a={x:t.ctrlpts[0]-s.x,y:t.ctrlpts[1]-s.y},oi=Math.sqrt(a.x*a.x+a.y*a.y),v={x:a.x/oi,y:a.y/oi},bt=Math.max(y,k),si={x:t.ctrlpts[0]+2*v.x*bt,y:t.ctrlpts[1]+2*v.y*bt},uf=ti.intersectLine(s.x,s.y,ut,et,si.x,si.y,0);tf?(t.ctrlpts[0]=t.ctrlpts[0]+v.x*(p-fr),t.ctrlpts[1]=t.ctrlpts[1]+v.y*(p-fr)):(t.ctrlpts[0]=uf[0]+v.x*p,t.ctrlpts[1]=uf[1]+v.y*p)}er&&this.findEndpoints(r)}if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){for(t.allpts=[],t.allpts.push(t.startX,t.startY),c=0;c+1<t.ctrlpts.length;c+=2)t.allpts.push(t.ctrlpts[c],t.ctrlpts[c+1]),c+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[c]+t.ctrlpts[c+2])/2,(t.ctrlpts[c+1]+t.ctrlpts[c+3])/2);t.allpts.push(t.endX,t.endY);t.ctrlpts.length/2%2==0?(w=t.allpts.length/2-1,t.midX=t.allpts[w],t.midY=t.allpts[w+1]):(w=t.allpts.length/2-3,or=.5,t.midX=i.qbezierAt(t.allpts[w],t.allpts[w+2],t.allpts[w+4],or),t.midY=i.qbezierAt(t.allpts[w+1],t.allpts[w+3],t.allpts[w+5],or))}else"straight"===t.edgeType?(t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4):"segments"===t.edgeType&&((t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0)?(hi=t.segpts.length/2,lt=hi-2,t.midX=(t.segpts[lt]+t.segpts[hi])/2,t.midY=(t.segpts[lt+1]+t.segpts[hi+1])/2):(lt=t.segpts.length/2-1,t.midX=t.segpts[lt],t.midY=t.segpts[lt+1]));this.projectLines(r);this.calculateArrowAngles(r);this.recalculateEdgeLabelProjections(r);this.calculateLabelAngles(r)}}}for(h=0;h<vi.length;h++){var r=vi[h],kt=r._private,at=kt.rscratch,t=at;at.haystack||(vt=2*Math.random()*Math.PI,at.source={x:Math.cos(vt),y:Math.sin(vt)},vt=2*Math.random()*Math.PI,at.target={x:Math.cos(vt),y:Math.sin(vt)});var e=kt.source,o=kt.target,f=e._private.position,s=o._private.position,y=e.width(),ut=o.width(),k=e.height(),et=o.height(),bt=r.pstyle("haystack-radius").value,ci=bt/2;t.haystackPts=t.allpts=[t.source.x*y*ci+f.x,t.source.y*k*ci+f.y,t.target.x*ut*ci+s.x,t.target.y*et*ci+s.y];t.midX=(t.allpts[0]+t.allpts[2])/2;t.midY=(t.allpts[1]+t.allpts[3])/2;at.edgeType="haystack";at.haystack=!0;this.projectLines(r);this.calculateArrowAngles(r);this.recalculateEdgeLabelProjections(r);this.calculateLabelAngles(r)}return ft}};e=function(n,t){return Math.atan2(t,n)-Math.PI/2};r.calculateArrowAngles=function(n){var u,f,l,a,v,y,r=n._private.rscratch,nt="haystack"===r.edgeType,ot="multibezier"===r.edgeType,tt="segments"===r.edgeType,st="compound"===r.edgeType,ht="self"===r.edgeType,it=n._private.source._private.position,rt=n._private.target._private.position,ut,ft,p,b,k,d,g,et,t,o,w;if(nt?(l=r.haystackPts[0],a=r.haystackPts[1],v=r.haystackPts[2],y=r.haystackPts[3]):(l=r.arrowStartX,a=r.arrowStartY,v=r.arrowEndX,y=r.arrowEndY),u=it.x-l,f=it.y-a,r.srcArrowAngle=e(u,f),ut=r.midX,ft=r.midY,nt&&(ut=(l+v)/2,ft=(a+y)/2),u=v-l,f=y-a,ht)u=-1,f=1;else if(tt)if(t=r.allpts,t.length/2%2==0)o=t.length/2,p=o-2,u=t[o]-t[p],f=t[o+1]-t[p+1];else{var o=t.length/2-1,p=o-2,w=o+2;u=t[o]-t[p];f=t[o+1]-t[p+1]}else if(ot||st){if(t=r.allpts,et=r.ctrlpts,et.length/2%2==0){var h=t.length/2-1,s=h+2,c=s+2;b=i.qbezierAt(t[h],t[s],t[c],0);k=i.qbezierAt(t[h+1],t[s+1],t[c+1],0);d=i.qbezierAt(t[h],t[s],t[c],.0001);g=i.qbezierAt(t[h+1],t[s+1],t[c+1],.0001)}else{var s=t.length/2-1,h=s-2,c=s+2;b=i.qbezierAt(t[h],t[s],t[c],.4999);k=i.qbezierAt(t[h+1],t[s+1],t[c+1],.4999);d=i.qbezierAt(t[h],t[s],t[c],.5);g=i.qbezierAt(t[h+1],t[s+1],t[c+1],.5)}u=d-b;f=g-k}(r.midtgtArrowAngle=e(u,f),r.midDispX=u,r.midDispY=f,u*=-1,f*=-1,tt)&&(t=r.allpts,t.length/2%2==0||(o=t.length/2-1,w=o+2,u=-(t[w]-t[o]),f=-(t[w+1]-t[o+1])));r.midsrcArrowAngle=e(u,f);u=rt.x-v;f=rt.y-y;r.tgtArrowAngle=e(u,f)};r.calculateLabelAngles=function(n){var u=n._private,t=u.rscratch,f=n.isEdge(),r=n.pstyle("text-rotation"),i=r.strValue;"none"===i?t.labelAngle=t.sourceLabelAngle=t.targetLabelAngle=0:f&&"autorotate"===i?(t.labelAngle=Math.atan(t.midDispY/t.midDispX),t.sourceLabelAngle=t.sourceLabelAutoAngle,t.targetLabelAngle=t.targetLabelAutoAngle):t.labelAngle="autorotate"===i?t.sourceLabelAngle=t.targetLabelAngle=0:t.sourceLabelAngle=t.targetLabelAngle=r.pfValue};r.findEndpoints=function(n){var f,e,o,s=this,h=n.source()[0],c=n.target()[0],et=h._private,ot=c._private,l=et.position,a=ot.position,k=n.pstyle("target-arrow-shape").value,d=n.pstyle("source-arrow-shape").value,t=n._private.rscratch,r=t.edgeType,g="bezier"===r||"multibezier"===r||"self"===r||"compound"===r,nt="bezier"!==r,tt="straight"===r||"segments"===r,it="segments"===r,st=g||nt||tt,v,rt,ut,ft,y,p,w,b;g?(v=[t.ctrlpts[0],t.ctrlpts[1]],rt=nt?[t.ctrlpts[t.ctrlpts.length-2],t.ctrlpts[t.ctrlpts.length-1]]:v,e=rt,o=v):tt&&(ut=it?t.segpts.slice(0,2):[a.x,a.y],ft=it?t.segpts.slice(t.segpts.length-2):[l.x,l.y],e=ft,o=ut);f=s.nodeShapes[this.getNodeShape(c)].intersectLine(a.x,a.y,c.outerWidth(),c.outerHeight(),e[0],e[1],0);y=i.shortenIntersection(f,e,s.arrowShapes[k].spacing(n));p=i.shortenIntersection(f,e,s.arrowShapes[k].gap(n));t.endX=p[0];t.endY=p[1];t.arrowEndX=y[0];t.arrowEndY=y[1];f=s.nodeShapes[this.getNodeShape(h)].intersectLine(l.x,l.y,h.outerWidth(),h.outerHeight(),o[0],o[1],0);w=i.shortenIntersection(f,o,s.arrowShapes[d].spacing(n));b=i.shortenIntersection(f,o,s.arrowShapes[d].gap(n));t.startX=b[0];t.startY=b[1];t.arrowStartX=w[0];t.arrowStartY=w[1];st&&(t.badLine=u.number(t.startX)&&u.number(t.startY)&&u.number(t.endX)&&u.number(t.endY)?!1:!0)};r.getArrowWidth=r.getArrowHeight=function(n){var i=this.arrowWidthCache=this.arrowWidthCache||{},t=i[n];return t?t:(t=Math.max(Math.pow(13.37*n,.9),29),i[n]=t,t)};t.exports=r},{"../../../collection/zsort":32,"../../../is":83,"../../../math":85,"../../../util":100,"../../../window":107}],59:[function(n,t){"use strict";var i={};i.getCachedImage=function(n,t,i){var o=this,f=o.imageCache=o.imageCache||{},r=f[n],u,e,s;return r?(r.image.complete||r.image.addEventListener("load",i),r.image):(r=f[n]=f[n]||{},u=r.image=new Image,u.addEventListener("load",i),e="data:",s=n.substring(0,e.length).toLowerCase()===e,s||(u.crossOrigin=t),u.src=n,u)};t.exports=i},{}],60:[function(n,t){"use strict";var u=n("../../../is"),f=n("../../../util"),e=function(n){this.init(n)},r=e,i=r.prototype;i.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];i.init=function(n){var t=this;t.options=n;t.cy=n.cy;t.container=n.cy.container();t.selection=[void 0,void 0,void 0,void 0,0];t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95];t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1};t.dragData={possibleDragElements:[]};t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};t.redraws=0;t.showFps=n.showFps;t.hideEdgesOnViewport=n.hideEdgesOnViewport;t.hideLabelsOnViewport=n.hideLabelsOnViewport;t.textureOnViewport=n.textureOnViewport;t.wheelSensitivity=n.wheelSensitivity;t.motionBlurEnabled=n.motionBlur;t.forcedPixelRatio=n.pixelRatio;t.motionBlur=n.motionBlur;t.motionBlurOpacity=n.motionBlurOpacity;t.motionBlurTransparency=1-t.motionBlurOpacity;t.motionBlurPxRatio=1;t.mbPxRBlurry=1;t.minMbLowQualFrames=4;t.fullQualityMb=!1;t.clearedForMotionBlur=[];t.desktopTapThreshold=n.desktopTapThreshold;t.desktopTapThreshold2=n.desktopTapThreshold*n.desktopTapThreshold;t.touchTapThreshold=n.touchTapThreshold;t.touchTapThreshold2=n.touchTapThreshold*n.touchTapThreshold;t.tapholdDuration=500;t.bindings=[];t.beforeRenderCallbacks=[];t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100};t.registerNodeShapes();t.registerArrowShapes();t.registerCalculationListeners();t.load()};i.notify=function(n){var f,i=this,t,r,e;if(!this.destroyed){for(f=u.array(n.type)?n.type:[n.type],t={},r=0;r<f.length;r++)e=f[r],t[e]=!0;if(t.destroy)return void i.destroy();(t.add||t.remove||t.load||t.style)&&i.updateCachedZSortedEles();t.viewport&&i.redrawHint("select",!0);(t.load||t.resize)&&(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container));i.redrawHint("eles",!0);i.redrawHint("drag",!0);this.startRenderLoop();this.redraw()}};i.destroy=function(){var n=this,t;for(n.destroyed=!0,n.cy.stopAnimationLoop(),t=0;t<n.bindings.length;t++){var u=n.bindings[t],r=u,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(n.bindings=[],n.beforeRenderCallbacks=[],n.onUpdateEleCalcsFns=[],n.removeObserver&&n.removeObserver.disconnect(),n.styleObserver&&n.styleObserver.disconnect(),n.labelCalcDiv)try{document.body.removeChild(n.labelCalcDiv)}catch(f){}};[n("./arrow-shapes"),n("./coord-ele-math"),n("./images"),n("./load-listeners"),n("./node-shapes"),n("./redraw")].forEach(function(n){f.extend(i,n)});t.exports=r},{"../../../is":83,"../../../util":100,"./arrow-shapes":57,"./coord-ele-math":58,"./images":59,"./load-listeners":61,"./node-shapes":62,"./redraw":63}],61:[function(n,t){"use strict";var r=n("../../../is"),f=n("../../../util"),e=n("../../../math"),i=n("../../../event"),u={};u.registerBinding=function(n){var i=Array.prototype.slice.apply(arguments,[1]),t=this.binder(n);return t.on.apply(t,i)};u.binder=function(n){var i=this,e=n===window||n===document||n===document.body||r.domElement(n),u,f,t;if(null==i.supportsPassiveEvents){u=!1;try{f=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,f)}catch(o){}i.supportsPassiveEvents=u}return t=function(t,r,u){var f=Array.prototype.slice.call(arguments);return e&&i.supportsPassiveEvents&&(f[2]={capture:null!=u?u:!1,passive:!1,once:!1}),i.bindings.push({target:n,args:f}),(n.addEventListener||n.on).apply(n,f),this},{on:t,addEventListener:t,addListener:t,bind:t}};u.nodeIsDraggable=function(n){return n&&n.isNode()&&!n.locked()&&n.grabbable()};u.nodeIsGrabbable=function(n){return this.nodeIsDraggable(n)&&0!==n.pstyle("opacity").value&&"visible"===n.pstyle("visibility").value&&"element"===n.pstyle("display").value};u.load=function(){var n=this,t=function(t,r,u,e){var o,s,h;for(null==t&&(t=n.cy),o=0;o<r.length;o++)s=r[o],h=new i(u,f.extend({type:s},e)),t.trigger(h)},d=function(n){return n.shiftKey||n.metaKey||n.ctrlKey},ht=function(t,i){var u=!0,r,t;if(n.cy.hasCompoundNodes()&&t&&t.isEdge()){for(r=0;i&&r<i.length;r++)if(t=i[r],t.isNode()&&t.isParent()){u=!1;break}}else u=!0;return u},ii=function(t){var r,i,u;if(t.addToList&&n.cy.hasCompoundNodes()){if(!t.addToList.hasId)for(t.addToList.hasId={},i=0;i<t.addToList.length;i++)u=t.addToList[i],t.addToList.hasId[u.id()]=!0;r=t.addToList.hasId}return r||{}},ri=function(n){n[0]._private.grabbed=!0},ui=function(n){n[0]._private.grabbed=!1},a=function(n){n[0]._private.rscratch.inDragLayer=!0},fi=function(n){n[0]._private.rscratch.inDragLayer=!1},ct=function(n){n[0]._private.rscratch.isGrabTarget=!0},ei=function(n){n[0]._private.rscratch.isGrabTarget=!1},g=function(n,t){var i=ii(t);i[n.id()]||(t.addToList.push(n),i[n.id()]=!0,ri(n))},oi=function(n,t){if(n.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var i=n.descendants();t.inDragLayer&&(i.forEach(a),i.connectedEdges().forEach(a));t.addToList&&i.forEach(function(n){g(n,t)})}},y=function(t,i){i=i||{};var r=t.cy().hasCompoundNodes();i.inDragLayer&&(t.forEach(a),t.neighborhood().stdFilter(function(n){return!r||n.isEdge()}).forEach(a));i.addToList&&t.forEach(function(n){g(n,i)});oi(t,i);si(t,{inDragLayer:i.inDragLayer});n.updateCachedGrabbedEles()},lt=y,b=function(t){t&&(t.hasId={},n.getCachedZSortedEles().forEach(function(n){ui(n);fi(n);ei(n)}),n.updateCachedGrabbedEles())},si=function(n,t){var i,r,u;(null!=t.inDragLayer||null!=t.addToList)&&n.cy().hasCompoundNodes()&&(i=n.ancestors().orphans(),i.same(n)||(r=i.descendants().spawnSelf().merge(i).unmerge(n).unmerge(n.descendants()),u=r.connectedEdges(),t.inDragLayer&&(u.forEach(a),r.forEach(a)),t.addToList&&r.forEach(function(n){g(n,t)})))},at="undefined"!=typeof MutationObserver,nt,vt,p,yt,w,pt,u,o,s,h,tt,it,rt,ut,c,l,ft,et,wt,bt,ot,st,kt,dt,gt;for(at?(n.removeObserver=new MutationObserver(function(t){for(var f,r,u,e,i=0;i<t.length;i++)if(f=t[i],r=f.removedNodes,r)for(u=0;u<r.length;u++)if(e=r[u],e===n.container){n.destroy();break}}),n.container.parentNode&&n.removeObserver.observe(n.container.parentNode,{childList:!0})):n.registerBinding(n.container,"DOMNodeRemoved",function(){n.destroy()}),nt=f.debounce(function(){n.cy.invalidateSize();n.invalidateContainerClientCoordsCache();n.matchCanvasSize(n.container);n.redrawHint("eles",!0);n.redrawHint("drag",!0);n.redraw()},100),at&&(n.styleObserver=new MutationObserver(nt),n.styleObserver.observe(n.container,{attributes:!0})),n.registerBinding(window,"resize",nt),vt=function(t){n.registerBinding(t,"scroll",function(){n.invalidateContainerClientCoordsCache()})},p=n.cy.container();vt(p),p.parentNode;)p=p.parentNode;if(n.registerBinding(n.container,"contextmenu",function(n){n.preventDefault()}),yt=function(){return 0!==n.selection[4]},w=function(t){for(var i,r=n.findContainerClientCoords(),e=r[0],o=r[1],l=r[2],a=r[3],s=t.touches?t.touches:[t],h=!1,f=0;f<s.length;f++)if(i=s[f],e<=i.clientX&&i.clientX<=e+l&&o<=i.clientY&&i.clientY<=o+a){h=!0;break}if(!h)return!1;for(var v=n.container,y=t.target,u=y.parentNode,c=!1;u;){if(u===v){c=!0;break}u=u.parentNode}return!!c},n.registerBinding(n.container,"mousedown",function(r){var v,c,l,p;if(w(r)){r.preventDefault();n.hoverData.capture=!0;n.hoverData.which=r.which;var s=n.cy,h=[r.clientX,r.clientY],f=n.projectIntoViewport(h[0],h[1]),e=n.selection,a=n.findNearestElements(f[0],f[1],!0,!1),u=a[0],o=n.dragData.possibleDragElements;n.hoverData.mdownPos=f;n.hoverData.mdownGPos=h;v=function(){n.hoverData.tapholdCancelled=!1;clearTimeout(n.hoverData.tapholdTimeout);n.hoverData.tapholdTimeout=setTimeout(function(){if(!n.hoverData.tapholdCancelled){var t=n.hoverData.down;t?t.trigger(new i(r,{type:"taphold",cyPosition:{x:f[0],y:f[1]}})):s.trigger(new i(r,{type:"taphold",cyPosition:{x:f[0],y:f[1]}}))}},n.tapholdDuration)};3==r.which?(n.hoverData.cxtStarted=!0,c=new i(r,{type:"cxttapstart",cyPosition:{x:f[0],y:f[1]}}),u?(u.activate(),u.trigger(c),n.hoverData.down=u):s.trigger(c),n.hoverData.downTime=(new Date).getTime(),n.hoverData.cxtDragged=!1):1==r.which&&((u&&u.activate(),null!=u&&n.nodeIsGrabbable(u))&&(l=new i(r,{type:"grab",cyPosition:{x:f[0],y:f[1]}}),(ct(u),u.selected())?u.selected()&&(o=n.dragData.possibleDragElements=[],p=s.$(function(){return this.isNode()&&this.selected()&&n.nodeIsGrabbable(this)}),y(p,{addToList:o}),u.trigger(l)):(o=n.dragData.possibleDragElements=[],lt(u,{addToList:o}),u.trigger(l)),n.redrawHint("eles",!0),n.redrawHint("drag",!0)),n.hoverData.down=u,n.hoverData.downs=a,n.hoverData.downTime=(new Date).getTime(),t(u,["mousedown","tapstart","vmousedown"],r,{cyPosition:{x:f[0],y:f[1]}}),null==u?(e[4]=1,n.data.bgActivePosistion={x:f[0],y:f[1]},n.redrawHint("select",!0),n.redraw()):u.isEdge()&&(e[4]=1),v());e[0]=e[2]=f[0];e[1]=e[3]=f[1]}},!1),n.registerBinding(window,"mousemove",function(u){var kt=n.hoverData.capture,pt,wt,ft,et,ot,st,ct,tt,a,b,lt,v,at,bt;if(kt||w(u)){var k=!1,s=n.cy,g=s.zoom(),nt=[u.clientX,u.clientY],f=n.projectIntoViewport(nt[0],nt[1]),dt=n.hoverData.mdownPos,it=n.hoverData.mdownGPos,l=n.selection,h=null;n.hoverData.draggingEles||n.hoverData.dragging||n.hoverData.selecting||(h=n.findNearestElement(f[0],f[1],!0,!1));var p,rt=n.hoverData.last,o=n.hoverData.down,c=[f[0]-l[2],f[1]-l[3]],ut=n.dragData.possibleDragElements;if(it){var vt=nt[0]-it[0],gt=vt*vt,yt=nt[1]-it[1],ni=yt*yt,ti=gt+ni;p=ti>=n.desktopTapThreshold2}if(pt=d(u),p&&(n.hoverData.tapholdCancelled=!0),wt=function(){var t=n.hoverData.dragDelta=n.hoverData.dragDelta||[];0===t.length?(t.push(c[0]),t.push(c[1])):(t[0]+=c[0],t[1]+=c[1])},k=!0,t(h,["mousemove","vmousemove","tapdrag"],u,{cyPosition:{x:f[0],y:f[1]}}),3===n.hoverData.which)p&&(ft=new i(u,{type:"cxtdrag",cyPosition:{x:f[0],y:f[1]}}),o?o.trigger(ft):s.trigger(ft),n.hoverData.cxtDragged=!0,n.hoverData.cxtOver&&h===n.hoverData.cxtOver||(n.hoverData.cxtOver&&n.hoverData.cxtOver.trigger(new i(u,{type:"cxtdragout",cyPosition:{x:f[0],y:f[1]}})),n.hoverData.cxtOver=h,h&&h.trigger(new i(u,{type:"cxtdragover",cyPosition:{x:f[0],y:f[1]}}))));else if(n.hoverData.dragging)(k=!0,s.panningEnabled()&&s.userPanningEnabled())&&(n.hoverData.justStartedPan?(ot=n.hoverData.mdownPos,et={x:(f[0]-ot[0])*g,y:(f[1]-ot[1])*g},n.hoverData.justStartedPan=!1):et={x:c[0]*g,y:c[1]*g},s.panBy(et),n.hoverData.dragged=!0),f=n.projectIntoViewport(u.clientX,u.clientY);else if(1==l[4]&&(null==o||o.isEdge()))p&&(n.hoverData.dragging||!s.boxSelectionEnabled()||!pt&&s.panningEnabled()&&s.userPanningEnabled()?!n.hoverData.selecting&&s.panningEnabled()&&s.userPanningEnabled()&&(bt=ht(o,n.hoverData.downs),bt&&(n.hoverData.dragging=!0,n.hoverData.justStartedPan=!0,l[4]=0,n.data.bgActivePosistion=e.array2point(dt),n.redrawHint("select",!0),n.redraw())):(n.data.bgActivePosistion=void 0,n.hoverData.selecting||s.trigger("boxstart"),n.hoverData.selecting=!0,n.redrawHint("select",!0),n.redraw()),o&&o.isEdge()&&o.active()&&o.unactivate());else{if(o&&o.isEdge()&&o.active()&&o.unactivate(),o&&o.grabbed()||h==rt||(rt&&t(rt,["mouseout","tapdragout"],u,{cyPosition:{x:f[0],y:f[1]}}),h&&t(h,["mouseover","tapdragover"],u,{cyPosition:{x:f[0],y:f[1]}}),n.hoverData.last=h),o&&n.nodeIsDraggable(o))if(p){for(st=!n.dragData.didDrag,st&&n.redrawHint("eles",!0),n.dragData.didDrag=!0,ct=[],n.hoverData.draggingEles||y(s.collection(ut),{inDragLayer:!0}),tt=0;tt<ut.length;tt++)a=ut[tt],n.nodeIsDraggable(a)&&a.grabbed()&&(b=a._private.position,(ct.push(a),r.number(c[0])&&r.number(c[1]))&&(lt=!a.isParent(),(lt&&(b.x+=c[0],b.y+=c[1]),st)&&(v=n.hoverData.dragDelta,lt&&v&&r.number(v[0])&&r.number(v[1])&&(b.x+=v[0],b.y+=v[1]))));n.hoverData.draggingEles=!0;at=s.collection(ct);at.updateCompoundBounds();at.trigger("position drag");n.redrawHint("drag",!0);n.redraw()}else wt();k=!0}return l[2]=f[0],l[3]=f[1],k?(u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault(),!1):void 0}},!1),n.registerBinding(window,"mouseup",function(r){var w=n.hoverData.capture,a,v,h,y,p;if(w){n.hoverData.capture=!1;var e=n.cy,f=n.projectIntoViewport(r.clientX,r.clientY),s=n.selection,o=n.findNearestElement(f[0],f[1],!0,!1),c=n.dragData.possibleDragElements,u=n.hoverData.down,l=d(r);(n.data.bgActivePosistion&&(n.redrawHint("select",!0),n.redraw()),n.hoverData.tapholdCancelled=!0,n.data.bgActivePosistion=void 0,u&&u.unactivate(),3===n.hoverData.which)?(a=new i(r,{type:"cxttapend",cyPosition:{x:f[0],y:f[1]}}),(u?u.trigger(a):e.trigger(a),n.hoverData.cxtDragged)||(v=new i(r,{type:"cxttap",cyPosition:{x:f[0],y:f[1]}}),u?u.trigger(v):e.trigger(v)),n.hoverData.cxtDragged=!1,n.hoverData.which=null):1===n.hoverData.which&&((null!=u||n.dragData.didDrag||n.hoverData.selecting||n.hoverData.dragged||d(r)||(e.$(function(){return this.selected()}).unselect(),c.length>0&&n.redrawHint("eles",!0),n.dragData.possibleDragElements=c=[]),t(o,["mouseup","tapend","vmouseup"],r,{cyPosition:{x:f[0],y:f[1]}}),n.dragData.didDrag||n.hoverData.dragged||n.hoverData.selecting||t(u,["click","tap","vclick"],r,{cyPosition:{x:f[0],y:f[1]}}),o!=u||n.dragData.didDrag||n.hoverData.selecting||null!=o&&o._private.selectable&&(n.hoverData.dragging||("additive"===e.selectionType()||l?o.selected()?o.unselect():o.select():l||(e.$(":selected").unmerge(o).unselect(),o.select())),n.redrawHint("eles",!0)),n.hoverData.selecting)&&(h=e.collection(n.getAllInBox(s[0],s[1],s[2],s[3])),n.redrawHint("select",!0),h.length>0&&n.redrawHint("eles",!0),e.trigger("boxend"),y=function(n){return n.selectable()&&!n.selected()},"additive"===e.selectionType()?h.trigger("box").stdFilter(y).select().trigger("boxselect"):(l||e.$(":selected").unmerge(h).unselect(),h.trigger("box").stdFilter(y).select().trigger("boxselect")),n.redraw()),(n.hoverData.dragging&&(n.hoverData.dragging=!1,n.redrawHint("select",!0),n.redrawHint("eles",!0),n.redraw()),s[4])||(n.redrawHint("drag",!0),n.redrawHint("eles",!0),p=u&&u.grabbed(),b(c),p&&u.trigger("free")));s[4]=0;n.hoverData.down=null;n.hoverData.cxtStarted=!1;n.hoverData.draggingEles=!1;n.hoverData.selecting=!1;n.dragData.didDrag=!1;n.hoverData.dragged=!1;n.hoverData.dragDelta=[];n.hoverData.mdownPos=null;n.hoverData.mdownGPos=null}},!1),pt=function(t){var r,e;if(!n.scrollingPage){var i=n.cy,u=n.projectIntoViewport(t.clientX,t.clientY),f=[u[0]*i.zoom()+i.pan().x,u[1]*i.zoom()+i.pan().y];if(n.hoverData.draggingEles||n.hoverData.dragging||n.hoverData.cxtStarted||yt())return void t.preventDefault();i.panningEnabled()&&i.userPanningEnabled()&&i.zoomingEnabled()&&i.userZoomingEnabled()&&(t.preventDefault(),n.data.wheelZooming=!0,clearTimeout(n.data.wheelTimeout),n.data.wheelTimeout=setTimeout(function(){n.data.wheelZooming=!1;n.redrawHint("eles",!0);n.redraw()},150),r=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,r*=n.wheelSensitivity,e=1===t.deltaMode,e&&(r*=33),i.zoom({level:i.zoom()*Math.pow(10,r),renderedPosition:{x:f[0],y:f[1]}}))}},n.registerBinding(n.container,"wheel",pt,!0),n.registerBinding(window,"scroll",function(){n.scrollingPage=!0;clearTimeout(n.scrollingPageTimeout);n.scrollingPageTimeout=setTimeout(function(){n.scrollingPage=!1},250)},!0),n.registerBinding(n.container,"mouseout",function(t){var r=n.projectIntoViewport(t.clientX,t.clientY);n.cy.trigger(new i(t,{type:"mouseout",cyPosition:{x:r[0],y:r[1]}}))},!1),n.registerBinding(n.container,"mouseover",function(t){var r=n.projectIntoViewport(t.clientX,t.clientY);n.cy.trigger(new i(t,{type:"mouseover",cyPosition:{x:r[0],y:r[1]}}))},!1),ot=function(n,t,i,r){return Math.sqrt((i-n)*(i-n)+(r-t)*(r-t))},st=function(n,t,i,r){return(i-n)*(i-n)+(r-t)*(r-t)},n.registerBinding(n.container,"touchstart",bt=function(r){var e,k,nt,ht,at,bt,d,g,vt,a,yt,kt,dt,v,pt;if(w(r)){n.touchData.capture=!0;n.data.bgActivePosistion=void 0;var p=n.cy,f=n.touchData.now,gt=n.touchData.earlier;if(r.touches[0]&&(e=n.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY),f[0]=e[0],f[1]=e[1]),r.touches[1]&&(e=n.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),f[2]=e[0],f[3]=e[1]),r.touches[2]&&(e=n.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),f[4]=e[0],f[5]=e[1]),r.touches[1]&&(b(n.dragData.touchDragEles),k=n.findContainerClientCoords(),c=k[0],l=k[1],ft=k[2],et=k[3],u=r.touches[0].clientX-c,o=r.touches[0].clientY-l,s=r.touches[1].clientX-c,h=r.touches[1].clientY-l,wt=u>=0&&ft>=u&&s>=0&&ft>=s&&o>=0&&et>=o&&h>=0&&et>=h,nt=p.pan(),ht=p.zoom(),tt=ot(u,o,s,h),it=st(u,o,s,h),rt=[(u+s)/2,(o+h)/2],ut=[(rt[0]-nt.x)/ht,(rt[1]-nt.y)/ht],at=200,bt=at*at,bt>it&&!r.touches[2]))return d=n.findNearestElement(f[0],f[1],!0,!0),g=n.findNearestElement(f[2],f[3],!0,!0),d&&d.isNode()?(d.activate().trigger(new i(r,{type:"cxttapstart",cyPosition:{x:f[0],y:f[1]}})),n.touchData.start=d):g&&g.isNode()?(g.activate().trigger(new i(r,{type:"cxttapstart",cyPosition:{x:f[0],y:f[1]}})),n.touchData.start=g):p.trigger(new i(r,{type:"cxttapstart",cyPosition:{x:f[0],y:f[1]}})),n.touchData.start&&(n.touchData.start._private.grabbed=!1),n.touchData.cxt=!0,n.touchData.cxtDragged=!1,n.data.bgActivePosistion=void 0,void n.redraw();if(r.touches[2]||r.touches[1]||r.touches[0]&&(vt=n.findNearestElements(f[0],f[1],!0,!0),a=vt[0],null!=a&&(a.activate(),n.touchData.start=a,n.touchData.starts=vt,n.nodeIsGrabbable(a))&&(yt=n.dragData.touchDragEles=[],(n.redrawHint("eles",!0),n.redrawHint("drag",!0),a.selected())?(kt=p.$(function(){return this.selected()&&n.nodeIsGrabbable(this)}),y(kt,{addToList:yt})):lt(a,{addToList:yt}),ct(a),a.trigger(new i(r,{type:"grab",cyPosition:{x:f[0],y:f[1]}}))),t(a,["touchstart","tapstart","vmousedown"],r,{cyPosition:{x:f[0],y:f[1]}}),null==a&&(n.data.bgActivePosistion={x:e[0],y:e[1]},n.redrawHint("select",!0),n.redraw()),n.touchData.singleTouchMoved=!1,n.touchData.singleTouchStartTime=+new Date,clearTimeout(n.touchData.tapholdTimeout),n.touchData.tapholdTimeout=setTimeout(function(){n.touchData.singleTouchMoved!==!1||n.pinching||n.touchData.selecting||(t(n.touchData.start,["taphold"],r,{cyPosition:{x:f[0],y:f[1]}}),n.touchData.start||p.$(":selected").unselect())},n.tapholdDuration)),r.touches.length>=1){for(dt=n.touchData.startPosition=[],v=0;v<f.length;v++)dt[v]=gt[v]=f[v];pt=r.touches[0];n.touchData.startGPosition=[pt.clientX,pt.clientY]}}},!1),n.registerBinding(window,"touchmove",kt=function(f){var et=n.touchData.capture,dt,gt,k,at,hi,rt,d,fi,ft,li,ei,yt,pt,ai,vi,g,lt,gi,v,nt;if(et||w(f)){var ct=n.selection,p=n.cy,a=n.touchData.now,bt=n.touchData.earlier,kt=p.zoom();if(f.touches[0]&&(v=n.projectIntoViewport(f.touches[0].clientX,f.touches[0].clientY),a[0]=v[0],a[1]=v[1]),f.touches[1]&&(v=n.projectIntoViewport(f.touches[1].clientX,f.touches[1].clientY),a[2]=v[0],a[3]=v[1]),f.touches[2]&&(v=n.projectIntoViewport(f.touches[2].clientX,f.touches[2].clientY),a[4]=v[0],a[5]=v[1]),gt=n.touchData.startGPosition,et&&f.touches[0]&&gt){for(k=[],nt=0;nt<a.length;nt++)k[nt]=a[nt]-bt[nt];var oi=f.touches[0].clientX-gt[0],nr=oi*oi,si=f.touches[0].clientY-gt[1],tr=si*si,ir=nr+tr;dt=ir>=n.touchTapThreshold2}if(et&&n.touchData.cxt){f.preventDefault();var ni=f.touches[0].clientX-c,ti=f.touches[0].clientY-l,ii=f.touches[1].clientX-c,ri=f.touches[1].clientY-l,yi=st(ni,ti,ii,ri),rr=yi/it,pi=150,ur=pi*pi,wi=1.5,fr=wi*wi;(rr>=fr||yi>=ur)&&(n.touchData.cxt=!1,n.data.bgActivePosistion=void 0,n.redrawHint("select",!0),at=new i(f,{type:"cxttapend",cyPosition:{x:a[0],y:a[1]}}),n.touchData.start?(n.touchData.start.unactivate().trigger(at),n.touchData.start=null):p.trigger(at))}if(et&&n.touchData.cxt)at=new i(f,{type:"cxtdrag",cyPosition:{x:a[0],y:a[1]}}),n.data.bgActivePosistion=void 0,n.redrawHint("select",!0),n.touchData.start?n.touchData.start.trigger(at):p.trigger(at),n.touchData.start&&(n.touchData.start._private.grabbed=!1),n.touchData.cxtDragged=!0,rt=n.findNearestElement(a[0],a[1],!0,!0),n.touchData.cxtOver&&rt===n.touchData.cxtOver||(n.touchData.cxtOver&&n.touchData.cxtOver.trigger(new i(f,{type:"cxtdragout",cyPosition:{x:a[0],y:a[1]}})),n.touchData.cxtOver=rt,rt&&rt.trigger(new i(f,{type:"cxtdragover",cyPosition:{x:a[0],y:a[1]}})));else if(et&&f.touches[2]&&p.boxSelectionEnabled())f.preventDefault(),n.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,n.touchData.selecting||p.trigger("boxstart"),n.touchData.selecting=!0,n.redrawHint("select",!0),ct&&0!==ct.length&&void 0!==ct[0]?(ct[2]=(a[0]+a[2]+a[4])/3,ct[3]=(a[1]+a[3]+a[5])/3):(ct[0]=(a[0]+a[2]+a[4])/3,ct[1]=(a[1]+a[3]+a[5])/3,ct[2]=(a[0]+a[2]+a[4])/3+1,ct[3]=(a[1]+a[3]+a[5])/3+1),ct[4]=1,n.touchData.selecting=!0,n.redraw();else if(et&&f.touches[1]&&p.zoomingEnabled()&&p.panningEnabled()&&p.userZoomingEnabled()&&p.userPanningEnabled()){if(f.preventDefault(),n.data.bgActivePosistion=void 0,n.redrawHint("select",!0),ft=n.dragData.touchDragEles,ft)for(n.redrawHint("drag",!0),lt=0;lt<ft.length;lt++)hi=ft[lt]._private,hi.grabbed=!1,hi.rscratch.inDragLayer=!1;var ni=f.touches[0].clientX-c,ti=f.touches[0].clientY-l,ii=f.touches[1].clientX-c,ri=f.touches[1].clientY-l,bi=ot(ni,ti,ii,ri),er=bi/tt;if(wt){var or=ni-u,sr=ti-o,hr=ii-s,cr=ri-h,lr=(or+hr)/2,ar=(sr+cr)/2,vt=p.zoom(),ci=vt*er,ui=p.pan(),ki=ut[0]*vt+ui.x,di=ut[1]*vt+ui.y,vr={x:-ci/vt*(ki-ui.x-lr)+ki,y:-ci/vt*(di-ui.y-ar)+di};n.touchData.start&&n.touchData.start.active()&&(ft=n.dragData.touchDragEles,b(ft),n.redrawHint("drag",!0),n.redrawHint("eles",!0),n.touchData.start.unactivate().trigger("free"));p.viewport({zoom:ci,pan:vr,cancelOnFailedZoom:!0});tt=bi;u=ni;o=ti;s=ii;h=ri;n.pinching=!0}f.touches[0]&&(v=n.projectIntoViewport(f.touches[0].clientX,f.touches[0].clientY),a[0]=v[0],a[1]=v[1]);f.touches[1]&&(v=n.projectIntoViewport(f.touches[1].clientX,f.touches[1].clientY),a[2]=v[0],a[3]=v[1]);f.touches[2]&&(v=n.projectIntoViewport(f.touches[2].clientX,f.touches[2].clientY),a[4]=v[0],a[5]=v[1])}else if(f.touches[0]){if(d=n.touchData.start,fi=n.touchData.last,n.hoverData.draggingEles||n.swipePanning||(rt=n.findNearestElement(a[0],a[1],!0,!0)),et&&null!=d&&f.preventDefault(),et&&null!=d&&n.nodeIsDraggable(d))if(dt){for(ft=n.dragData.touchDragEles,li=!n.dragData.didDrag,li&&y(p.collection(ft),{inDragLayer:!0}),ei=0;ei<ft.length;ei++)yt=ft[ei],n.nodeIsDraggable(yt)&&yt.grabbed()&&(n.dragData.didDrag=!0,pt=yt._private.position,ai=!yt.isParent(),(ai&&r.number(k[0])&&r.number(k[1])&&(pt.x+=k[0],pt.y+=k[1]),li)&&(n.redrawHint("eles",!0),g=n.touchData.dragDelta,ai&&g&&r.number(g[0])&&r.number(g[1])&&(pt.x+=g[0],pt.y+=g[1])));vi=p.collection(ft);vi.updateCompoundBounds();vi.trigger("position drag");n.hoverData.draggingEles=!0;n.redrawHint("drag",!0);n.touchData.startPosition[0]==bt[0]&&n.touchData.startPosition[1]==bt[1]&&n.redrawHint("eles",!0);n.redraw()}else g=n.touchData.dragDelta=n.touchData.dragDelta||[],0===g.length?(g.push(k[0]),g.push(k[1])):(g[0]+=k[0],g[1]+=k[1]);if(t(d||rt,["touchmove","tapdrag","vmousemove"],f,{cyPosition:{x:a[0],y:a[1]}}),d&&d.grabbed()||rt==fi||(fi&&fi.trigger(new i(f,{type:"tapdragout",cyPosition:{x:a[0],y:a[1]}})),rt&&rt.trigger(new i(f,{type:"tapdragover",cyPosition:{x:a[0],y:a[1]}}))),n.touchData.last=rt,et)for(lt=0;lt<a.length;lt++)a[lt]&&n.touchData.startPosition[lt]&&dt&&(n.touchData.singleTouchMoved=!0);et&&(null==d||d.isEdge())&&p.panningEnabled()&&p.userPanningEnabled()&&(gi=ht(d,n.touchData.starts),gi&&(f.preventDefault(),n.swipePanning?p.panBy({x:k[0]*kt,y:k[1]*kt}):dt&&(n.swipePanning=!0,p.panBy({x:oi*kt,y:si*kt}),d&&(d.unactivate(),n.data.bgActivePosistion||(n.data.bgActivePosistion=e.array2point(n.touchData.startPosition)),n.redrawHint("select",!0),n.touchData.start=null))),v=n.projectIntoViewport(f.touches[0].clientX,f.touches[0].clientY),a[0]=v[0],a[1]=v[1])}for(nt=0;nt<a.length;nt++)bt[nt]=a[nt]}},!1),n.registerBinding(window,"touchcancel",dt=function(){var t=n.touchData.start;n.touchData.capture=!1;t&&t.unactivate()}),n.registerBinding(window,"touchend",gt=function(r){var f=n.touchData.start,nt=n.touchData.capture,e,o,c,l,a,y,p,w,k,h;if(nt){n.touchData.capture=!1;r.preventDefault();e=n.selection;n.swipePanning=!1;n.hoverData.draggingEles=!1;var s=n.cy,v=s.zoom(),u=n.touchData.now,tt=n.touchData.earlier;if(r.touches[0]&&(o=n.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY),u[0]=o[0],u[1]=o[1]),r.touches[1]&&(o=n.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),u[2]=o[0],u[3]=o[1]),r.touches[2]&&(o=n.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),u[4]=o[0],u[5]=o[1]),f&&f.unactivate(),n.touchData.cxt)return(c=new i(r,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}}),f?f.trigger(c):s.trigger(c),n.touchData.cxtDragged)||(l=new i(r,{type:"cxttap",cyPosition:{x:u[0],y:u[1]}}),f?f.trigger(l):s.trigger(l)),n.touchData.start&&(n.touchData.start._private.grabbed=!1),n.touchData.cxt=!1,n.touchData.start=null,void n.redraw();if(!r.touches[2]&&s.boxSelectionEnabled()&&n.touchData.selecting&&(n.touchData.selecting=!1,a=s.collection(n.getAllInBox(e[0],e[1],e[2],e[3])),e[0]=void 0,e[1]=void 0,e[2]=void 0,e[3]=void 0,e[4]=0,n.redrawHint("select",!0),s.trigger("boxend"),y=function(n){return n.selectable()&&!n.selected()},a.trigger("box").stdFilter(y).select().trigger("boxselect"),a.nonempty()&&n.redrawHint("eles",!0),n.redraw()),null!=f&&f.unactivate(),r.touches[2])n.data.bgActivePosistion=void 0,n.redrawHint("select",!0);else if(!r.touches[1]&&!r.touches[0]&&!r.touches[0]){n.data.bgActivePosistion=void 0;n.redrawHint("select",!0);p=n.dragData.touchDragEles;null!=f?(w=f._private.grabbed,b(p),n.redrawHint("drag",!0),n.redrawHint("eles",!0),w&&f.trigger("free"),t(f,["touchend","tapend","vmouseup","tapdragout"],r,{cyPosition:{x:u[0],y:u[1]}}),f.unactivate(),n.touchData.start=null):(k=n.findNearestElement(u[0],u[1],!0,!0),t(k,["touchend","tapend","vmouseup","tapdragout"],r,{cyPosition:{x:u[0],y:u[1]}}));var d=n.touchData.startPosition[0]-u[0],it=d*d,g=n.touchData.startPosition[1]-u[1],rt=g*g,ut=it+rt,ft=ut*v*v;null!=f&&!n.dragData.didDrag&&f._private.selectable&&ft<n.touchTapThreshold2&&!n.pinching&&("single"===s.selectionType()?(s.$(":selected").unmerge(f).unselect(),f.select()):f.selected()?f.unselect():f.select(),n.redrawHint("eles",!0));n.touchData.singleTouchMoved||t(f,["tap","vclick"],r,{cyPosition:{x:u[0],y:u[1]}});n.touchData.singleTouchMoved=!0}for(h=0;h<u.length;h++)tt[h]=u[h];n.dragData.didDrag=!1;0===r.touches.length&&(n.touchData.dragDelta=[],n.touchData.startPosition=null,n.touchData.startGPosition=null);r.touches.length<2&&(n.pinching=!1,n.redrawHint("eles",!0),n.redraw())}},!1),"undefined"==typeof TouchEvent){var v=[],ni=function(n){return{clientX:n.clientX,clientY:n.clientY,force:1,identifier:n.pointerId,pageX:n.pageX,pageY:n.pageY,radiusX:n.width/2,radiusY:n.height/2,screenX:n.screenX,screenY:n.screenY,target:n.target}},hi=function(n){return{event:n,touch:ni(n)}},ci=function(n){v.push(hi(n))},ti=function(n){for(var i,t=0;t<v.length;t++)if(i=v[t],i.event.pointerId===n.pointerId)return void v.splice(t,1)},li=function(n){var t=v.filter(function(t){return t.event.pointerId===n.pointerId})[0];t.event=n;t.touch=ni(n)},k=function(n){n.touches=v.map(function(n){return n.touch})};n.registerBinding(n.container,"pointerdown",function(n){"mouse"!==n.pointerType&&(n.preventDefault(),ci(n),k(n),bt(n))});n.registerBinding(n.container,"pointerup",function(n){"mouse"!==n.pointerType&&(ti(n),k(n),gt(n))});n.registerBinding(n.container,"pointercancel",function(n){"mouse"!==n.pointerType&&(ti(n),k(n),dt(n))});n.registerBinding(n.container,"pointermove",function(n){"mouse"!==n.pointerType&&(n.preventDefault(),li(n),k(n),kt(n))})}};t.exports=u},{"../../../event":45,"../../../is":83,"../../../math":85,"../../../util":100}],62:[function(n,t){"use strict";var i=n("../../../math"),r={};r.generatePolygon=function(n,t){return this.nodeShapes[n]={renderer:this,name:n,points:t,draw:function(n,t,i,r,u){this.renderer.nodeShapeImpl("polygon",n,t,i,r,u,this.points)},intersectLine:function(n,t,r,u,f,e,o){return i.polygonIntersectLine(f,e,this.points,n,t,r/2,u/2,o)},checkPoint:function(n,t,r,u,f,e,o){return i.pointInsidePolygon(n,t,this.points,e,o,u,f,[0,-1],r)}}};r.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(n,t,i,r,u){this.renderer.nodeShapeImpl(this.name,n,t,i,r,u)},intersectLine:function(n,t,r,u,f,e,o){return i.intersectLineEllipse(f,e,n,t,r/2+o,u/2+o)},checkPoint:function(n,t,i,r,u,f,e){return n-=f,t-=e,n/=r/2+i,t/=u/2+i,1>=n*n+t*t}}};r.generateRoundRectangle=function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:i.generateUnitNgonPointsFitToSquare(4,0),draw:function(n,t,i,r,u){this.renderer.nodeShapeImpl(this.name,n,t,i,r,u)},intersectLine:function(n,t,r,u,f,e,o){return i.roundRectangleIntersectLine(f,e,n,t,r,u,o)},checkPoint:function(n,t,r,u,f,e,o){var s=i.getRoundRectangleRadius(u,f),h;return i.pointInsidePolygon(n,t,this.points,e,o,u,f-2*s,[0,-1],r)?!0:i.pointInsidePolygon(n,t,this.points,e,o,u-2*s,f,[0,-1],r)?!0:(h=function(n,t,i,r,u,f,e){return n-=i,t-=r,n/=u/2+e,t/=f/2+e,1>=n*n+t*t},h(n,t,e-u/2+s,o-f/2+s,2*s,2*s,r)?!0:h(n,t,e+u/2-s,o-f/2+s,2*s,2*s,r)?!0:h(n,t,e+u/2-s,o+f/2-s,2*s,2*s,r)?!0:!!h(n,t,e-u/2+s,o+f/2-s,2*s,2*s,r))}}};r.registerNodeShapes=function(){var u=this.nodeShapes={},o=this,n;this.generateEllipse();this.generatePolygon("triangle",i.generateUnitNgonPointsFitToSquare(3,0));this.generatePolygon("rectangle",i.generateUnitNgonPointsFitToSquare(4,0));u.square=u.rectangle;this.generateRoundRectangle();this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]);this.generatePolygon("pentagon",i.generateUnitNgonPointsFitToSquare(5,0));this.generatePolygon("hexagon",i.generateUnitNgonPointsFitToSquare(6,0));this.generatePolygon("heptagon",i.generateUnitNgonPointsFitToSquare(7,0));this.generatePolygon("octagon",i.generateUnitNgonPointsFitToSquare(8,0));var t=new Array(20),e=i.generateUnitNgonPoints(5,0),r=i.generateUnitNgonPoints(5,Math.PI/5),f=.5*(3-Math.sqrt(5));for(f*=1.57,n=0;n<r.length/2;n++)r[2*n]*=f,r[2*n+1]*=f;for(n=0;5>n;n++)t[4*n]=e[2*n],t[4*n+1]=e[2*n+1],t[4*n+2]=r[2*n],t[4*n+3]=r[2*n+1];t=i.fitPolygonToSquare(t);this.generatePolygon("star",t);this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]);this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]);u.makePolygon=function(n){var t,r=n.join("$"),i="polygon-"+r;return(t=this[i])?t:o.generatePolygon(i,n)}};t.exports=r},{"../../../math":85}],63:[function(n,t){"use strict";var i=n("../../../util"),r={},u;r.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};r.redraw=function(n){n=n||i.staticEmptyObject();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0);void 0===t.lastRedrawTime&&(t.lastRedrawTime=0);void 0===t.lastDrawTime&&(t.lastDrawTime=0);t.requestedFrame=!0;t.renderOptions=n};r.beforeRender=function(n,t){if(!this.destroyed){t=t||0;var i=this.beforeRenderCallbacks;i.push({fn:n,priority:t});i.sort(function(n,t){return t.priority-n.priority})}};u=function(n,t,i){for(var u=n.beforeRenderCallbacks,r=0;r<u.length;r++)u[r].fn(t,i)};r.startRenderLoop=function(){var n=this,t;n.renderLoopStarted||(n.renderLoopStarted=!0,t=function(r){var e,o,f;n.destroyed||(n.requestedFrame&&!n.skipFrame?(u(n,!0,r),e=i.performanceNow(),n.render(n.renderOptions),o=n.lastDrawTime=i.performanceNow(),void 0===n.averageRedrawTime&&(n.averageRedrawTime=o-e),void 0===n.redrawCount&&(n.redrawCount=0),n.redrawCount++,void 0===n.redrawTotalTime&&(n.redrawTotalTime=0),f=o-e,n.redrawTotalTime+=f,n.lastRedrawTime=f,n.averageRedrawTime=n.averageRedrawTime/2+f/2,n.requestedFrame=!1):u(n,!1,r),n.skipFrame=!1,i.requestAnimationFrame(t))},i.requestAnimationFrame(t))};t.exports=r},{"../../../util":100}],64:[function(n,t){"use strict";var i,r={};r.arrowShapeImpl=function(n){return(i||(i={polygon:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n.lineTo(r.x,r.y)},"triangle-backcurve":function(n,t,i){for(var f,u,r=0;r<t.length;r++)u=t[r],0===r&&(f=u),n.lineTo(u.x,u.y);n.quadraticCurveTo(i.x,i.y,f.x,f.y)},"triangle-tee":function(n,t,i){var f,e,o,r,u;for(n.beginPath&&n.beginPath(),f=t,r=0;r<f.length;r++)u=f[r],n.lineTo(u.x,u.y);for(n.closePath&&n.closePath(),n.beginPath&&n.beginPath(),e=i,o=i[0],n.moveTo(o.x,o.y),r=0;r<e.length;r++)u=e[r],n.lineTo(u.x,u.y);n.closePath&&n.closePath()},circle:function(n,t,i,r){n.arc(t,i,r,0,2*Math.PI,!1)}}))[n]};t.exports=r},{}],65:[function(n,t){"use strict";var i={};i.drawEdge=function(n,t,i,r,u){var e=t._private.rscratch,a=this.usePaths(),f,o,h,l;if(!e.badLine&&!isNaN(e.allpts[0])&&t.visible()){i&&(f=i,n.translate(-f.x1,-f.y1));var v=t.pstyle("overlay-padding").pfValue,c=t.pstyle("overlay-opacity").value,s=t.pstyle("overlay-color").value;if(u){if(0===c)return;this.strokeStyle(n,s[0],s[1],s[2],c);n.lineCap="round";"self"!=e.edgeType||a||(n.lineCap="butt")}else o=t.pstyle("line-color").value,this.strokeStyle(n,o[0],o[1],o[2],t.pstyle("opacity").value),n.lineCap="butt";n.lineJoin="round";h=t.pstyle("width").pfValue+(u?2*v:0);l=u?"solid":t.pstyle("line-style").value;n.lineWidth=h;var y=t.pstyle("shadow-blur").pfValue,p=t.pstyle("shadow-opacity").value,w=t.pstyle("shadow-color").value,b=t.pstyle("shadow-offset-x").pfValue,k=t.pstyle("shadow-offset-y").pfValue;this.shadowStyle(n,w,u?0:p,y,b,k);this.drawEdgePath(t,n,e.allpts,l,h);this.drawArrowheads(n,t,u);this.shadowStyle(n,"transparent",0);u||this.drawEdge(n,t,!1,r,!0);this.drawElementText(n,t,r);i&&n.translate(f.x1,f.y1)}};i.drawEdgePath=function(n,t,i,r){var o,f=n._private.rscratch,e=t,h=!1,c=this.usePaths(),s,l,u;if(c&&(s=i.join("$"),l=f.pathCacheKey&&f.pathCacheKey===s,l?(o=t=f.pathCache,h=!0):(o=t=new Path2D,f.pathCacheKey=s,f.pathCache=o)),e.setLineDash)switch(r){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([6,3]);break;case"solid":e.setLineDash([])}if(!h&&!f.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(i[0],i[1]),f.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(u=2;u+3<i.length;u+=4)t.quadraticCurveTo(i[u],i[u+1],i[u+2],i[u+3]);break;case"straight":case"segments":case"haystack":for(u=2;u+1<i.length;u+=2)t.lineTo(i[u],i[u+1])}t=e;c?t.stroke(o):t.stroke();t.setLineDash&&t.setLineDash([])};i.drawArrowheads=function(n,t,i){if(!i){var r=t._private.rscratch,u="haystack"===r.edgeType;u||this.drawArrowhead(n,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle);this.drawArrowhead(n,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle);this.drawArrowhead(n,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle);u||this.drawArrowhead(n,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle)}};i.drawArrowhead=function(n,t,i,r,u,f){var e,s,o;if(!(isNaN(r)||null==r||isNaN(u)||null==u||isNaN(f)||null==f)&&(e=this,s=t.pstyle(i+"-arrow-shape").value,"none"!==s)){var a=n.globalCompositeOperation,l="hollow"===t.pstyle(i+"-arrow-fill").value?"both":"filled",h=t.pstyle(i+"-arrow-fill").value,c=t.pstyle("opacity").value;"half-triangle-overshot"===s&&(h="hollow",l="hollow");1===c&&"hollow"!==h||(n.globalCompositeOperation="destination-out",e.fillStyle(n,255,255,255,1),e.strokeStyle(n,255,255,255,1),e.drawArrowShape(t,i,n,l,t.pstyle("width").pfValue,t.pstyle(i+"-arrow-shape").value,r,u,f),n.globalCompositeOperation=a);o=t.pstyle(i+"-arrow-color").value;e.fillStyle(n,o[0],o[1],o[2],c);e.strokeStyle(n,o[0],o[1],o[2],c);e.drawArrowShape(t,i,n,h,t.pstyle("width").pfValue,t.pstyle(i+"-arrow-shape").value,r,u,f)}};i.drawArrowShape=function(n,t,i,r,u,f,e,o,s){var c,b=this,l=this.usePaths(),h=n._private.rscratch,y=!1,k=i,d={x:e,y:o},p=this.getArrowWidth(u),a=b.arrowShapes[f],v,w;l&&(v=p+"$"+f+"$"+s+"$"+e+"$"+o,h.arrowPathCacheKey=h.arrowPathCacheKey||{},h.arrowPathCache=h.arrowPathCache||{},w=h.arrowPathCacheKey[t]===v,w?(c=i=h.arrowPathCache[t],y=!0):(c=i=new Path2D,h.arrowPathCacheKey[t]=v,h.arrowPathCache[t]=c));i.beginPath&&i.beginPath();y||a.draw(i,p,s,d);!a.leavePathOpen&&i.closePath&&i.closePath();i=k;"filled"!==r&&"both"!==r||(l?i.fill(c):i.fill());"hollow"!==r&&"both"!==r||(i.lineWidth=a.matchEdgeWidth?u:1,i.lineJoin="miter",l?i.stroke(c):i.stroke())};t.exports=i},{}],66:[function(n,t){"use strict";var r=n("../../../math"),i={};i.drawElement=function(n,t,i,r){var u=this;t.isNode()?u.drawNode(n,t,i,r):u.drawEdge(n,t,i,r)};i.drawCachedElement=function(n,t,i,u){var o=this,f=t.boundingBox(),e;0!==f.w&&0!==f.h&&(!u||r.boundingBoxesIntersect(f,u))&&(e=o.data.eleTxrCache.getElement(t,f,i),e?n.drawImage(e.texture.canvas,e.x,0,e.width,e.height,f.x1,f.y1,f.w,f.h):o.drawElement(n,t))};i.drawElements=function(n,t){for(var u,r=this,i=0;i<t.length;i++)u=t[i],r.drawElement(n,u)};i.drawCachedElements=function(n,t,i,r){for(var e,f=this,u=0;u<t.length;u++)e=t[u],f.drawCachedElement(n,e,i,r)};i.drawCachedNodes=function(n,t,i,r){for(var f,e=this,u=0;u<t.length;u++)f=t[u],f.isNode()&&e.drawCachedElement(n,f,i,r)};i.drawLayeredElements=function(n,t,i,r){var s=this,e=s.data.lyrTxrCache.getLayers(t,i),f,o,u;if(e)for(f=0;f<e.length;f++)o=e[f],u=o.bb,0!==u.w&&0!==u.h&&n.drawImage(o.canvas,u.x1,u.y1,u.w,u.h);else s.drawCachedElements(n,t,i,r)};t.exports=i},{"../../../math":85}],67:[function(n,t){"use strict";var i={};i.safeDrawImage=function(n,t,i,r,u,f,e,o,s,h){var c=this;try{n.drawImage(t,i,r,u,f,e,o,s,h)}catch(l){c.redrawHint("eles",!0);c.redrawHint("drag",!0);c.drawingImage=!0;c.redraw()}};i.drawInscribedImage=function(n,t,i){var c=this,l=i._private.position.x,a=i._private.position.y,g=i.pstyle("background-fit").value,b=i.pstyle("background-position-x"),k=i.pstyle("background-position-y"),nt=i.pstyle("background-repeat").value,f=i.width(),e=i.height(),d=i._private.rscratch,ut=i.pstyle("background-clip").value,tt="node"===ut,ft=i.pstyle("background-image-opacity").value,y=t.width||t.cachedW,p=t.height||t.cachedH,v,o,s,h,it,rt;null!=y&&null!=p||(document.body.appendChild(t),y=t.cachedW=t.width||t.offsetWidth,p=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var r=y,u=p,w=i.pstyle("background-width");"auto"!==w.value&&(r="%"===w.units?w.value/100*f:w.pfValue);v=i.pstyle("background-height");("auto"!==v.value&&(u="%"===v.units?v.value/100*e:v.pfValue),0!==r&&0!==u)&&("contain"===g?(o=Math.min(f/r,e/u),r*=o,u*=o):"cover"===g&&(o=Math.max(f/r,e/u),r*=o,u*=o),s=l-f/2,s+="%"===b.units?(f-r)*b.value/100:b.pfValue,h=a-e/2,h+="%"===k.units?(e-u)*k.value/100:k.pfValue,d.pathCache&&(s-=l,h-=a,l=0,a=0),it=n.globalAlpha,(n.globalAlpha=ft,"no-repeat"===nt)?(tt&&(n.save(),d.pathCache?n.clip(d.pathCache):(c.nodeShapes[c.getNodeShape(i)].draw(n,l,a,f,e),n.clip())),c.safeDrawImage(n,t,0,0,y,p,s,h,r,u),tt&&n.restore()):(rt=n.createPattern(t,nt),n.fillStyle=rt,c.nodeShapes[c.getNodeShape(i)].draw(n,l,a,f,e),n.translate(s,h),n.fill(),n.translate(-s,-h)),n.globalAlpha=it)};t.exports=i},{}],68:[function(n,t){"use strict";function u(n,t,i,r,u,f){var f=f||5;n.beginPath();n.moveTo(t+f,i);n.lineTo(t+r-f,i);n.quadraticCurveTo(t+r,i,t+r,i+f);n.lineTo(t+r,i+u-f);n.quadraticCurveTo(t+r,i+u,t+r-f,i+u);n.lineTo(t+f,i+u);n.quadraticCurveTo(t,i+u,t,i+u-f);n.lineTo(t,i+f);n.quadraticCurveTo(t,i,t+f,i);n.closePath();n.fill()}var r=n("../../../util"),f=n("../../../math"),i={};i.eleTextBiggerThanMin=function(n,t){var i,r;if(!t){var u=n.cy().zoom(),e=this.getPixelRatio(),o=Math.ceil(f.log2(u*e));t=Math.pow(2,o)}return i=n.pstyle("font-size").pfValue*t,r=n.pstyle("min-zoomed-font-size").pfValue,!(r>i)};i.drawElementText=function(n,t,i){var u=this,r,f;if(void 0===i){if(!u.eleTextBiggerThanMin(t))return}else if(!i)return;if(t.isNode()){if(r=t.pstyle("label"),!r||!r.value)return;f=t.pstyle("text-halign").strValue;t.pstyle("text-valign").strValue;switch(f){case"left":n.textAlign="right";break;case"right":n.textAlign="left";break;default:n.textAlign="center"}n.textBaseline="bottom"}else{var r=t.pstyle("label"),e=t.pstyle("source-label"),o=t.pstyle("target-label");if(!(r&&r.value||e&&e.value||o&&o.value))return;n.textAlign="center";n.textBaseline="bottom"}u.drawText(n,t);t.isEdge()&&(u.drawText(n,t,"source"),u.drawText(n,t,"target"))};i.drawNodeText=i.drawEdgeText=i.drawElementText;i.getFontCache=function(n){var t,i;for(this.fontCaches=this.fontCaches||[],i=0;i<this.fontCaches.length;i++)if(t=this.fontCaches[i],t.context===n)return t;return t={context:n},this.fontCaches.push(t),t};i.setupTextStyle=function(n,t){var o=t.effectiveOpacity(),s=t.pstyle("font-style").strValue,h=t.pstyle("font-size").pfValue+"px",c=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,u=t.pstyle("text-opacity").value*t.pstyle("opacity").value*o,a=t.pstyle("text-outline-opacity").value*u,i=t.pstyle("color").value,r=t.pstyle("text-outline-color").value,v=t.pstyle("text-shadow-blur").pfValue,y=t.pstyle("text-shadow-opacity").value,p=t.pstyle("text-shadow-color").value,w=t.pstyle("text-shadow-offset-x").pfValue,b=t.pstyle("text-shadow-offset-y").pfValue,f=t._private.fontKey,e=this.getFontCache(n);e.key!==f&&(n.font=s+" "+l+" "+h+" "+c,e.key=f);n.lineJoin="round";this.fillStyle(n,i[0],i[1],i[2],u);this.strokeStyle(n,r[0],r[1],r[2],a);this.shadowStyle(n,p,y,v,w,b)};i.drawText=function(n,t,i){var yt=t._private,c=yt.rscratch,tt=t.effectiveOpacity(),a,d,rt,ut,s,y,lt,g,at,p,w,h,nt,b;if(0!==tt&&0!==t.pstyle("text-opacity").value){var e=r.getPrefixedProperty(c,"labelX",i),f=r.getPrefixedProperty(c,"labelY",i),k=this.getLabelText(t,i);if(null!=k&&""!==k&&!isNaN(e)&&!isNaN(f)){this.setupTextStyle(n,t);var st=i?i+"-":"",l=r.getPrefixedProperty(c,"labelWidth",i),o=r.getPrefixedProperty(c,"labelHeight",i),pt=r.getPrefixedProperty(c,"labelAngle",i),wt=t.pstyle(st+"text-margin-x").pfValue,bt=t.pstyle(st+"text-margin-y").pfValue,ht=t.isEdge(),ct=(t.isNode(),t.pstyle("text-halign").value),it=t.pstyle("text-valign").value;ht&&(ct="center",it="center");e+=wt;f+=bt;d=t.pstyle("text-rotation");(a="autorotate"===d.strValue?ht?pt:0:"none"===d.strValue?0:d.pfValue,0!==a)&&(rt=e,ut=f,n.translate(rt,ut),n.rotate(a),e=0,f=0);switch(it){case"center":f+=o/2;break;case"bottom":f+=o}var ft=t.pstyle("text-background-opacity").value,et=t.pstyle("text-border-opacity").value,v=t.pstyle("text-border-width").pfValue;if(ft>0||v>0&&et>0){s=e;switch(ct){case"left":s-=l;break;case"center":s-=l/2}if(y=f-o,ft>0&&(lt=n.fillStyle,g=t.pstyle("text-background-color").value,n.fillStyle="rgba("+g[0]+","+g[1]+","+g[2]+","+ft*tt+")",at=t.pstyle("text-background-shape").strValue,"roundrectangle"==at?u(n,s,y,l,o,2):n.fillRect(s,y,l,o),n.fillStyle=lt),v>0&&et>0){var kt=n.strokeStyle,dt=n.lineWidth,ot=t.pstyle("text-border-color").value,vt=t.pstyle("text-border-style").value;if(n.strokeStyle="rgba("+ot[0]+","+ot[1]+","+ot[2]+","+et*tt+")",n.lineWidth=v,n.setLineDash)switch(vt){case"dotted":n.setLineDash([1,1]);break;case"dashed":n.setLineDash([4,2]);break;case"double":n.lineWidth=v/4;n.setLineDash([]);break;case"solid":n.setLineDash([])}(n.strokeRect(s,y,l,o),"double"===vt)&&(p=v/2,n.strokeRect(s+p,y+p,l-2*p,o-2*p));n.setLineDash&&n.setLineDash([]);n.lineWidth=dt;n.strokeStyle=kt}}if(w=2*t.pstyle("text-outline-width").pfValue,w>0&&(n.lineWidth=w),"wrap"===t.pstyle("text-wrap").value){h=r.getPrefixedProperty(c,"labelWrapCachedLines",i);nt=o/h.length;switch(it){case"top":f-=(h.length-1)*nt;break;case"center":case"bottom":f-=(h.length-1)*nt}for(b=0;b<h.length;b++)w>0&&n.strokeText(h[b],e,f),n.fillText(h[b],e,f),f+=nt}else w>0&&n.strokeText(k,e,f),n.fillText(k,e,f);0!==a&&(n.rotate(-a),n.translate(-rt,-ut));this.shadowStyle(n,"transparent",0)}}};t.exports=i},{"../../../math":85,"../../../util":100}],69:[function(n,t){"use strict";var r=n("../../../is"),i={};i.drawNode=function(n,t,i,u){var c,l,s=this,v=t._private.rscratch,y=t._private,f=f||y.position,a,p,d,w,ot,st,tt,ct,it,b,h,rt,lt;if(r.number(f.x)&&r.number(f.y)&&t.visible()){var e,k=t.effectiveOpacity(),o=this.usePaths(),ft=!1,et=t.pstyle("padding").pfValue;c=t.width()+2*et;l=t.height()+2*et;n.lineWidth=t.pstyle("border-width").pfValue;i&&(a=i,n.translate(-a.x1,-a.y1));d=t.pstyle("background-image");w=d.value[2]||d.value[1];void 0!==w&&(ot=t.pstyle("background-image-crossorigin"),p=this.getCachedImage(w,ot,function(){t.trigger("background");s.redrawHint("eles",!0);s.redrawHint("drag",!0);s.drawingImage=!0;s.redraw()}),st=y.backgrounding,y.backgrounding=!p.complete,st!==y.backgrounding&&t.updateStyle(!1));var g=t.pstyle("background-color").value,nt=t.pstyle("border-color").value,ht=t.pstyle("border-style").value;this.fillStyle(n,g[0],g[1],g[2],t.pstyle("background-opacity").value*k);this.strokeStyle(n,nt[0],nt[1],nt[2],t.pstyle("border-opacity").value*k);var yt=t.pstyle("shadow-blur").pfValue,pt=t.pstyle("shadow-opacity").value,wt=t.pstyle("shadow-color").value,bt=t.pstyle("shadow-offset-x").pfValue,kt=t.pstyle("shadow-offset-y").pfValue;if(this.shadowStyle(n,wt,pt,yt,bt,kt),n.lineJoin="miter",n.setLineDash)switch(ht){case"dotted":n.setLineDash([1,1]);break;case"dashed":n.setLineDash([4,2]);break;case"solid":case"double":n.setLineDash([])}tt=t.pstyle("shape").strValue;ct=t.pstyle("shape-polygon-points").pfValue;o&&(it=tt+"$"+c+"$"+l+("polygon"===tt?"$"+ct.join("$"):""),n.translate(f.x,f.y),v.pathCacheKey===it?(e=v.pathCache,ft=!0):(e=new Path2D,v.pathCacheKey=it,v.pathCache=e));ft||(b=f,o&&(b={x:0,y:0}),s.nodeShapes[this.getNodeShape(t)].draw(e||n,b.x,b.y,c,l));o?n.fill(e):n.fill();this.shadowStyle(n,"transparent",0);void 0!==w&&p.complete&&this.drawInscribedImage(n,p,t);h=t.pstyle("background-blacken").value;rt=t.pstyle("border-width").pfValue;(this.hasPie(t)&&(this.drawPie(n,t,k),0===h&&0===rt||o||s.nodeShapes[this.getNodeShape(t)].draw(n,f.x,f.y,c,l)),h>0?(this.fillStyle(n,0,0,0,h),o?n.fill(e):n.fill()):0>h&&(this.fillStyle(n,255,255,255,-h),o?n.fill(e):n.fill()),rt>0&&(o?n.stroke(e):n.stroke(),"double"===ht))&&(n.lineWidth=t.pstyle("border-width").pfValue/3,lt=n.globalCompositeOperation,n.globalCompositeOperation="destination-out",o?n.stroke(e):n.stroke(),n.globalCompositeOperation=lt);o&&n.translate(-f.x,-f.y);n.setLineDash&&n.setLineDash([]);s.drawElementText(n,t,u);var at=t.pstyle("overlay-padding").pfValue,vt=t.pstyle("overlay-opacity").value,ut=t.pstyle("overlay-color").value;vt>0&&(this.fillStyle(n,ut[0],ut[1],ut[2],vt),s.nodeShapes.roundrectangle.draw(n,t._private.position.x,t._private.position.y,c+2*at,l+2*at),n.fill());i&&n.translate(a.x1,a.y1)}};i.hasPie=function(n){return n=n[0],n._private.hasPie};i.drawPie=function(n,t,i,r){var f;t=t[0];var y=t._private,p=t.cy().style(),o=t.pstyle("pie-size"),w=t.width(),b=t.height(),r=r||y.position,h=r.x,c=r.y,s=Math.min(w,b)/2,u=0,k=this.usePaths();for(k&&(h=0,c=0),"%"===o.units?s=s*o.value/100:void 0!==o.pfValue&&(s=o.pfValue/2),f=1;f<=p.pieBackgroundN;f++){var a=t.pstyle("pie-"+f+"-background-size").value,l=t.pstyle("pie-"+f+"-background-color").value,d=t.pstyle("pie-"+f+"-background-opacity").value*i,e=a/100;e+u>1&&(e=1-u);var v=1.5*Math.PI+2*Math.PI*u,g=2*Math.PI*e,nt=v+g;0===a||u>=1||u+e>1||(n.beginPath(),n.moveTo(h,c),n.arc(h,c,s,v,nt),n.closePath(),this.fillStyle(n,l[0],l[1],l[2],d),n.fill(),u+=e)}};t.exports=i},{"../../../is":83}],70:[function(n,t){"use strict";var i={},r=n("../../../util"),u=100;i.getPixelRatio=function(){var n=this.data.contexts[0],t;return null!=this.forcedPixelRatio?this.forcedPixelRatio:(t=n.backingStorePixelRatio||n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,(window.devicePixelRatio||1)/t)};i.paintCache=function(n){for(var t,i=this.paintCaches=this.paintCaches||[],u=!0,r=0;r<i.length;r++)if(t=i[r],t.context===n){u=!1;break}return u&&(t={context:n},i.push(t)),t};i.fillStyle=function(n,t,i,r,u){n.fillStyle="rgba("+t+","+i+","+r+","+u+")"};i.strokeStyle=function(n,t,i,r,u){n.strokeStyle="rgba("+t+","+i+","+r+","+u+")"};i.shadowStyle=function(n,t,i,r,u,f){var e=this.cy.zoom();i>0?(n.shadowBlur=r*e,n.shadowColor="rgba("+t[0]+","+t[1]+","+t[2]+","+i+")",n.shadowOffsetX=u*e,n.shadowOffsetY=f*e):(n.shadowBlur=0,n.shadowColor="transparent",n.shadowOffsetX=0,n.shadowOffsetY=0)};i.matchCanvasSize=function(n){var t=this,e=t.data,l=t.findContainerClientCoords(),o=l[2],s=l[3],h=t.getPixelRatio(),a=t.motionBlurPxRatio,i,u,f,c,r;if(n!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&n!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(h=a),u=o*h,f=s*h,u!==t.canvasWidth||f!==t.canvasHeight){for(t.fontCaches=null,c=e.canvasContainer,c.style.width=o+"px",c.style.height=s+"px",r=0;r<t.CANVAS_LAYERS;r++)i=e.canvases[r],i.width=u,i.height=f,i.style.width=o+"px",i.style.height=s+"px";for(r=0;r<t.BUFFER_COUNT;r++)i=e.bufferCanvases[r],i.width=u,i.height=f,i.style.width=o+"px",i.style.height=s+"px";t.textureMult=1;1>=h&&(i=e.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,i.width=u*t.textureMult,i.height=f*t.textureMult);t.canvasWidth=u;t.canvasHeight=f}};i.renderTo=function(n,t,i,r){this.render({forcedContext:n,forcedZoom:t,forcedPan:i,drawAllLayers:!0,forcedPxRatio:r})};i.render=function(n){function ht(n,i,r,u,f){var e=n.globalCompositeOperation;n.globalCompositeOperation="destination-out";t.fillStyle(n,255,255,255,t.motionBlurTransparency);n.fillRect(i,r,u,f);n.globalCompositeOperation=e}function it(n,i){var r,u,f,e;t.clearingMotionBlur||n!==v.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&n!==v.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(r=ut,u=pt,f=t.canvasWidth,e=t.canvasHeight):(r={x:b.x*y,y:b.y*y},u=p*y,f=t.canvasWidth*y,e=t.canvasHeight*y);n.setTransform(1,0,0,1,0,0);"motionBlur"===i?ht(n,0,0,f,e):l||void 0!==i&&!i||n.clearRect(0,0,f,e);w||(n.translate(r.x,r.y),n.scale(u,u));g&&n.translate(g.x,g.y);d&&n.scale(d,d)}var lt,nt,wt,et,f,ot,bt,tt,i,at,p,vt,k,yt,dt;n=n||r.staticEmptyObject();var l=n.forcedContext,w=n.drawAllLayers,ct=n.drawOnlyNodeLayer,d=n.forcedZoom,g=n.forcedPan,t=this,h=void 0===n.forcedPxRatio?this.getPixelRatio():n.forcedPxRatio,a=t.cy,v=t.data,e=v.canvasNeedsRedraw,rt=t.textureOnViewport&&!l&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),s=void 0!==n.motionBlur?n.motionBlur:t.motionBlur,y=t.motionBlurPxRatio,ni=a.hasCompoundNodes(),ti=t.hoverData.draggingEles,ii=!(!t.hoverData.selecting&&!t.touchData.selecting);s=s&&!l&&t.motionBlurEnabled&&!ii;lt=s;l||(t.prevPxRatio!==h&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=h);!l&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout);s&&(null==t.mbFrames&&(t.mbFrames=0),t.drawingImage||t.mbFrames++,t.mbFrames<3&&(lt=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry));t.clearingMotionBlur&&(t.motionBlurPxRatio=1);t.textureDrawLastFrame&&!rt&&(e[t.NODE]=!0,e[t.SELECT_BOX]=!0);var o=a.style()._private.coreStyle,p=a.zoom(),pt=void 0!==d?d:p,b=a.pan(),ut={x:b.x,y:b.y},f={zoom:p,pan:{x:b.x,y:b.y}},ft=t.prevViewport,ri=void 0===ft||f.zoom!==ft.zoom||f.pan.x!==ft.pan.x||f.pan.y!==ft.pan.y;if(ri||ti&&!ni||(t.motionBlurPxRatio=1),g&&(ut=g),pt*=h,ut.x*=h,ut.y*=h,nt=t.getCachedZSortedEles(),rt||(t.textureDrawLastFrame=!1),rt){t.textureDrawLastFrame=!0;t.textureCache||(t.textureCache={},wt=t.textureCache.bb=a.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER],et=t.data.bufferContexts[t.TEXTURE_BUFFER],et.setTransform(1,0,0,1,0,0),et.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:et,drawOnlyNodeLayer:!0,forcedPxRatio:h*t.textureMult}),f=t.textureCache.viewport={zoom:a.zoom(),pan:a.pan(),width:t.canvasWidth,height:t.canvasHeight},f.mpan={x:(0-f.pan.x)/f.zoom,y:(0-f.pan.y)/f.zoom});e[t.DRAG]=!1;e[t.NODE]=!1;var i=v.contexts[t.NODE],ui=t.textureCache.texture,f=t.textureCache.viewport;wt=t.textureCache.bb;i.setTransform(1,0,0,1,0,0);s?ht(i,0,0,f.width,f.height):i.clearRect(0,0,f.width,f.height);ot=o["outside-texture-bg-color"].value;bt=o["outside-texture-bg-opacity"].value;t.fillStyle(i,ot[0],ot[1],ot[2],bt);i.fillRect(0,0,f.width,f.height);p=a.zoom();it(i,!1);i.clearRect(f.mpan.x,f.mpan.y,f.width/f.zoom/h,f.height/f.zoom/h);i.drawImage(ui,f.mpan.x,f.mpan.y,f.width/f.zoom/h,f.height/f.zoom/h)}else t.textureOnViewport&&!l&&(t.textureCache=null);var st=a.extent(),fi=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles,kt=t.hideEdgesOnViewport&&fi,c=[];if(c[t.NODE]=!e[t.NODE]&&s&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,c[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),c[t.DRAG]=!e[t.DRAG]&&s&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,c[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),e[t.NODE]||w||ct||c[t.NODE]){var tt=s&&!c[t.NODE]&&1!==y,i=l||(tt?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:v.contexts[t.NODE]),ei=s&&!tt?"motionBlur":void 0;it(i,ei);kt?t.drawCachedNodes(i,nt.nondrag,h,st):t.drawLayeredElements(i,nt.nondrag,h,st);w||s||(e[t.NODE]=!1)}if(!ct&&(e[t.DRAG]||w||c[t.DRAG])&&(tt=s&&!c[t.DRAG]&&1!==y,i=l||(tt?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:v.contexts[t.DRAG]),it(i,s&&!tt?"motionBlur":void 0),kt?t.drawCachedNodes(i,nt.drag,h,st):t.drawCachedElements(i,nt.drag,h,st),w||s||(e[t.DRAG]=!1)),(t.showFps||!ct&&e[t.SELECT_BOX]&&!w)&&(i=l||v.contexts[t.SELECT_BOX],(it(i),1==t.selection[4]&&(t.hoverData.selecting||t.touchData.selecting))&&(p=t.cy.zoom(),at=o["selection-box-border-width"].value/p,i.lineWidth=at,i.fillStyle="rgba("+o["selection-box-color"].value[0]+","+o["selection-box-color"].value[1]+","+o["selection-box-color"].value[2]+","+o["selection-box-opacity"].value+")",i.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),at>0&&(i.strokeStyle="rgba("+o["selection-box-border-color"].value[0]+","+o["selection-box-border-color"].value[1]+","+o["selection-box-border-color"].value[2]+","+o["selection-box-opacity"].value+")",i.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))),v.bgActivePosistion&&!t.hoverData.selecting&&(p=t.cy.zoom(),vt=v.bgActivePosistion,i.fillStyle="rgba("+o["active-bg-color"].value[0]+","+o["active-bg-color"].value[1]+","+o["active-bg-color"].value[2]+","+o["active-bg-opacity"].value+")",i.beginPath(),i.arc(vt.x,vt.y,o["active-bg-size"].pfValue/p,0,2*Math.PI),i.fill()),k=t.lastRedrawTime,t.showFps&&k&&(k=Math.round(k),yt=Math.round(1e3/k),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(255, 0, 0, 0.75)",i.strokeStyle="rgba(255, 0, 0, 0.75)",i.lineWidth=1,i.fillText("1 frame = "+k+" ms = "+yt+" fps",0,20),dt=60,i.strokeRect(0,30,250,20),i.fillRect(0,30,250*Math.min(yt/dt,1),20)),w||(e[t.SELECT_BOX]=!1)),s&&1!==y){var oi=v.contexts[t.NODE],si=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],hi=v.contexts[t.DRAG],ci=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],gt=function(n,i,r){n.setTransform(1,0,0,1,0,0);r||!lt?n.clearRect(0,0,t.canvasWidth,t.canvasHeight):ht(n,0,0,t.canvasWidth,t.canvasHeight);var u=y;n.drawImage(i,0,0,t.canvasWidth*u,t.canvasHeight*u,0,0,t.canvasWidth,t.canvasHeight)};(e[t.NODE]||c[t.NODE])&&(gt(oi,si,c[t.NODE]),e[t.NODE]=!1);(e[t.DRAG]||c[t.DRAG])&&(gt(hi,ci,c[t.DRAG]),e[t.DRAG]=!1)}t.prevViewport=f;t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0);s&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null;t.clearedForMotionBlur[t.NODE]=!1;t.clearedForMotionBlur[t.DRAG]=!1;t.motionBlur=!1;t.clearingMotionBlur=!rt;t.mbFrames=0;e[t.NODE]=!0;e[t.DRAG]=!0;t.redraw()},u));t.drawingImage=!1;l||t.initrender||(t.initrender=!0,a.trigger("initrender"));l||a.trigger("render")};t.exports=i},{"../../../util":100}],71:[function(n,t){"use strict";var h=n("../../../math"),r={};r.drawPolygonPath=function(n,t,i,r,u,f){var o=r/2,s=u/2,e;for(n.beginPath&&n.beginPath(),n.moveTo(t+o*f[0],i+s*f[1]),e=1;e<f.length/2;e++)n.lineTo(t+o*f[2*e],i+s*f[2*e+1]);n.closePath()};r.drawRoundRectanglePath=function(n,t,i,r,u){var e=r/2,f=u/2,o=h.getRoundRectangleRadius(r,u);n.beginPath&&n.beginPath();n.moveTo(t,i-f);n.arcTo(t+e,i-f,t+e,i,o);n.arcTo(t+e,i+f,t,i+f,o);n.arcTo(t-e,i+f,t-e,i,o);n.arcTo(t-e,i-f,t,i-f,o);n.lineTo(t,i-f);n.closePath()};for(var e=Math.sin(0),o=Math.cos(0),u={},f={},s=Math.PI/40,i=0*Math.PI;i<2*Math.PI;i+=s)u[i]=Math.sin(i),f[i]=Math.cos(i);r.drawEllipsePath=function(n,t,i,r,h){if(n.beginPath&&n.beginPath(),n.ellipse)n.ellipse(t,i,r/2,h/2,0,0,2*Math.PI);else for(var l,a,v=r/2,y=h/2,c=0*Math.PI;c<2*Math.PI;c+=s)l=t-v*u[c]*e+v*f[c]*o,a=i+y*f[c]*e+y*u[c]*o,0===c?n.moveTo(l,a):n.lineTo(l,a);n.closePath()};t.exports=r},{"../../../math":85}],72:[function(n,t){"use strict";var r=n("../../../math"),u=n("../../../util"),l=n("../../../heap"),a=n("./texture-cache-defs"),h=25,e=50,o=-4,s=2,v=3.99,y=8,p=1024,w=1024,b=1024,k=.5,d=.8,g=10,nt=!1,tt=!1,it=1,f={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},c=function(n){var t=this;t.renderer=n;t.onDequeues=[];t.setupDequeueing()},i=c.prototype;i.reasons=f;i.getTextureQueue=function(n){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[n]=t.eleImgCaches[n]||[]};i.getRetiredTextureQueue=function(n){var t=this,i=t.eleImgCaches.retired=t.eleImgCaches.retired||{};return i[n]=i[n]||[]};i.getElementQueue=function(){var n=this;return n.eleCacheQueue=n.eleCacheQueue||new l(function(n,t){return t.reqs-n.reqs})};i.getElementIdToQueue=function(){var n=this;return n.eleIdToCacheQueue=n.eleIdToCacheQueue||{}};i.getElement=function(n,t,i,u,c){var d=this,ht=this.renderer,yt=n._private.rscratch,pt=ht.cy.zoom(),ot,it,at,vt,a,ut;if(0===t.w||0===t.h)return null;if(null==u&&(u=Math.ceil(r.log2(pt*i))),o>u)u=o;else if(pt>=v||u>s)return null;var p=Math.pow(2,u),rt=t.h*p,g=t.w*p,et=yt.imgCaches=yt.imgCaches||{},ft=et[u];if(ft)return ft;if(ot=h>=rt?h:e>=rt?e:Math.ceil(rt/e)*e,rt>b||g>w||!nt&&n.isEdge()||!tt&&n.isParent())return null;var st=d.getTextureQueue(ot),l=st[st.length-2],wt=function(){return d.recycleTexture(ot,g)||d.addTexture(ot,g)};l||(l=st[st.length-1]);l||(l=wt());l.width-l.usedWidth<g&&(l=wt());for(var k,ct=ht.eleTextBiggerThanMin(n,p),lt=function(n){return n&&n.scaledLabelShown===ct},kt=c&&c===f.dequeue,bt=c&&c===f.highQuality,dt=c&&c===f.downscale,a=u+1;s>=a;a++)if(ut=et[a],ut){k=ut;break}if(it=k&&k.level===u+1?k:null,at=function(){l.context.drawImage(it.texture.canvas,it.x,0,it.width,it.height,l.usedWidth,0,g,rt)},lt(it))at();else if(lt(k)){if(!bt)return d.queueElement(n,t,k.level-1),k;for(a=k.level;a>u;a--)it=d.getElement(n,t,i,a,f.downscale);at()}else{if(!kt&&!bt&&!dt)for(a=u-1;a>=o;a--)if(ut=et[a],ut){vt=ut;break}if(lt(vt))return d.queueElement(n,t,u),vt;l.context.translate(l.usedWidth,0);l.context.scale(p,p);ht.drawElement(l.context,n,t,ct);l.context.scale(1/p,1/p);l.context.translate(-l.usedWidth,0)}return ft=et[u]={ele:n,x:l.usedWidth,texture:l,level:u,scale:p,width:g,height:rt,scaledLabelShown:ct},l.usedWidth+=Math.ceil(g+y),l.eleCaches.push(ft),d.checkTextureFullness(l),ft};i.invalidateElement=function(n){var e=this,f=n._private.rscratch.imgCaches,t,i,r;if(f)for(t=o;s>=t;t++)i=f[t],i&&(r=i.texture,r.invalidatedWidth+=i.width,f[t]=null,u.removeFromArray(r.eleCaches,i),e.checkTextureUtility(r))};i.checkTextureUtility=function(n){n.invalidatedWidth>=k*n.width&&this.retireTexture(n)};i.checkTextureFullness=function(n){var t=this,i=t.getTextureQueue(n.height);n.usedWidth/n.width>d&&n.fullnessChecks>=g?u.removeFromArray(i,n):n.fullnessChecks++};i.retireTexture=function(n){var r=this,f=n.height,h=r.getTextureQueue(f),t,i,s;for(u.removeFromArray(h,n),n.retired=!0,t=n.eleCaches,i=0;i<t.length;i++){var e=t[i],c=e.ele,l=e.level,o=c._private.rscratch.imgCaches;o&&(o[l]=null)}u.clearArray(t);s=r.getRetiredTextureQueue(f);s.push(n)};i.addTexture=function(n,t){var r=this,u=r.getTextureQueue(n),i={};return u.push(i),i.eleCaches=[],i.height=n,i.width=Math.max(p,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=document.createElement("canvas"),i.canvas.width=i.width,i.canvas.height=i.height,i.context=i.canvas.getContext("2d"),i};i.recycleTexture=function(n,t){for(var i,e=this,o=e.getTextureQueue(n),r=e.getRetiredTextureQueue(n),f=0;f<r.length;f++)if(i=r[f],i.width>=t)return i.retired=!1,i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,u.clearArray(i.eleCaches),i.context.clearRect(0,0,i.width,i.height),u.removeFromArray(r,i),o.push(i),i};i.queueElement=function(n,t,i){var e=this,o=e.getElementQueue(),s=e.getElementIdToQueue(),h=n.id(),u=s[h],f;u?(u.level=Math.max(u.level,i),u.reqs++,o.updateItem(u)):(f={ele:n,bb:t,position:r.copyPosition(n.position()),level:i,reqs:1},n.isEdge()&&(f.positions={source:r.copyPosition(n.source().position()),target:r.copyPosition(n.target().position())}),o.push(f),s[h]=f)};i.dequeue=function(n){for(var t,h,i,u=this,e=u.getElementQueue(),c=u.getElementIdToQueue(),o=[],s=0;it>s&&e.size()>0;s++)t=e.pop(),c[t.ele.id()]=null,o.push(t),i=t.ele,h=(!i.isEdge()||r.arePositionsSame(i.source().position(),t.positions.source)&&r.arePositionsSame(i.target().position(),t.positions.target))&&r.arePositionsSame(i.position(),t.position)?t.bb:i.boundingBox(),u.getElement(t.ele,h,n,t.level,f.dequeue);return o};i.onDequeue=function(n){this.onDequeues.push(n)};i.offDequeue=function(n){u.removeFromArray(this.onDequeues,n)};i.setupDequeueing=a.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(n,t,i){return n.dequeue(t,i)},onDeqd:function(n,t){for(var r,i=0;i<n.onDequeues.length;i++)r=n.onDequeues[i],r(t)},shouldRedraw:function(n,t,i,u){for(var e,f=0;f<t.length;f++)if(e=t[f].bb,r.boundingBoxesIntersect(e,u))return!0;return!1},priority:function(n){return n.renderer.beforeRenderPriorities.eleTxrDeq}});t.exports=c},{"../../../heap":81,"../../../math":85,"../../../util":100,"./texture-cache-defs":77}],73:[function(n,t){"use strict";var r=n("../../../is"),i={};i.createBuffer=function(n,t){var i=document.createElement("canvas");return i.width=n,i.height=t,[i,i.getContext("2d")]};i.bufferCanvasImage=function(n){var s=this.cy,b=s.mutableElements(),o=b.boundingBox(),p=this.findContainerClientCoords(),u=n.full?Math.ceil(o.w):p[2],f=n.full?Math.ceil(o.h):p[3],w=r.number(n.maxWidth)||r.number(n.maxHeight),h=this.getPixelRatio(),t=1,c,l,e,i,a,v,y;return void 0!==n.scale?(u*=n.scale,f*=n.scale,t=n.scale):w&&(c=1/0,l=1/0,r.number(n.maxWidth)&&(c=t*n.maxWidth/u),r.number(n.maxHeight)&&(l=t*n.maxHeight/f),t=Math.min(c,l),u*=t,f*=t),w||(u*=h,f*=h,t*=h),e=document.createElement("canvas"),e.width=u,e.height=f,e.style.width=u+"px",e.style.height=f+"px",i=e.getContext("2d"),u>0&&f>0&&(i.clearRect(0,0,u,f),n.bg&&(i.fillStyle=n.bg,i.rect(0,0,u,f),i.fill()),i.globalCompositeOperation="source-over",a=this.getCachedZSortedEles(),n.full?(i.translate(-o.x1*t,-o.y1*t),i.scale(t,t),this.drawElements(i,a)):(v=s.pan(),y={x:v.x*t,y:v.y*t},t*=s.zoom(),i.translate(y.x,y.y),i.scale(t,t),this.drawElements(i,a))),e};i.png=function(n){return this.bufferCanvasImage(n).toDataURL("image/png")};i.jpg=function(n){return this.bufferCanvasImage(n).toDataURL("image/jpeg")};t.exports=i},{"../../../is":83}],74:[function(n,t){"use strict";function r(n){var t=this,f,h,u,r;for(t.data={canvases:new Array(i.CANVAS_LAYERS),contexts:new Array(i.CANVAS_LAYERS),canvasNeedsRedraw:new Array(i.CANVAS_LAYERS),bufferCanvases:new Array(i.BUFFER_COUNT),bufferContexts:new Array(i.CANVAS_LAYERS)},t.data.canvasContainer=document.createElement("div"),f=t.data.canvasContainer.style,t.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),f.position="relative",f.zIndex="0",f.overflow="hidden",h=n.cy.container(),h.appendChild(t.data.canvasContainer),h.setAttribute("style",(h.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);"),r=0;r<i.CANVAS_LAYERS;r++)u=t.data.canvases[r]=document.createElement("canvas"),t.data.contexts[r]=u.getContext("2d"),u.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(e.ms()?" -ms-touch-action: none; touch-action: none; ":"")),u.style.position="absolute",u.setAttribute("data-id","layer"+r),u.style.zIndex=String(i.CANVAS_LAYERS-r),t.data.canvasContainer.appendChild(u),t.data.canvasNeedsRedraw[r]=!1;for(t.data.topCanvas=t.data.canvases[0],t.data.canvases[i.NODE].setAttribute("data-id","layer"+i.NODE+"-node"),t.data.canvases[i.SELECT_BOX].setAttribute("data-id","layer"+i.SELECT_BOX+"-selectbox"),t.data.canvases[i.DRAG].setAttribute("data-id","layer"+i.DRAG+"-drag"),r=0;r<i.BUFFER_COUNT;r++)t.data.bufferCanvases[r]=document.createElement("canvas"),t.data.bufferContexts[r]=t.data.bufferCanvases[r].getContext("2d"),t.data.bufferCanvases[r].style.position="absolute",t.data.bufferCanvases[r].setAttribute("data-id","buffer"+r),t.data.bufferCanvases[r].style.zIndex=String(-r-1),t.data.bufferCanvases[r].style.visibility="hidden";t.pathsEnabled=!0;t.data.eleTxrCache=new o(t);t.data.lyrTxrCache=new s(t,t.data.eleTxrCache);t.onUpdateEleCalcs(function(n,i){for(var r=0;r<i.length;r++){var u=i[r],e=u._private.rstyle,f=e.dirtyEvents;u.isNode()&&f&&1===f.length&&f.position||t.data.eleTxrCache.invalidateElement(u)}i.length>0&&t.data.lyrTxrCache.invalidateElements(i)})}var f=n("../../../util"),e=n("../../../is"),o=n("./ele-texture-cache"),s=n("./layered-texture-cache"),h=r,i=r.prototype,u;i.CANVAS_LAYERS=3;i.SELECT_BOX=0;i.DRAG=1;i.NODE=2;i.BUFFER_COUNT=3;i.TEXTURE_BUFFER=0;i.MOTIONBLUR_BUFFER_NODE=1;i.MOTIONBLUR_BUFFER_DRAG=2;i.redrawHint=function(n,t){var r=this;switch(n){case"eles":r.data.canvasNeedsRedraw[i.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[i.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[i.SELECT_BOX]=t}};u="undefined"!=typeof Path2D;i.path2dEnabled=function(n){return void 0===n?this.pathsEnabled:void(this.pathsEnabled=!!n)};i.usePaths=function(){return u&&this.pathsEnabled};[n("./arrow-shapes"),n("./drawing-elements"),n("./drawing-edges"),n("./drawing-images"),n("./drawing-label-text"),n("./drawing-nodes"),n("./drawing-redraw"),n("./drawing-shapes"),n("./export-image"),n("./node-shapes")].forEach(function(n){f.extend(i,n)});t.exports=h},{"../../../is":83,"../../../util":100,"./arrow-shapes":64,"./drawing-edges":65,"./drawing-elements":66,"./drawing-images":67,"./drawing-label-text":68,"./drawing-nodes":69,"./drawing-redraw":70,"./drawing-shapes":71,"./ele-texture-cache":72,"./export-image":73,"./layered-texture-cache":75,"./node-shapes":76}],75:[function(n,t){"use strict";function o(n,t){null!=n.imageSmoothingEnabled?n.imageSmoothingEnabled=t:(n.webkitImageSmoothingEnabled=t,n.mozImageSmoothingEnabled=t,n.msImageSmoothingEnabled=t)}var r=n("../../../util"),f=n("../../../math"),v=n("../../../heap"),y=n("../../../is"),p=n("./texture-cache-defs"),w=1,u=-4,e=2,b=3.99,k=50,s=!0,d=1,h=250,g=16e6,nt=!0,tt=!0,c=!0,l=function(n,t){var i=this,f=i.renderer=n,u;i.layersByLevel={};i.firstGet=!0;i.lastInvalidationTime=r.performanceNow()-2*h;i.skipping=!1;f.beforeRender(function(n,t){i.skipping=t-i.lastInvalidationTime<=h?!0:!1});u=function(n,t){return t.reqs-n.reqs};i.layersQueue=new v(u);i.eleTxrCache=t;i.setupEleCacheInvalidation();i.setupDequeueing()},i=l.prototype,a=0,it=Math.pow(2,53)-1;i.makeLayer=function(n,t){var i=Math.pow(2,t),f=Math.ceil(n.w*i),e=Math.ceil(n.h*i),r=document.createElement("canvas");r.width=f;r.height=e;var u={id:a=++a%it,bb:n,level:t,width:f,height:e,canvas:r,context:r.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=u.context,s=-u.bb.x1,h=-u.bb.y1;return o.scale(i,i),o.translate(s,h),u};i.getLayers=function(n,t,i){var o=this,ot=o.renderer,st=ot.cy,p=st.zoom(),k=o.firstGet,tt,it;if(o.firstGet=!1,null==i)if(i=Math.ceil(f.log2(p*t)),u>i)i=u;else if(p>=b||i>e)return null;o.validateLayersElesOrdering(i,n);var c,l,v=o.layersByLevel,d=Math.pow(2,i),h=v[i]=v[i]||[],ht=o.levelIsComplete(i,n),ct=function(){var c=function(t){return o.validateLayersElesOrdering(t,n),o.levelIsComplete(t,n)?(l=v[t],!0):void 0},s=function(n){if(!l)for(var t=i+n;t>=u&&e>=t&&!c(t);t+=n);},t,f;for(s(1),s(-1),t=h.length-1;t>=0;t--)f=h[t],f.invalid&&r.removeFromArray(h,f)};if(ht)return h;if(ct(),tt=function(){if(!c){c=f.makeBoundingBox();for(var t=0;t<n.length;t++)f.updateBoundingBox(c,n[t].boundingBox())}return c},it=function(n){var r,u,t,f;return(n=n||{},r=n.after,tt(),u=c.w*d*c.h*d,u>g)?null:(t=o.makeLayer(c,i),null!=r?(f=h.indexOf(r)+1,h.splice(f,0,t)):(void 0===n.insert||n.insert)&&h.unshift(t),t)},o.skipping&&!k)return null;for(var s=null,lt=n.length/w,rt=nt&&!k,y=0;y<n.length;y++){var a=n[y],ut=a._private.rscratch,ft=ut.imgLayerCaches=ut.imgLayerCaches||{},et=ft[i];if(et)s=et;else{if((!s||s.eles.length>=lt||!f.boundingBoxInBoundingBox(s.bb,a.boundingBox()))&&(s=it({insert:!0,after:s}),!s))return null;l||rt?o.queueLayer(s,a):o.drawEleInLayer(s,a,i,t);s.eles.push(a);ft[i]=s}}return l?l:rt?null:h};i.getEleLevelForLayerLevel=function(n){return n};i.drawEleInLayer=function(n,t,i,r){var l=this,v=this.renderer,e=n.context,u=t.boundingBox(),h,a,f;0!==u.w&&0!==u.h&&(h=l.eleTxrCache,a=tt?h.reasons.highQuality:void 0,i=l.getEleLevelForLayerLevel(i,r),f=c?h.getElement(t,u,null,i,a):null,f?(s&&o(e,!1),e.drawImage(f.texture.canvas,f.x,0,f.width,f.height,u.x1,u.y1,u.w,u.h),s&&o(e,!0)):v.drawElement(e,t))};i.levelIsComplete=function(n,t){var e=this,i=e.layersByLevel[n],f,r,u;if(!i||0===i.length)return!1;for(f=0,r=0;r<i.length;r++){if((u=i[r],u.reqs>0)||u.invalid)return!1;f+=u.eles.length}return f===t.length};i.validateLayersElesOrdering=function(n,t){var f=this.layersByLevel[n],u,o,i;if(f)for(u=0;u<f.length;u++){for(var r=f[u],e=-1,i=0;i<t.length;i++)if(r.eles[0]===t[i]){e=i;break}if(0>e)this.invalidateLayer(r);else for(o=e,i=0;i<r.eles.length;i++)if(r.eles[i]!==t[o+i]){this.invalidateLayer(r);break}}};i.updateElementsInLayers=function(n,t){for(var r,l=this,s=y.element(n[0]),i=0;i<n.length;i++)for(var f=s?null:n[i],h=s?n[i]:n[i].ele,c=h._private.rscratch,a=c.imgLayerCaches=c.imgLayerCaches||{},o=u;e>=o;o++)r=a[o],r&&(f&&l.getEleLevelForLayerLevel(r.level)!==f.level||t(r,h,f))};i.haveLayers=function(){for(var t,r=this,i=!1,n=u;e>=n;n++)if(t=r.layersByLevel[n],t&&t.length>0){i=!0;break}return i};i.invalidateElements=function(n){var t=this;t.lastInvalidationTime=r.performanceNow();0!==n.length&&t.haveLayers()&&t.updateElementsInLayers(n,function(n){t.invalidateLayer(n)})};i.invalidateLayer=function(n){var t,i;if(this.lastInvalidationTime=r.performanceNow(),!n.invalid){var u=n.level,f=n.eles,e=this.layersByLevel[u];for(r.removeFromArray(e,n),n.elesQueue=[],n.invalid=!0,n.replacement&&(n.replacement.invalid=!0),t=0;t<f.length;t++)i=f[t]._private.rscratch.imgLayerCaches,i&&(i[u]=null)}};i.refineElementTextures=function(n){var t=this;t.updateElementsInLayers(n,function(n){var i=n.replacement,r;if(i||(i=n.replacement=t.makeLayer(n.bb,n.level),i.replaces=n,i.eles=n.eles),!i.reqs)for(r=0;r<i.eles.length;r++)t.queueLayer(i,i.eles[r])})};i.setupEleCacheInvalidation=function(){var t=this,n=[],i;if(c){i=r.debounce(function(){t.refineElementTextures(n);n=[]},k);t.eleTxrCache.onDequeue(function(t){for(var r=0;r<t.length;r++)n.push(t[r]);i()})}};i.queueLayer=function(n,t){var f=this,r=f.layersQueue,i=n.elesQueue,u=i.hasId=i.hasId||{};if(!n.replacement){if(t){if(u[t.id()])return;i.push(t);u[t.id()]=!0}n.reqs?(n.reqs++,r.updateItem(n)):(n.reqs=1,r.push(n))}};i.dequeue=function(n){for(var t,f,r=this,i=r.layersQueue,u=[],e=0;d>e&&0!==i.size();)t=i.peek(),t.replacement?i.pop():t.replaces&&t!==t.replaces.replacement?i.pop():t.invalid?i.pop():(f=t.elesQueue.shift(),f&&(r.drawEleInLayer(t,f,t.level,n),e++),0===u.length&&u.push(!0),0===t.elesQueue.length&&(i.pop(),t.reqs=0,t.replaces&&r.applyLayerReplacement(t),r.requestRedraw()));return u};i.applyLayerReplacement=function(n){var u=this,f=u.layersByLevel[n.level],e=n.replaces,o=f.indexOf(e),t,i,r;if(!(0>o||e.invalid)){for(f[o]=n,t=0;t<n.eles.length;t++)i=n.eles[t]._private,r=i.imgLayerCaches=i.imgLayerCaches||{},r&&(r[n.level]=n);u.requestRedraw()}};i.requestRedraw=r.debounce(function(){var n=this.renderer;n.redrawHint("eles",!0);n.redrawHint("drag",!0);n.redraw()},100);i.setupDequeueing=p.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(n,t){return n.dequeue(t)},onDeqd:r.noop,shouldRedraw:r.trueify,priority:function(n){return n.renderer.beforeRenderPriorities.lyrTxrDeq}});t.exports=l},{"../../../heap":81,"../../../is":83,"../../../math":85,"../../../util":100,"./texture-cache-defs":77}],76:[function(n,t){"use strict";var i={};i.nodeShapeImpl=function(n,t,i,r,u,f,e){switch(n){case"ellipse":return this.drawEllipsePath(t,i,r,u,f);case"polygon":return this.drawPolygonPath(t,i,r,u,f,e);case"roundrectangle":return this.drawRoundRectanglePath(t,i,r,u,f)}};t.exports=i},{}],77:[function(n,t){"use strict";var i=n("../../../util"),r=1e3/60;t.exports={setupDequeueing:function(n){return function(){var u=this,t=this.renderer;if(!u.dequeueingSetup){u.dequeueingSetup=!0;var f=i.debounce(function(){t.redrawHint("eles",!0);t.redrawHint("drag",!0);t.redraw()},n.deqRedrawThreshold),e=function(e,o){for(var k,h,c,d=i.performanceNow(),l=t.averageRedrawTime,a=t.lastRedrawTime,s=[],v=t.cy.extent(),y=t.getPixelRatio();;){var p=i.performanceNow(),w=p-d,b=p-o;if(r>a){if(k=r-(e?l:0),b>=n.deqFastCost*k)break}else if(e){if(w>=n.deqCost*a||w>=n.deqAvgCost*l)break}else if(b>=n.deqNoDrawCost*r)break;if(h=n.deq(u,y,v),!(h.length>0))break;for(c=0;c<h.length;c++)s.push(h[c])}s.length>0&&(n.onDeqd(u,s),!e&&n.shouldRedraw(u,s,y,v)&&f())},o=n.priority||i.noop;t.beforeRender(e,o(u))}}}}},{"../../../util":100}],78:[function(n,t){"use strict";t.exports=[{name:"null",impl:n("./null")},{name:"base",impl:n("./base")},{name:"canvas",impl:n("./canvas")}]},{"./base":60,"./canvas":74,"./null":79}],79:[function(n,t){"use strict";function i(n){this.options=n;this.notifications=0}var r=function(){};i.prototype={recalculateRenderedStyle:r,notify:function(){this.notifications++},init:r};t.exports=i},{}],80:[function(n,t){
/*! Weaver licensed under MIT (https://tldrlegal.com/license/mit-license), copyright Max Franz */
var e,i;"use strict";var s=n("./is"),o=n("./util"),h=n("./thread"),c=n("./promise"),r=n("./define"),f=function(t){var r,i;if(!(this instanceof f))return new f(t);if(this._private={pass:[]},r=4,s.number(t),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)t=navigator.hardwareConcurrency;else try{t=n("os").cpus().length}catch(u){t=r}for(i=0;t>i;i++)this[i]=new h;this.length=t},u=f.prototype;o.extend(u,{instanceString:function(){return"fabric"},require:function(n,t){for(var r,i=0;i<this.length;i++)r=this[i],r.require(n,t);return this},random:function(){var n=Math.round((this.length-1)*Math.random());return this[n]},run:function(n){var t=this._private.pass.shift();return this.random().pass(t).run(n)},message:function(n){return this.random().message(n)},broadcast:function(n){for(var i,t=0;t<this.length;t++)i=this[t],i.message(n);return this},stop:function(){for(var t,n=0;n<this.length;n++)t=this[n],t.stop();return this},pass:function(n){var t=this._private.pass;if(!s.array(n))throw"Only arrays may be used with fabric.pass()";return t.push(n),this},spreadSize:function(){var n=Math.ceil(this._private.pass[0].length/this.length);return Math.max(1,n)},spread:function(n){for(var f,i=this,e=i._private,o=i.spreadSize(),r=e.pass.shift().concat([]),u=[],t=0;t<this.length;t++){var s=this[t],h=r.splice(0,o),l=s.pass(h).run(n);if(u.push(l),f=0===r.length,f)break}return c.all(u).then(function(n){for(var r,t,f,u=[],e=0,i=0;i<n.length;i++)for(r=n[i],t=0;t<r.length;t++)f=r[t],u[e++]=f;return u})},map:function(n){var t=this;return t.require(n,"_$_$_fabmap"),t.spread(function(n){var t=[],r=resolve,i;for(resolve=function(n){t.push(n)},i=0;i<n.length;i++){var u=t.length,f=_$_$_fabmap(n[i]),e=u===t.length;e&&t.push(f)}return resolve=r,t})},filter:function(n){var i=this._private,t=i.pass[0];return this.map(n).then(function(n){for(var u,f,r=[],i=0;i<t.length;i++)u=t[i],f=n[i],f&&r.push(u);return r})},sort:function(n){var i=this,t=this._private.pass[0].length,r=this.spreadSize();return n=n||function(n,t){return t>n?-1:n>t?1:0},i.require(n,"_$_$_cmp"),i.spread(function(n){var t=n.sort(_$_$_cmp);resolve(t)}).then(function(i){for(var f,e=function(r,u,f){var s,h,e,l;u=Math.min(u,t);f=Math.min(f,t);for(var c=r,a=u,o=[],e=c;f>e;e++)s=i[r],h=i[u],a>r&&(u>=f||n(s,h)<=0)?(o.push(s),r++):(o.push(h),u++);for(e=0;e<o.length;e++)l=c+e,i[l]=o[e]},u=r;t>u;u*=2)for(f=0;t>f;f+=2*u)e(f,f+u,f+2*u);return i})}});e=function(n){return n=n||{},function(t,i){var r=this._private.pass.shift();return this.random().pass(r)[n.threadFn](t,i)}};o.extend(u,{randomMap:e({threadFn:"map"}),reduce:e({threadFn:"reduce"}),reduceRight:e({threadFn:"reduceRight"})});i=u;i.promise=i.run;i.terminate=i.halt=i.stop;i.include=i.require;o.extend(u,{on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),off:r.off(),trigger:r.trigger()});r.eventAliasesOn(u);t.exports=f},{"./define":44,"./is":83,"./promise":86,"./thread":98,"./util":100,os:void 0}],81:[function(n,t){
/*!
            Ported by Xueqiao Xu <xueqiaoxu@gmail.com>;
            PSF LICENSE AGREEMENT FOR PYTHON 2.7.2
            1. This LICENSE AGREEMENT is between the Python Software Foundation (“PSF”), and the Individual or Organization (“Licensee”) accessing and otherwise using Python 2.7.2 software in source or binary form and its associated documentation.
            2. Subject to the terms and conditions of this License Agreement, PSF hereby grants Licensee a nonexclusive, royalty-free, world-wide license to reproduce, analyze, test, perform and/or display publicly, prepare derivative works, distribute, and otherwise use Python 2.7.2 alone or in any derivative version, provided, however, that PSF’s License Agreement and PSF’s notice of copyright, i.e., “Copyright © 2001-2012 Python Software Foundation; All Rights Reserved” are retained in Python 2.7.2 alone or in any derivative version prepared by Licensee.
            3. In the event Licensee prepares a derivative work that is based on or incorporates Python 2.7.2 or any part thereof, and wants to make the derivative work available to others as provided herein, then Licensee hereby agrees to include in any such work a brief summary of the changes made to Python 2.7.2.
            4. PSF is making Python 2.7.2 available to Licensee on an “AS IS” basis. PSF MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED. BY WAY OF EXAMPLE, BUT NOT LIMITATION, PSF MAKES NO AND DISCLAIMS ANY REPRESENTATION OR WARRANTY OF MERCHANTABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF PYTHON 2.7.2 WILL NOT INFRINGE ANY THIRD PARTY RIGHTS.
            5. PSF SHALL NOT BE LIABLE TO LICENSEE OR ANY OTHER USERS OF PYTHON 2.7.2 FOR ANY INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES OR LOSS AS A RESULT OF MODIFYING, DISTRIBUTING, OR OTHERWISE USING PYTHON 2.7.2, OR ANY DERIVATIVE THEREOF, EVEN IF ADVISED OF THE POSSIBILITY THEREOF.
            6. This License Agreement will automatically terminate upon a material breach of its terms and conditions.
            7. Nothing in this License Agreement shall be deemed to create any relationship of agency, partnership, or joint venture between PSF and Licensee. This License Agreement does not grant permission to use PSF trademarks or trade name in a trademark sense to endorse or promote products or services of Licensee, or any third party.
            8. By copying, installing or otherwise using Python 2.7.2, Licensee agrees to be bound by the terms and conditions of this License Agreement.
            */
"use strict";var a,i,s,u,f,h,e,c,v,y,p,w,l,o,r;s=Math.floor;y=Math.min;i=function(n,t){return t>n?-1:n>t?1:0};v=function(n,t,r,u,f){var e;if(null==r&&(r=0),null==f&&(f=i),0>r)throw new Error("lo must be non-negative");for(null==u&&(u=n.length);u>r;)e=s((r+u)/2),f(t,n[e])<0?u=e:r=e+1;return[].splice.apply(n,[r,r-r].concat(t)),t};h=function(n,t,r){return null==r&&(r=i),n.push(t),o(n,0,n.length-1,r)};f=function(n,t){var u,f;return null==t&&(t=i),u=n.pop(),n.length?(f=n[0],n[0]=u,r(n,0,t)):f=u,f};c=function(n,t,u){var f;return null==u&&(u=i),f=n[0],n[0]=t,r(n,0,u),f};e=function(n,t,u){var f;return null==u&&(u=i),n.length&&u(n[0],t)<0&&(f=[n[0],t],t=f[0],n[0]=f[1],r(n,0,u)),t};u=function(n,t){var h,u,c,f,e,o;for(null==t&&(t=i),f=function(){o=[];for(var t=0,i=s(n.length/2);i>=0?i>t:t>i;i>=0?t++:t--)o.push(t);return o}.apply(this).reverse(),e=[],u=0,c=f.length;c>u;u++)h=f[u],e.push(r(n,h,t));return e};l=function(n,t,u){var f;return null==u&&(u=i),f=n.indexOf(t),-1!==f?(o(n,0,f,u),r(n,f,u)):void 0};p=function(n,t,r){var h,f,o,c,s;if(null==r&&(r=i),f=n.slice(0,t),!f.length)return f;for(u(f,r),s=n.slice(t),o=0,c=s.length;c>o;o++)h=s[o],e(f,h,r);return f.sort(r).reverse()};w=function(n,t,r){var c,w,l,e,h,o,b,a,s,p;if(null==r&&(r=i),10*t<=n.length){if(e=n.slice(0,t).sort(r),!e.length)return e;for(l=e[e.length-1],a=n.slice(t),h=0,b=a.length;b>h;h++)c=a[h],r(c,l)<0&&(v(e,c,0,null,r),e.pop(),l=e[e.length-1]);return e}for(u(n,r),p=[],w=o=0,s=y(t,n.length);s>=0?s>o:o>s;w=s>=0?++o:--o)p.push(f(n,r));return p};o=function(n,t,r,u){var f,e,o;for(null==u&&(u=i),f=n[r];r>t&&(o=r-1>>1,e=n[o],u(f,e)<0);)n[r]=e,r=o;return n[r]=f};r=function(n,t,r){var u,e,s,f,h;for(null==r&&(r=i),e=n.length,h=t,s=n[t],u=2*t+1;e>u;)f=u+1,e>f&&!(r(n[u],n[f])<0)&&(u=f),n[t]=n[u],t=u,u=2*t+1;return n[t]=s,o(n,h,t,r)};a=function(){function n(n){this.cmp=null!=n?n:i;this.nodes=[]}return n.push=h,n.pop=f,n.replace=c,n.pushpop=e,n.heapify=u,n.updateItem=l,n.nlargest=p,n.nsmallest=w,n.prototype.push=function(n){return h(this.nodes,n,this.cmp)},n.prototype.pop=function(){return f(this.nodes,this.cmp)},n.prototype.peek=function(){return this.nodes[0]},n.prototype.contains=function(n){return-1!==this.nodes.indexOf(n)},n.prototype.replace=function(n){return c(this.nodes,n,this.cmp)},n.prototype.pushpop=function(n){return e(this.nodes,n,this.cmp)},n.prototype.heapify=function(){return u(this.nodes,this.cmp)},n.prototype.updateItem=function(n){return l(this.nodes,n,this.cmp)},n.prototype.clear=function(){return this.nodes=[]},n.prototype.empty=function(){return 0===this.nodes.length},n.prototype.size=function(){return this.nodes.length},n.prototype.clone=function(){var t;return t=new n,t.nodes=this.nodes.slice(0),t},n.prototype.toArray=function(){return this.nodes.slice(0)},n.prototype.insert=n.prototype.push,n.prototype.top=n.prototype.peek,n.prototype.front=n.prototype.peek,n.prototype.has=n.prototype.contains,n.prototype.copy=n.prototype.clone,n}();t.exports=a},{}],82:[function(n,t){"use strict";n("./-preamble");var r=n("./window"),u=n("./is"),o=n("./core"),f=n("./extension"),e=n("./jquery-plugin"),s=n("./stylesheet"),h=n("./thread"),c=n("./fabric"),i=function(n){return void 0===n&&(n={}),u.plainObject(n)?new o(n):u.string(n)?f.apply(f,arguments):void 0};i.version=n("./version");r&&r.jQuery&&e(r.jQuery,i);i.registerJquery=function(n){e(n,i)};i.stylesheet=i.Stylesheet=s;i.thread=i.Thread=h;i.fabric=i.Fabric=c;t.exports=i},{"./-preamble":1,"./core":37,"./extension":46,"./fabric":80,"./is":83,"./jquery-plugin":84,"./stylesheet":97,"./thread":98,"./version":106,"./window":107}],83:[function(n,t){"use strict";var u=n("./window"),r=u?u.navigator:null,e=u?u.document:null,s="string",o="object",h="function",c=typeof HTMLElement,f=function(n){return n&&n.instanceString&&i.fn(n.instanceString)?n.instanceString():null},i={defined:function(n){return null!=n},string:function(n){return null!=n&&typeof n==s},fn:function(n){return null!=n&&typeof n===h},array:function(n){return Array.isArray?Array.isArray(n):null!=n&&n instanceof Array},plainObject:function(n){return null!=n&&typeof n===o&&!i.array(n)&&n.constructor===Object},object:function(n){return null!=n&&typeof n===o},number:function(n){return null!=n&&"number"==typeof n&&!isNaN(n)},integer:function(n){return i.number(n)&&Math.floor(n)===n},bool:function(n){return null!=n&&typeof n=="boolean"},htmlElement:function(n){if("undefined"!==c)return null!=n&&n instanceof HTMLElement},elementOrCollection:function(n){return i.element(n)||i.collection(n)},element:function(n){return"collection"===f(n)&&n._private.single},collection:function(n){return"collection"===f(n)&&!n._private.single},core:function(n){return"core"===f(n)},style:function(n){return"style"===f(n)},stylesheet:function(n){return"stylesheet"===f(n)},event:function(n){return"event"===f(n)},thread:function(n){return"thread"===f(n)},fabric:function(n){return"fabric"===f(n)},emptyString:function(n){return void 0===n||null===n?!0:!(""!==n&&!n.match(/^\s+$/))},nonemptyString:function(n){return!(!n||!i.string(n)||""===n||n.match(/^\s+$/))},domElement:function(n){return"undefined"==typeof HTMLElement?!1:n instanceof HTMLElement},boundingBox:function(n){return i.plainObject(n)&&i.number(n.x1)&&i.number(n.x2)&&i.number(n.y1)&&i.number(n.y2)},promise:function(n){return i.object(n)&&i.fn(n.then)},touch:function(){return u&&("ontouchstart"in u||u.DocumentTouch&&e instanceof DocumentTouch)},gecko:function(){return u&&("undefined"!=typeof InstallTrigger||"MozAppearance"in e.documentElement.style)},webkit:function(){return u&&("undefined"!=typeof webkitURL||"WebkitAppearance"in e.documentElement.style)},chromium:function(){return u&&"undefined"!=typeof chrome},khtml:function(){return r&&r.vendor.match(/kde/i)},khtmlEtc:function(){return i.khtml()||i.webkit()||i.chromium()},ms:function(){return r&&r.userAgent.match(/msie|trident|edge/i)},windows:function(){return r&&r.appVersion.match(/Win/i)},mac:function(){return r&&r.appVersion.match(/Mac/i)},linux:function(){return r&&r.appVersion.match(/Linux/i)},unix:function(){return r&&r.appVersion.match(/X11/i)}};t.exports=i},{"./window":107}],84:[function(n,t){"use strict";var r=n("./is"),i=function(n){return n[0]._cyreg=n[0]._cyreg||{}},u=function(n,t){n&&(n.fn.cytoscape||(n.fn.cytoscape=function(u){var f=n(this),o,e,s,h;if("get"===u)return i(f).cy;if(r.fn(u))o=u,e=i(f).cy,e&&e.isReady()?e.trigger("ready",[],o):(s=i(f),h=s.readies=s.readies||[],h.push(o));else if(r.plainObject(u))return f.each(function(){var i=n.extend({},u,{container:n(this)[0]});t(i)})},n.cytoscape=t,null==n.fn.cy&&null==n.cy&&(n.fn.cy=n.fn.cytoscape,n.cy=n.cytoscape)))};t.exports=u},{"./is":83}],85:[function(n,t){"use strict";var i={};i.arePositionsSame=function(n,t){return n.x===t.x&&n.y===t.y};i.copyPosition=function(n){return{x:n.x,y:n.y}};i.array2point=function(n){return{x:n[0],y:n[1]}};i.deg2rad=function(n){return Math.PI*n/180};i.log2=Math.log2||function(n){return Math.log(n)/Math.log(2)};i.signum=function(n){return n>0?1:0>n?-1:0};i.dist=function(n,t){return Math.sqrt(i.sqdist(n,t))};i.sqdist=function(n,t){var i=t.x-n.x,r=t.y-n.y;return i*i+r*r};i.qbezierAt=function(n,t,i,r){return(1-r)*(1-r)*n+2*(1-r)*r*t+r*r*i};i.qbezierPtAt=function(n,t,r,u){return{x:i.qbezierAt(n.x,t.x,r.x,u),y:i.qbezierAt(n.y,t.y,r.y,u)}};i.lineAt=function(n,t,r,u){var e={x:t.x-n.x,y:t.y-n.y},f=i.dist(n,t),o={x:e.x/f,y:e.y/f},u;return r=null==r?0:r,u=null!=u?u:r*f,{x:n.x+o.x*u,y:n.y+o.y*u}};i.lineAtDist=function(n,t,r){return i.lineAt(n,t,void 0,r)};i.triangleAngle=function(n,t,r){var u=i.dist(t,r),f=i.dist(n,r),e=i.dist(n,t);return Math.acos((u*u+f*f-e*e)/(2*u*f))};i.bound=function(n,t,i){return Math.max(n,Math.min(i,t))};i.makeBoundingBox=function(n){if(null==n)return{x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0),w:0,h:0};if(null!=n.x1&&null!=n.y1){if(null!=n.x2&&null!=n.y2&&n.x2>=n.x1&&n.y2>=n.y1)return{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,w:n.x2-n.x1,h:n.y2-n.y1};if(null!=n.w&&null!=n.h&&n.w>=0&&n.h>=0)return{x1:n.x1,y1:n.y1,x2:n.x1+n.w,y2:n.y1+n.h,w:n.w,h:n.h}}};i.updateBoundingBox=function(n,t){n.x1=Math.min(n.x1,t.x1);n.x2=Math.max(n.x2,t.x2);n.w=n.x2-n.x1;n.y1=Math.min(n.y1,t.y1);n.y2=Math.max(n.y2,t.y2);n.h=n.y2-n.y1};i.expandBoundingBox=function(n,t){return n.x1-=t,n.x2+=t,n.y1-=t,n.y2+=t,n.w=n.x2-n.x1,n.h=n.y2-n.y1,n};i.boundingBoxesIntersect=function(n,t){return n.x1>t.x2?!1:t.x1>n.x2?!1:n.x2<t.x1?!1:t.x2<n.x1?!1:n.y2<t.y1?!1:t.y2<n.y1?!1:n.y1>t.y2?!1:!(t.y1>n.y2)};i.inBoundingBox=function(n,t,i){return n.x1<=t&&t<=n.x2&&n.y1<=i&&i<=n.y2};i.pointInBoundingBox=function(n,t){return this.inBoundingBox(n,t.x,t.y)};i.boundingBoxInBoundingBox=function(n,t){return i.inBoundingBox(n,t.x1,t.y1)&&i.inBoundingBox(n,t.x2,t.y2)};i.roundRectangleIntersectLine=function(n,t,i,r,u,f,e){var h,s=this.getRoundRectangleRadius(u,f),c=u/2,l=f/2,rt=i-c+s-e,g=r-l-e,ut=i+c-s+e,ft=g,o,a,v,y,p,w,b,k,d;if(h=this.finiteLinesIntersect(n,t,i,r,rt,g,ut,ft,!1),h.length>0)return h;var nt=i+c+e,et=r-l+s-e,ot=nt,st=r+l-s+e;if(h=this.finiteLinesIntersect(n,t,i,r,nt,et,ot,st,!1),h.length>0)return h;var ht=i-c+s-e,tt=r+l+e,ct=i+c-s+e,lt=tt;if(h=this.finiteLinesIntersect(n,t,i,r,ht,tt,ct,lt,!1),h.length>0)return h;var it=i-c-e,at=r-l+s-e,vt=it,yt=r+l-s+e;return(h=this.finiteLinesIntersect(n,t,i,r,it,at,vt,yt,!1),h.length>0)?h:(a=i-c+s,v=r-l+s,o=this.intersectLineCircle(n,t,i,r,a,v,s+e),o.length>0&&o[0]<=a&&o[1]<=v)?[o[0],o[1]]:(y=i+c-s,p=r-l+s,o=this.intersectLineCircle(n,t,i,r,y,p,s+e),o.length>0&&o[0]>=y&&o[1]<=p)?[o[0],o[1]]:(w=i+c-s,b=r+l-s,o=this.intersectLineCircle(n,t,i,r,w,b,s+e),o.length>0&&o[0]>=w&&o[1]>=b)?[o[0],o[1]]:(k=i-c+s,d=r+l-s,o=this.intersectLineCircle(n,t,i,r,k,d,s+e),o.length>0&&o[0]<=k&&o[1]>=d?[o[0],o[1]]:[])};i.inLineVicinity=function(n,t,i,r,u,f,e){var o=e,s=Math.min(i,u),h=Math.max(i,u),c=Math.min(r,f),l=Math.max(r,f);return n>=s-o&&h+o>=n&&t>=c-o&&l+o>=t};i.inBezierVicinity=function(n,t,i,r,u,f,e,o,s){var h={x1:Math.min(i,e,u)-s,x2:Math.max(i,e,u)+s,y1:Math.min(r,o,f)-s,y2:Math.max(r,o,f)+s};return!(n<h.x1||n>h.x2||t<h.y1||t>h.y2)};i.solveCubic=function(n,t,i,r,u){t/=n;i/=n;r/=n;var a,e,o,l,s,h,f,c;return e=(3*i-t*t)/9,o=-(27*r)+t*(9*i-2*t*t),o/=54,a=e*e*e+o*o,u[1]=0,f=t/3,a>0?(s=o+Math.sqrt(a),s=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),h=o-Math.sqrt(a),h=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3),u[0]=-f+s+h,f+=(s+h)/2,u[4]=u[2]=-f,f=Math.sqrt(3)*(-h+s)/2,u[3]=f,void(u[5]=-f)):(u[5]=u[3]=0,0===a?(c=0>o?-Math.pow(-o,1/3):Math.pow(o,1/3),u[0]=-f+2*c,void(u[4]=u[2]=-(c+f))):(e=-e,l=e*e*e,l=Math.acos(o/Math.sqrt(l)),c=2*Math.sqrt(e),u[0]=-f+c*Math.cos(l/3),u[2]=-f+c*Math.cos((l+2*Math.PI)/3),void(u[4]=-f+c*Math.cos((l+4*Math.PI)/3))))};i.sqdistToQuadraticBezier=function(n,t,i,r,u,f,e,o){var b=1*i*i-4*i*u+2*i*e+4*u*u-4*u*e+e*e+r*r-4*r*f+2*r*o+4*f*f-4*f*o+o*o,k=9*i*u-3*i*i-3*i*e-6*u*u+3*u*e+9*r*f-3*r*r-3*r*o-6*f*f+3*f*o,d=3*i*i-6*i*u+i*e-i*n+2*u*u+2*u*n-e*n+3*r*r-6*r*f+r*o-r*t+2*f*f+2*f*t-o*t,g=1*i*u-i*i+i*n-u*n+r*f-r*r+r*t-f*t,a=[],y,p,w,v,l,h;this.solveCubic(b,k,d,g,a);for(var s=[],c=0;6>c;c+=2)Math.abs(a[c+1])<1e-7&&a[c]>=0&&a[c]<=1&&s.push(a[c]);for(s.push(1),s.push(0),l=-1,h=0;h<s.length;h++)p=Math.pow(1-s[h],2)*i+2*(1-s[h])*s[h]*u+s[h]*s[h]*e,w=Math.pow(1-s[h],2)*r+2*(1-s[h])*s[h]*f+s[h]*s[h]*o,v=Math.pow(p-n,2)+Math.pow(w-t,2),l>=0?l>v&&(l=v,y=s[h]):(l=v,y=s[h]);return l};i.sqdistToFiniteLine=function(n,t,i,r,u,f){var e=[n-i,t-r],o=[u-i,f-r],h=o[0]*o[0]+o[1]*o[1],c=e[0]*e[0]+e[1]*e[1],s=e[0]*o[0]+e[1]*o[1],l=s*s/h;return 0>s?c:l>h?(n-u)*(n-u)+(t-f)*(t-f):c-l};i.pointInsidePolygonPoints=function(n,t,i){for(var u,e,f,o,s,h=0,c=0,r=0;r<i.length/2;r++)if(u=i[2*r],e=i[2*r+1],r+1<i.length/2?(f=i[2*(r+1)],o=i[2*(r+1)+1]):(f=i[2*(r+1-i.length/2)],o=i[2*(r+1-i.length/2)+1]),u!=n||f!=n){if(!(u>=n&&n>=f||n>=u&&f>=n))continue;s=(n-u)/(f-u)*(o-e)+e;s>t&&h++;t>s&&c++}return h%2!=0};i.pointInsidePolygon=function(n,t,r,u,f,e,o,s,h){var l,a=new Array(r.length),v,w;null!=s[0]?(l=Math.atan(s[1]/s[0]),s[0]<0?l+=Math.PI/2:l=-l-Math.PI/2):l=s;for(var y=Math.cos(-l),p=Math.sin(-l),c=0;c<a.length/2;c++)a[2*c]=e/2*(r[2*c]*y-r[2*c+1]*p),a[2*c+1]=o/2*(r[2*c+1]*y+r[2*c]*p),a[2*c]+=u,a[2*c+1]+=f;return h>0?(w=this.expandPolygon(a,-h),v=this.joinLines(w)):v=a,i.pointInsidePolygonPoints(n,t,v)};i.joinLines=function(n){for(var s,h,c,l,r,u,f,e,o,i=new Array(n.length/2),t=0;t<n.length/4;t++)s=n[4*t],h=n[4*t+1],c=n[4*t+2],l=n[4*t+3],t<n.length/4-1?(r=n[4*(t+1)],u=n[4*(t+1)+1],f=n[4*(t+1)+2],e=n[4*(t+1)+3]):(r=n[0],u=n[1],f=n[2],e=n[3]),o=this.finiteLinesIntersect(s,h,c,l,r,u,f,e,!0),i[2*t]=o[0],i[2*t+1]=o[1];return i};i.expandPolygon=function(n,t){for(var e,o,u,f,r=new Array(2*n.length),i=0;i<n.length/2;i++){e=n[2*i];o=n[2*i+1];i<n.length/2-1?(u=n[2*(i+1)],f=n[2*(i+1)+1]):(u=n[0],f=n[1]);var s=f-o,h=-(u-e),c=Math.sqrt(s*s+h*h),l=s/c,a=h/c;r[4*i]=e+l*t;r[4*i+1]=o+a*t;r[4*i+2]=u+l*t;r[4*i+3]=f+a*t}return r};i.intersectLineEllipse=function(n,t,i,r,u,f){var e=i-n,o=r-t,s,h,c;return(e/=u,o/=f,s=Math.sqrt(e*e+o*o),h=s-1,0>h)?[]:(c=h/s,[(i-n)*c+n,(r-t)*c+t])};i.intersectLineCircle=function(n,t,i,r,u,f,e){var o=[i-n,r-t],nt=[u,f],h=[n-u,t-f],v=o[0]*o[0]+o[1]*o[1],c=2*(h[0]*o[0]+h[1]*o[1]),nt=h[0]*h[0]+h[1]*h[1]-e*e,y=c*c-4*v*nt,l,a,d,g;if(0>y)return[];var b=(-c+Math.sqrt(y))/(2*v),k=(-c-Math.sqrt(y))/(2*v),p=Math.min(b,k),w=Math.max(b,k),s=[];return(p>=0&&1>=p&&s.push(p),w>=0&&1>=w&&s.push(w),0===s.length)?[]:(l=s[0]*o[0]+n,a=s[0]*o[1]+t,s.length>1)?s[0]==s[1]?[l,a]:(d=s[1]*o[0]+n,g=s[1]*o[1]+t,[l,a,d,g]):[l,a]};i.findCircleNearPoint=function(n,t,i,r,u){var f=r-n,e=u-t,o=Math.sqrt(f*f+e*e),s=f/o,h=e/o;return[n+s*i,t+h*i]};i.findMaxSqDistanceToOrigin=function(n){for(var i,r=1e-6,t=0;t<n.length/2;t++)i=n[2*t]*n[2*t]+n[2*t+1]*n[2*t+1],i>r&&(r=i);return r};i.midOfThree=function(n,t,i){return n>=t&&i>=n||n>=i&&t>=n?n:t>=n&&i>=t||t>=i&&n>=t?t:i};i.finiteLinesIntersect=function(n,t,i,r,u,f,e,o,s){var v=n-u,c=i-n,y=e-u,p=t-f,l=r-t,w=o-f,b=y*p-w*v,k=c*p-l*v,a=w*c-y*l;if(0!==a){var h=b/a,d=k/a,g=.001,nt=0-g,tt=1+g;return h>=nt&&tt>=h&&d>=nt&&tt>=d?[n+h*c,t+h*l]:s?[n+h*c,t+h*l]:[]}return 0===b||0===k?this.midOfThree(n,i,e)===e?[e,o]:this.midOfThree(n,i,u)===u?[u,f]:this.midOfThree(u,e,i)===i?[i,r]:[]:[]};i.polygonIntersectLine=function(n,t,r,u,f,e,o,s){for(var c,w,b,k,v,y,a,p=[],l=new Array(r.length),h=0;h<l.length/2;h++)l[2*h]=r[2*h]*e+u,l[2*h+1]=r[2*h+1]*o+f;for(s>0?(w=i.expandPolygon(l,-s),c=i.joinLines(w)):c=l,h=0;h<c.length/2;h++)b=c[2*h],k=c[2*h+1],h<c.length/2-1?(v=c[2*(h+1)],y=c[2*(h+1)+1]):(v=c[0],y=c[1]),a=this.finiteLinesIntersect(n,t,u,f,b,k,v,y),0!==a.length&&p.push(a[0],a[1]);return p};i.shortenIntersection=function(n,t,i){var r=[n[0]-t[0],n[1]-t[1]],f=Math.sqrt(r[0]*r[0]+r[1]*r[1]),u=(f-i)/f;return 0>u&&(u=1e-5),[t[0]+u*r[0],t[1]+u*r[1]]};i.generateUnitNgonPointsFitToSquare=function(n,t){var r=i.generateUnitNgonPoints(n,t);return i.fitPolygonToSquare(r)};i.fitPolygonToSquare=function(n){for(var u,i,s=n.length/2,f=1/0,r=1/0,e=-(1/0),o=-(1/0),t=0;s>t;t++)u=n[2*t],i=n[2*t+1],f=Math.min(f,u),e=Math.max(e,u),r=Math.min(r,i),o=Math.max(o,i);for(var h=2/(e-f),c=2/(o-r),t=0;s>t;t++)u=n[2*t]=n[2*t]*h,i=n[2*t+1]=n[2*t+1]*c,f=Math.min(f,u),e=Math.max(e,u),r=Math.min(r,i),o=Math.max(o,i);if(-1>r)for(t=0;s>t;t++)i=n[2*t+1]=n[2*t+1]+(-1-r);return n};i.generateUnitNgonPoints=function(n,t){var f=2/n*Math.PI,e=n%2==0?Math.PI/2+f/2:Math.PI/2,u,o,s,r,i;for(e+=t,r=new Array(2*n),i=0;n>i;i++)u=i*f+e,o=r[2*i]=Math.cos(u),s=r[2*i+1]=Math.sin(-u);return r};i.getRoundRectangleRadius=function(n,t){return Math.min(n/4,t/4,8)};t.exports=i},{}],86:[function(n,t){
/*!
            Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
            Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
            Licensed under The MIT License (http://opensource.org/licenses/MIT)
            */
"use strict";var r=0,u=1,f=2,i=function(n){return this instanceof i?(this.id="Thenable/1.0.7",this.state=r,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof n&&n.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new i(n)};i.prototype={fulfill:function(n){return e(this,u,"fulfillValue",n)},reject:function(n){return e(this,f,"rejectReason",n)},then:function(n,t){var r=this,u=new i;return r.onFulfilled.push(h(n,u,"fulfill")),r.onRejected.push(h(t,u,"reject")),o(r),u.proxy}};var e=function(n,t,i,u){return n.state===r&&(n.state=t,n[i]=u,o(n)),n},o=function(n){n.state===u?s(n,"onFulfilled",n.fulfillValue):n.state===f&&s(n,"onRejected",n.rejectReason)},s=function(n,t,i){var r,u;0!==n[t].length&&(r=n[t],n[t]=[],u=function(){for(var n=0;n<r.length;n++)r[n](i)},"function"==typeof setImmediate?setImmediate(u):setTimeout(u,0))},h=function(n,t,i){return function(r){if("function"!=typeof n)t[i].call(t,r);else{var u;try{u=n(r)}catch(f){return void t.reject(f)}c(t,u)}}},c=function(n,t){var r,i;if(n===t||n.proxy===t)return void n.reject(new TypeError("cannot resolve promise with itself"));if("object"==typeof t&&null!==t||"function"==typeof t)try{r=t.then}catch(u){return void n.reject(u)}if("function"!=typeof r)n.fulfill(t);else{i=!1;try{r.call(t,function(r){i||(i=!0,r===t?n.reject(new TypeError("circular thenable chain")):c(n,r))},function(t){i||(i=!0,n.reject(t))})}catch(u){i||n.reject(u)}}};i.all=function(n){return new i(function(t,i){for(var u=new Array(n.length),f=0,e=function(i,r){u[i]=r;f++;f===n.length&&t(u)},r=0;r<n.length;r++)!function(t){var r=n[t],f=null!=r&&null!=r.then,u;f?r.then(function(n){e(t,n)},function(n){i(n)}):(u=r,e(t,u))}(r)})};i.resolve=function(n){return new i(function(t){t(n)})};i.reject=function(n){return new i(function(t,i){i(n)})};t.exports="undefined"!=typeof Promise?Promise:i},{}],87:[function(n,t){"use strict";var i=n("./is"),u=n("./util"),f=function(n){var r,h,tt,l,t,y,o,v,w,p,b,it,s,e,k,d,g,nt;if(!(this instanceof f))return new f(n);if(r=this,r._private={selectorText:null,invalid:!0},h=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},!n||i.string(n)&&n.match(/^\s*$/))r.length=0;else if("*"===n||"edge"===n||"node"===n)r[0]=h(),r[0].group="*"===n?n:n+"s",r[0].groupOnly=!0,r._private.invalid=!1,r._private.selectorText=n,r.length=1;else if(i.elementOrCollection(n))tt=n.collection(),r[0]=h(),r[0].collection=tt,r.length=1;else if(i.fn(n))r[0]=h(),r[0].filter=n,r.length=1;else{if(!i.string(n))return void u.error("A selector must be created from a string; found "+n);l=null;t={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:u.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};t.variable="(?:[\\w-]|(?:\\\\"+t.metaChar+"))+";t.value=t.string+"|"+t.number;t.className=t.variable;t.id=t.variable;for(var a=function(n){return n.replace(new RegExp("\\\\("+t.metaChar+")","g"),function(n,t){return t})},y=t.comparatorOp.split("|"),o=0;o<y.length;o++)v=y[o],t.comparatorOp+="|@"+v;for(y=t.comparatorOp.split("|"),o=0;o<y.length;o++)v=y[o],v.indexOf("!")>=0||"="!==v&&(t.comparatorOp+="|\\!"+v);w=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(n){this.group="*"===n?n:n+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(n){this.colonSelectors.push(n)}},{name:"id",query:!0,regex:"\\#("+t.id+")",populate:function(n){this.ids.push(a(n))}},{name:"className",query:!0,regex:"\\.("+t.className+")",populate:function(n){this.classes.push(a(n))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+t.variable+")\\s*\\]",populate:function(n){this.data.push({field:a(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+t.variable+")\\s*("+t.comparatorOp+")\\s*("+t.value+")\\s*\\]",populate:function(n,i,r){var u=null!=new RegExp("^"+t.string+"$").exec(r);r=u?r.substring(1,r.length-1):parseFloat(r);this.data.push({field:a(n),operator:i,value:r})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+t.boolOp+")\\s*("+t.variable+")\\s*\\]",populate:function(n,t){this.data.push({field:a(t),operator:n})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+t.meta+")\\s*("+t.comparatorOp+")\\s*("+t.number+")\\s*\\]\\]",populate:function(n,t,i){this.meta.push({field:a(n),operator:t,value:parseFloat(i)})}},{name:"nextQuery",separator:!0,regex:t.separator,populate:function(){r[++o]=h();l=null}},{name:"child",separator:!0,regex:t.child,populate:function(){var n=h();n.parent=this;n.subject=l;r[o]=n}},{name:"descendant",separator:!0,regex:t.descendant,populate:function(){var n=h();n.ancestor=this;n.subject=l;r[o]=n}},{name:"subject",modifier:!0,regex:t.subject,populate:function(){return null!=l&&this.subject!=this?(u.error("Redefinition of subject in selector `"+n+"`"),!1):(l=this,void(this.subject=this))}}];r._private.selectorText=n;var c=n,o=0,rt=function(n){for(var e,o,s,t,f,u,h,r=0;r<w.length;r++)if(t=w[r],f=t.name,(!i.fn(n)||n(f,t))&&(u=c.match(new RegExp("^"+t.regex)),null!=u)){o=u;e=t;s=f;h=u[0];c=c.substring(h.length);break}return{expr:e,match:o,name:s}},ut=function(){var n=c.match(/^\s+/),t;n&&(t=n[0],c=c.substring(t.length))};for(r[0]=h(),ut();;){if(p=rt(),null==p.expr)return void u.error("The selector `"+n+"`is invalid");for(b=[],s=1;s<p.match.length;s++)b.push(p.match[s]);if(it=p.expr.populate.apply(r[o],b),it===!1)return;if(c.match(/^\s*$/))break}for(r.length=o+1,s=0;s<r.length;s++)if(e=r[s],null!=e.subject){for(;e.subject!=e;)if(null!=e.parent)k=e.parent,d=e,d.parent=null,k.child=d,e=k;else{if(null==e.ancestor){u.error("When adjusting references for the selector `"+e+"`, neither parent nor ancestor was found");break}g=e.ancestor;nt=e;nt.ancestor=null;g.descendant=nt;e=g}r[s]=e.subject}}r._private.invalid=!1},r=f.prototype,e;r.size=function(){return this.length};r.eq=function(n){return this[n]};e=function(n,t){var f=t._private,l,o,a,v,s,u,y,c,p,w,b,h;if(n.groupOnly)return"*"===n.group||n.group===f.group;if(null!=n.group&&"*"!=n.group&&n.group!=f.group)return!1;for(var k=t.cy(),r=!0,u=0;u<n.colonSelectors.length;u++){l=n.colonSelectors[u];switch(l){case":selected":r=t.selected();break;case":unselected":r=!t.selected();break;case":selectable":r=t.selectable();break;case":unselectable":r=!t.selectable();break;case":locked":r=t.locked();break;case":unlocked":r=!t.locked();break;case":visible":r=t.visible();break;case":hidden":r=!t.visible();break;case":transparent":r=t.transparent();break;case":grabbed":r=t.grabbed();break;case":free":r=!t.grabbed();break;case":removed":r=t.removed();break;case":inside":r=!t.removed();break;case":grabbable":r=t.grabbable();break;case":ungrabbable":r=!t.grabbable();break;case":animated":r=t.animated();break;case":unanimated":r=!t.animated();break;case":parent":r=t.isNode()&&t.children().nonempty();break;case":child":case":nonorphan":r=t.isNode()&&t.parent().nonempty();break;case":orphan":r=t.isNode()&&t.parent().empty();break;case":loop":r=t.isEdge()&&t.data("source")===t.data("target");break;case":simple":r=t.isEdge()&&t.data("source")!==t.data("target");break;case":active":r=t.active();break;case":inactive":r=!t.active();break;case":touch":r=i.touch();break;case":backgrounding":r=t.backgrounding();break;case":nonbackgrounding":r=!t.backgrounding()}if(!r)break}if(!r)return!1;for(o=!0,u=0;u<n.ids.length;u++)if(a=n.ids[u],v=f.data.id,o=o&&a==v,!o)break;if(!o)return!1;for(s=!0,u=0;u<n.classes.length;u++)if(y=n.classes[u],s=s&&t.hasClass(y),!s)break;return s?(c=function(t){for(var y,h,a=!0,l=0;l<n[t.name].length;l++){var r,v=n[t.name][l],u=v.operator,e=v.value,c=v.field;if(null!=u&&null!=e){var f=t.fieldValue(c),o=i.string(f)||i.number(f)?""+f:"",s=""+e,p=!1;u.indexOf("@")>=0&&(o=o.toLowerCase(),s=s.toLowerCase(),u=u.replace("@",""),p=!0);y=!1;u.indexOf("!")>=0&&(u=u.replace("!",""),y=!0);p&&(e=s.toLowerCase(),f=o.toLowerCase());h=!1;switch(u){case"*=":r=o.indexOf(s)>=0;break;case"$=":r=o.indexOf(s,o.length-s.length)>=0;break;case"^=":r=0===o.indexOf(s);break;case"=":r=f===e;break;case">":h=!0;r=f>e;break;case">=":h=!0;r=f>=e;break;case"<":h=!0;r=e>f;break;case"<=":h=!0;r=e>=f;break;default:r=!1}!y||null==f&&h||(r=!r)}else if(null!=u)switch(u){case"?":r=t.fieldTruthy(c);break;case"!":r=!t.fieldTruthy(c);break;case"^":r=t.fieldUndefined(c)}else r=!t.fieldUndefined(c);if(!r){a=!1;break}}return a},p=c({name:"data",fieldValue:function(n){return f.data[n]},fieldUndefined:function(n){return void 0===f.data[n]},fieldTruthy:function(n){return!!f.data[n]}}),!p)?!1:(w=c({name:"meta",fieldValue:function(n){return t[n]()},fieldUndefined:function(n){return null==t[n]()},fieldTruthy:function(n){return!!t[n]()}}),!w)?!1:null!=n.collection&&(b=n.collection.hasElementWithId(t.id()),!b)?!1:null!=n.filter&&0===t.collection().filter(n.filter).size()?!1:(h=function(n,t){var r,i;if(null!=n){if(r=!1,!k.hasCompoundNodes())return!1;for(t=t(),i=0;i<t.length;i++)if(e(n,t[i])){r=!0;break}return r}return!0},h(n.parent,function(){return t.parent()})&&h(n.ancestor,function(){return t.parents()})&&h(n.child,function(){return t.children()})?!!h(n.descendant,function(){return t.descendants()}):!1):!1};r.filter=function(n){var t=this,r=n.cy(),i;return t._private.invalid?r.collection():(i=function(n,i){for(var u,r=0;r<t.length;r++)if(u=t[r],e(u,i))return!0;return!1},null==t._private.selectorText&&(i=function(){return!0}),n.filter(i))};r.matches=function(n){var i=this,t,r;if(i._private.invalid)return!1;for(t=0;t<i.length;t++)if(r=i[t],e(r,n))return!0;return!1};r.toString=r.selector=function(){for(var o,u="",t=function(n){return null==n?"":n},f=function(n){return i.string(n)?'"'+n+'"':t(n)},e=function(n){return" "+n+" "},r=function(i){var o="",l,s,c,u,h;for(i.subject===i&&(o+="$"),l=t(i.group),o+=l.substring(0,l.length-1),u=0;u<i.data.length;u++)s=i.data[u],o+=s.value?"["+s.field+e(t(s.operator))+f(s.value)+"]":"["+t(s.operator)+s.field+"]";for(u=0;u<i.meta.length;u++)c=i.meta[u],o+="[["+c.field+e(t(c.operator))+f(c.value)+"]]";for(u=0;u<i.colonSelectors.length;u++)h=i.colonSelectors[n],o+=h;for(u=0;u<i.ids.length;u++)h="#"+i.ids[n],o+=h;for(u=0;u<i.classes.length;u++)h="."+i.classes[u],o+=h;return null!=i.parent&&(o=r(i.parent)+" > "+o),null!=i.ancestor&&(o=r(i.ancestor)+" "+o),null!=i.child&&(o+=" > "+r(i.child)),null!=i.descendant&&(o+=" "+r(i.descendant)),o},n=0;n<this.length;n++)o=this[n],u+=r(o),this.length>1&&n<this.length-1&&(u+=", ");return u};t.exports=f},{"./is":83,"./util":100}],88:[function(n,t){"use strict";var u=n("../util"),r=n("../is"),i={};i.apply=function(n){var t=this,i=t._private,r;for(i.newStyle&&(i.contextStyles={},i.propDiffs={},t.cleanElements(n,!0)),r=0;r<n.length;r++){var u=n[r],f=t.getContextMeta(u),e=t.getContextStyle(f),o=t.applyContextStyle(f,e,u);t.updateTransitions(u,o.diffProps);t.updateStyleHints(u)}i.newStyle=!1};i.getPropertiesDiff=function(n,t){var i=this,a=i._private.propDiffs=i._private.propDiffs||{},v=n+"-"+t,y=a[v],u,e,k,d;if(y)return y;for(var s=[],p={},r=0;r<i.length;r++){var f=i[r],g="t"===n[r],nt="t"===t[r],h=g!==nt,c=f.mappedProperties.length>0;if(h||c)for(h&&c?u=f.properties:h?u=f.properties:c&&(u=f.mappedProperties),e=0;e<u.length;e++){for(var w=u[e],l=w.name,b=!1,o=r+1;o<i.length;o++)if(k=i[o],d="t"===t[o],d&&(b=null!=k.properties[w.name]))break;p[l]||b||(p[l]=!0,s.push(l))}}return a[v]=s,s};i.getContextMeta=function(n){var f,t=this,i="",e=n._private.styleCxtKey||"",r,u,o;for(t._private.newStyle&&(e=""),r=0;r<t.length;r++)u=t[r],o=u.selector&&u.selector.matches(n),i+=o?"t":"f";return f=t.getPropertiesDiff(e,i),n._private.styleCxtKey=i,{key:i,diffPropNames:f}};i.getContextStyle=function(n){var t=n.key,s=this,e=this._private.contextStyles=this._private.contextStyles||{},r,i,u,h,f,o,c;if(e[t])return e[t];for(r={_private:{key:t}},i=0;i<s.length;i++)if(u=s[i],h="t"===t[i],h)for(f=0;f<u.properties.length;f++)o=u.properties[f],c=r[o.name]=o,c.context=u;return e[t]=r,r};i.applyContextStyle=function(n,t,i){for(var u,c=this,s=n.diffPropNames,h={},o=0;o<s.length;o++){var r=s[o],f=t[r],e=i.pstyle(r);if(!f){if(!e)continue;f=e.bypass?{name:r,deleteBypassed:!0}:{name:r,"delete":!0}}e!==f&&(u=h[r]={prev:e},c.applyParsedProperty(i,f),u.next=i.pstyle(r),u.next&&u.next.bypass&&(u.next=u.next.bypassed))}return{diffProps:h}};i.updateStyleHints=function(n){var t=n._private,h=this,f,i,r;if(!n.removed()){if(f=!1,"nodes"===t.group)for(i=1;i<=h.pieBackgroundN;i++)if(r=n.pstyle("pie-"+i+"-background-size").value,r>0){f=!0;break}t.hasPie=f;var c=n.pstyle("text-transform").strValue,l=n.pstyle("label").strValue,a=n.pstyle("source-label").strValue,v=n.pstyle("target-label").strValue,e=n.pstyle("font-style").strValue,r=n.pstyle("font-size").pfValue+"px",o=n.pstyle("font-family").strValue,s=n.pstyle("font-weight").strValue,y=n.pstyle("text-valign").strValue,p=n.pstyle("text-valign").strValue,w=n.pstyle("text-outline-width").pfValue,b=n.pstyle("text-wrap").strValue,k=n.pstyle("text-max-width").pfValue,u=e+"$"+r+"$"+o+"$"+s+"$"+c+"$"+y+"$"+p+"$"+w+"$"+b+"$"+k;t.labelStyleKey=u;t.sourceLabelKey=u+"$"+a;t.targetLabelKey=u+"$"+v;t.labelKey=u+"$"+l;t.fontKey=e+"$"+s+"$"+r+"$"+o;t.styleKey=Date.now()}};i.applyParsedProperty=function(n,t){var s,f,b=this,i=t,l=n._private.style,o=b.types,k=b.properties[i.name].type,d=i.bypass,e=l[i.name],g=e&&e.bypass,a=n._private,w,h,et,c,y,ot,st,ht;if("curve-style"===t.name&&"haystack"===t.value&&n.isEdge()&&(n.isLoop()||n.source().isParent()||n.target().isParent())&&(i=t=this.parse(t.name,"bezier",d)),i["delete"])return l[i.name]=void 0,!0;if(i.deleteBypassed)return e?e.bypass?(e.bypassed=void 0,!0):!1:!0;if(i.deleteBypass)return e?e.bypass?(l[i.name]=e.bypassed,!0):!1:!0;w=function(){u.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+n.id()+"` for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:case o.mapLayoutData:case o.mapScratch:var s,nt=i.mapped===o.mapLayoutData,tt=i.mapped===o.mapScratch,v=i.field.split(".");for(s=tt||nt?a.scratch:a.data,c=0;c<v.length&&s;c++)y=v[c],s=s[y];if(h=r.number(s)?(s-i.fieldMin)/(i.fieldMax-i.fieldMin):0,0>h?h=0:h>1&&(h=1),k.color){var it=i.valueMin[0],ct=i.valueMax[0],rt=i.valueMin[1],lt=i.valueMax[1],ut=i.valueMin[2],at=i.valueMax[2],ft=null==i.valueMin[3]?1:i.valueMin[3],vt=null==i.valueMax[3]?1:i.valueMax[3],p=[Math.round(it+(ct-it)*h),Math.round(rt+(lt-rt)*h),Math.round(ut+(at-ut)*h),Math.round(ft+(vt-ft)*h)];f={bypass:i.bypass,name:i.name,value:p,strValue:"rgb("+p[0]+", "+p[1]+", "+p[2]+")"}}else{if(!k.number)return!1;et=i.valueMin+(i.valueMax-i.valueMin)*h;f=this.parse(i.name,et,i.bypass,!0)}f||(f=this.parse(i.name,e.strValue,i.bypass,!0));f||w();f.mapping=i;i=f;break;case o.data:case o.layoutData:case o.scratch:var s,nt=i.mapped===o.layoutData,tt=i.mapped===o.scratch,v=i.field.split(".");if(s=tt||nt?a.scratch:a.data)for(c=0;c<v.length;c++)y=v[c],s=s[y];(f=this.parse(i.name,s,i.bypass,!0),f)||(ot=e?e.strValue:"",f=this.parse(i.name,ot,i.bypass,!0));f||w();f.mapping=i;i=f;break;case o.fn:st=i.value;ht=st(n);f=this.parse(i.name,ht,i.bypass,!0);f.mapping=i;i=f;break;case void 0:break;default:return!1}return d?(i.bypassed=g?e.bypassed:e,l[i.name]=i):g?e.bypassed=i:l[i.name]=i,!0};i.cleanElements=function(n,t){for(var f,e,i,o,r,h=this,s=h.properties,u=0;u<n.length;u++)if(f=n[u],t)for(e=f._private.style,i=0;i<s.length;i++)o=s[i],r=e[o.name],r&&(r.bypass?r.bypassed=null:e[o.name]=null);else f._private.style={}};i.update=function(){var n=this._private.cy,t=n.mutableElements();t.updateStyle()};i.updateMappers=function(n){for(var e,i,o,r=this,t=0;t<n.length;t++){for(var u=n[t],s=u._private.style,f=0;f<r.properties.length;f++)e=r.properties[f],i=s[e.name],i&&i.mapping&&(o=i.mapping,this.applyParsedProperty(u,o));this.updateStyleHints(u)}};i.updateTransitions=function(n,t,i){var k=this,s=n._private,o=n.pstyle("transition-property").value,v=n.pstyle("transition-duration").pfValue,y=n.pstyle("transition-delay").pfValue;if(o.length>0&&v>0){for(var p={},w=!1,a=0;a<o.length;a++){var h=o[a],d=n.pstyle(h),c=t[h];if(c){var l,g=c.prev,u=g,f=null!=c.next?c.next:d,e=!1,b=1e-6;u&&(r.number(u.pfValue)&&r.number(f.pfValue)?(e=f.pfValue-u.pfValue,l=u.pfValue+b*e):r.number(u.value)&&r.number(f.value)?(e=f.value-u.value,l=u.value+b*e):r.array(u.value)&&r.array(f.value)&&(e=u.value[0]!==f.value[0]||u.value[1]!==f.value[1]||u.value[2]!==f.value[2],l=u.strValue),e&&(p[h]=f.strValue,this.applyBypass(n,h,l),w=!0))}}if(!w)return;s.transitioning=!0;n.stop();y>0&&n.delay(y);n.animate({css:p},{duration:v,easing:n.pstyle("transition-timing-function").value,queue:!1,complete:function(){i||k.removeBypasses(n,o);s.transitioning=!1}})}else s.transitioning&&(n.stop(),this.removeBypasses(n,o),s.transitioning=!1)};t.exports=i},{"../is":83,"../util":100}],89:[function(n,t){"use strict";var r=n("../is"),u=n("../util"),i={};i.applyBypass=function(n,t,i,f){var a=this,h=[],v,o,c,e,s,b;if("*"===t||"**"===t){if(void 0!==i)for(e=0;e<a.properties.length;e++){var s=a.properties[e],t=s.name,o=this.parse(t,i,!0);o&&h.push(o)}}else if(r.string(t))o=this.parse(t,i,!0),o&&h.push(o);else{if(!r.plainObject(t))return!1;for(v=t,f=i,e=0;e<a.properties.length;e++){var s=a.properties[e],t=s.name,i=v[t];(void 0===i&&(i=v[u.dash2camel(t)]),void 0!==i)&&(o=this.parse(t,i,!0),o&&h.push(o))}}if(0===h.length)return!1;for(c=!1,e=0;e<n.length;e++){for(var p,l=n[e],w={},y=0;y<h.length;y++)s=h[y],f&&(b=l.pstyle(s.name),p=w[s.name]={prev:b}),c=this.applyParsedProperty(l,s)||c,f&&(p.next=l.pstyle(s.name));c&&this.updateStyleHints(l);f&&this.updateTransitions(l,w,!0)}return c};i.overrideBypass=function(n,t,i){var f;for(t=u.camel2dash(t),f=0;f<n.length;f++){var e=n[f],r=e._private.style[t],o=this.properties[t].type,s=o.color,h=o.mutiple;r&&r.bypass?(r.value=i,null!=r.pfValue&&(r.pfValue=i),r.strValue=s?"rgb("+i.join(",")+")":h?i.join(" "):""+i):this.applyBypass(e,t,i)}};i.removeAllBypasses=function(n,t){return this.removeBypasses(n,this.propertyNames,t)};i.removeBypasses=function(n,t,i){for(var s=!0,u=0;u<n.length;u++){for(var r=n[u],h={},f=0;f<t.length;f++){var c=t[f],e=this.properties[c],o=r.pstyle(e.name);if(o&&o.bypass){var l=this.parse(c,"",!0),a=h[e.name]={prev:o};this.applyParsedProperty(r,l);a.next=r.pstyle(e.name)}}this.updateStyleHints(r);i&&this.updateTransitions(r,h,s)}};t.exports=i},{"../is":83,"../util":100}],90:[function(n,t){"use strict";var i=n("../window"),r={};r.getEmSizeInPixels=function(){var n=this.containerCss("font-size");return null!=n?parseFloat(n):1};r.containerCss=function(n){var r=this._private.cy,t=r.container();if(i&&t&&i.getComputedStyle)return i.getComputedStyle(t).getPropertyValue(n)};t.exports=r},{"../window":107}],91:[function(n,t){"use strict";var r=n("../util"),u=n("../is"),i={};i.getRenderedStyle=function(n){return this.getRawStyle(n,!0)};i.getRawStyle=function(n,t){var o=this,n=n[0],i,u,f,e;if(n){for(i={},u=0;u<o.properties.length;u++)f=o.properties[u],e=o.getStylePropertyValue(n,f.name,t),e&&(i[f.name]=e,i[r.dash2camel(f.name)]=e);return i}};i.getStylePropertyValue=function(n,t,i){var o=this,n=n[0],r,f,e;if(n){r=o.properties[t];r.alias&&(r=r.pointsTo);var s=r.type,u=n.pstyle(r.name),h=n.cy().zoom();if(u)return f=u.units?s.implicitUnits||"px":null,e=f?[].concat(u.pfValue).map(function(n){return n*(i?h:1)+f}).join(" "):u.strValue,e}};i.getAnimationStartStyle=function(n,t){for(var e={},r=0;r<t.length;r++){var o=t[r],f=o.name,i=n.pstyle(f);void 0!==i&&(i=u.plainObject(i)?this.parse(f,i.strValue):this.parse(f,i));i&&(e[f]=i)}return e};i.getPropsList=function(n){var s=this,e=[],i=n,o=s.properties,u,t;if(i)for(u=Object.keys(i),t=0;t<u.length;t++){var f=u[t],h=i[f],c=o[f]||o[r.camel2dash(f)],l=this.parse(c.name,h);e.push(l)}return e};t.exports=i},{"../is":83,"../util":100}],92:[function(n,t){"use strict";var f=n("../is"),u=n("../util"),e=n("../selector"),r=function(n){return this instanceof r?f.core(n)?(this._private={cy:n,coreStyle:{}},this.length=0,void this.resetToDefault()):void u.error("A style must have a core reference"):new r(n)},i=r.prototype;i.instanceString=function(){return"style"};i.clear=function(){for(var t,n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t=this._private,t.newStyle=!0,this};i.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};i.core=function(){return this._private.coreStyle};i.selector=function(n){var i="core"===n?null:new e(n),t=this.length++;return this[t]={selector:i,properties:[],mappedProperties:[],index:t},this};i.css=function(){var e=this,t=arguments,f,i,r,n;switch(t.length){case 1:for(f=t[0],i=0;i<e.properties.length;i++)r=e.properties[i],n=f[r.name],void 0===n&&(n=f[u.dash2camel(r.name)]),void 0!==n&&this.cssRule(r.name,n);break;case 2:this.cssRule(t[0],t[1])}return this};i.style=i.css;i.cssRule=function(n,t){var i=this.parse(n,t),r,u;return i&&(r=this.length-1,this[r].properties.push(i),this[r].properties[i.name]=i,i.name.match(/pie-(\d+)-background-size/)&&i.value&&(this._private.hasPie=!0),i.mapped&&this[r].mappedProperties.push(i),u=!this[r].selector,u&&(this._private.coreStyle[i.name]=i)),this};r.fromJson=function(n,t){var i=new r(n);return i.fromJson(t),i};r.fromString=function(n,t){return new r(n).fromString(t)};[n("./apply"),n("./bypass"),n("./container"),n("./get-for-ele"),n("./json"),n("./string-sheet"),n("./properties"),n("./parse")].forEach(function(n){u.extend(i,n)});r.types=i.types;r.properties=i.properties;t.exports=r},{"../is":83,"../selector":87,"../util":100,"./apply":88,"./bypass":89,"./container":90,"./get-for-ele":91,"./json":93,"./parse":94,"./properties":95,"./string-sheet":96}],93:[function(n,t){"use strict";var i={};i.applyFromJson=function(n){for(var r,f,s,t=this,i=0;i<n.length;i++){var u=n[i],h=u.selector,e=u.style||u.css,o=Object.keys(e);for(t.selector(h),r=0;r<o.length;r++)f=o[r],s=e[f],t.css(f,s)}return t};i.fromJson=function(n){var t=this;return t.resetToDefault(),t.applyFromJson(n),t};i.json=function(){for(var r,t=[],n=this.defaultLength;n<this.length;n++){for(var u=this[n],f=u.selector,e=u.properties,o={},i=0;i<e.length;i++)r=e[i],o[r.name]=r.strValue;t.push({selector:f?f.toString():"core",style:o})}return t};t.exports=i},{}],94:[function(n,t){"use strict";var i=n("../util"),r=n("../is"),e=n("../math"),u={},f;u.parse=function(n,t,u,f){var o=this,e,s,h;return r.fn(t)?o.parseImpl(n,t,u,f):(s=[n,t,u,f].join("$"),h=o.propCache=o.propCache||{},(e=h[s])||(e=h[s]=o.parseImpl(n,t,u,f)),e=i.copy(e),e&&(e.value=i.copy(e.value)),e)};f=function(n,t,u,f){var nt=this,d,o,v,c,et,ot,bt,kt,tt,y,p,st,it,rt,s,ut,ht,ft,g,k,ct,lt,at,vt,yt,pt,l,dt,wt;n=i.camel2dash(n);var a=nt.properties[n],gt=t,h=nt.types;if(!a||void 0===t||null===t||(a.alias&&(a=a.pointsTo,n=a.name),d=r.string(t),d&&(t=t.trim()),o=a.type,!o))return null;if(u&&(""===t||null===t))return{name:n,value:t,bypass:!0,deleteBypass:!0};if(r.fn(t))return{name:n,value:t,strValue:"fn",mapped:h.fn,bypass:u};if(d&&!f){if((v=new RegExp(h.data.regex).exec(t))||(et=new RegExp(h.layoutData.regex).exec(t))||(bt=new RegExp(h.scratch.regex).exec(t)))return u?!1:(tt=v?h.data:et?h.layoutData:h.scratch,v=v||et||bt,{name:n,value:v,strValue:""+t,mapped:tt,field:v[1],bypass:u});if((c=new RegExp(h.mapData.regex).exec(t))||(ot=new RegExp(h.mapLayoutData.regex).exec(t))||(kt=new RegExp(h.mapScratch.regex).exec(t))){if(u||o.multiple||(tt=c?h.mapData:ot?h.mapLayoutData:h.mapScratch,c=c||ot||kt,!o.color&&!o.number)||(y=this.parse(n,c[4]),!y||y.mapped)||(p=this.parse(n,c[5]),!p||p.mapped)||y.value===p.value)return!1;if(o.color){var w=y.value,b=p.value,ni=!(w[0]!==b[0]||w[1]!==b[1]||w[2]!==b[2]||w[3]!==b[3]&&(null!=w[3]&&1!==w[3]||null!=b[3]&&1!==b[3]));if(ni)return!1}return{name:n,value:c,strValue:""+t,mapped:tt,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:y.value,valueMax:p.value,bypass:u}}}if(o.multiple&&"multiple"!==f)return(st=d?t.split(/\s+/):r.array(t)?t:[t],o.evenMultiple&&st.length%2!=0)?null:(it=st.map(function(t){var i=nt.parse(n,t,u,"multiple");return null!=i.pfValue?i.pfValue:i.value}),{name:n,value:it,pfValue:it,strValue:it.join(" "),bypass:u,units:o.number&&!o.unitless?o.implicitUnits||"px":void 0});if(rt=function(){for(var r,i=0;i<o.enums.length;i++)if(r=o.enums[i],r===t)return{name:n,value:t,strValue:""+t,bypass:u};return null},o.number)return(ut="px",(o.units&&(s=o.units),o.implicitUnits&&(ut=o.implicitUnits),o.unitless)||(d?(ht="px|em"+(o.allowPercent?"|\\%":""),s&&(ht=s),ft=t.match("^("+i.regex.number+")("+ht+")?$"),ft&&(t=ft[1],s=ft[2]||ut)):s&&!o.implicitUnits||(s=ut)),t=parseFloat(t),isNaN(t)&&void 0===o.enums)?null:isNaN(t)&&void 0!==o.enums?(t=gt,rt()):o.integer&&!r.integer(t)?null:void 0!==o.min&&t<o.min||void 0!==o.max&&t>o.max?null:(g={name:n,value:t,strValue:""+t+(s?s:""),units:s,bypass:u},g.pfValue=o.unitless||"px"!==s&&"em"!==s?t:"px"!==s&&s?this.getEmSizeInPixels()*t:t,"ms"!==s&&"s"!==s||(g.pfValue="ms"===s?t:1e3*t),"deg"!==s&&"rad"!==s||(g.pfValue="rad"===s?t:e.deg2rad(t)),g);if(o.propList){if(k=[],ct=""+t,"none"!==ct){for(lt=ct.split(","),l=0;l<lt.length;l++)at=lt[l].trim(),nt.properties[at]&&k.push(at);if(0===k.length)return null}return{name:n,value:k,strValue:0===k.length?"none":k.join(", "),bypass:u}}if(o.color)return vt=i.color2tuple(t),vt?{name:n,value:vt,strValue:""+t,bypass:u,roundValue:!0}:null;if(o.regex||o.regexes){if(o.enums&&(yt=rt(),yt))return yt;for(pt=o.regexes?o.regexes:[o.regex],l=0;l<pt.length;l++)if(dt=new RegExp(pt[l]),wt=dt.exec(t),wt)return{name:n,value:wt,strValue:""+t,bypass:u};return null}return o.string?{name:n,value:""+t,strValue:""+t,bypass:u}:o.enums?rt():null};u.parseImpl=f;t.exports=u},{"../is":83,"../math":85,"../util":100}],95:[function(n,t){"use strict";var r=n("../util"),i={};!function(){var f=r.regex.number,v=r.regex.rgbaNoBackRefs,y=r.regex.hslaNoBackRefs,p=r.regex.hex3,w=r.regex.hex6,e=function(n){return"^"+n+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(n){var t=f+"|\\w+|"+v+"|"+y+"|"+p+"|"+w;return"^"+n+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+t+")\\s*\\,\\s*("+t+")\\)$"},l,s,t;i.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgCrossOrigin:{enums:["anonymous","use-credentials"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},easing:{regexes:["^(spring)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var n=i.types,u=i.properties=[{name:"label",type:n.text},{name:"text-rotation",type:n.textRotation},{name:"text-margin-x",type:n.bidirectionalSize},{name:"text-margin-y",type:n.bidirectionalSize},{name:"source-label",type:n.text},{name:"source-text-rotation",type:n.textRotation},{name:"source-text-margin-x",type:n.bidirectionalSize},{name:"source-text-margin-y",type:n.bidirectionalSize},{name:"source-text-offset",type:n.size},{name:"target-label",type:n.text},{name:"target-text-rotation",type:n.textRotation},{name:"target-text-margin-x",type:n.bidirectionalSize},{name:"target-text-margin-y",type:n.bidirectionalSize},{name:"target-text-offset",type:n.size},{name:"text-valign",type:n.valign},{name:"text-halign",type:n.halign},{name:"color",type:n.color},{name:"text-outline-color",type:n.color},{name:"text-outline-width",type:n.size},{name:"text-outline-opacity",type:n.zeroOneNumber},{name:"text-opacity",type:n.zeroOneNumber},{name:"text-background-color",type:n.color},{name:"text-background-margin",type:n.size},{name:"text-background-opacity",type:n.zeroOneNumber},{name:"text-border-opacity",type:n.zeroOneNumber},{name:"text-border-color",type:n.color},{name:"text-border-width",type:n.size},{name:"text-border-style",type:n.borderStyle},{name:"text-background-shape",type:n.textBackgroundShape},{name:"text-transform",type:n.textTransform},{name:"text-wrap",type:n.textWrap},{name:"text-max-width",type:n.size},{name:"text-events",type:n.bool},{name:"font-family",type:n.fontFamily},{name:"font-style",type:n.fontStyle},{name:"font-weight",type:n.fontWeight},{name:"font-size",type:n.size},{name:"min-zoomed-font-size",type:n.size},{name:"events",type:n.bool},{name:"display",type:n.display},{name:"visibility",type:n.visibility},{name:"opacity",type:n.zeroOneNumber},{name:"z-index",type:n.nonNegativeInt},{name:"overlay-padding",type:n.size},{name:"overlay-color",type:n.color},{name:"overlay-opacity",type:n.zeroOneNumber},{name:"shadow-blur",type:n.size},{name:"shadow-color",type:n.color},{name:"shadow-opacity",type:n.zeroOneNumber},{name:"shadow-offset-x",type:n.bidirectionalSize},{name:"shadow-offset-y",type:n.bidirectionalSize},{name:"text-shadow-blur",type:n.size},{name:"text-shadow-color",type:n.color},{name:"text-shadow-opacity",type:n.zeroOneNumber},{name:"text-shadow-offset-x",type:n.bidirectionalSize},{name:"text-shadow-offset-y",type:n.bidirectionalSize},{name:"transition-property",type:n.propList},{name:"transition-duration",type:n.time},{name:"transition-delay",type:n.time},{name:"transition-timing-function",type:n.easing},{name:"height",type:n.nodeSize},{name:"width",type:n.nodeSize},{name:"shape",type:n.nodeShape},{name:"shape-polygon-points",type:n.polygonPointList},{name:"background-color",type:n.color},{name:"background-opacity",type:n.zeroOneNumber},{name:"background-blacken",type:n.nOneOneNumber},{name:"padding",type:n.size},{name:"border-color",type:n.color},{name:"border-opacity",type:n.zeroOneNumber},{name:"border-width",type:n.size},{name:"border-style",type:n.borderStyle},{name:"background-image",type:n.url},{name:"background-image-crossorigin",type:n.bgCrossOrigin},{name:"background-image-opacity",type:n.zeroOneNumber},{name:"background-position-x",type:n.bgPos},{name:"background-position-y",type:n.bgPos},{name:"background-repeat",type:n.bgRepeat},{name:"background-fit",type:n.bgFit},{name:"background-clip",type:n.bgClip},{name:"background-width",type:n.bgWH},{name:"background-height",type:n.bgWH},{name:"position",type:n.position},{name:"compound-sizing-wrt-labels",type:n.compoundIncludeLabels},{name:"line-style",type:n.lineStyle},{name:"line-color",type:n.color},{name:"curve-style",type:n.curveStyle},{name:"haystack-radius",type:n.zeroOneNumber},{name:"control-point-step-size",type:n.size},{name:"control-point-distances",type:n.bidirectionalSizes},{name:"control-point-weights",type:n.numbers},{name:"segment-distances",type:n.bidirectionalSizes},{name:"segment-weights",type:n.numbers},{name:"edge-distances",type:n.edgeDistances},{name:"selection-box-color",type:n.color},{name:"selection-box-opacity",type:n.zeroOneNumber},{name:"selection-box-border-color",type:n.color},{name:"selection-box-border-width",type:n.size},{name:"active-bg-color",type:n.color},{name:"active-bg-opacity",type:n.zeroOneNumber},{name:"active-bg-size",type:n.size},{name:"outside-texture-bg-color",type:n.color},{name:"outside-texture-bg-opacity",type:n.zeroOneNumber}],c=i.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];for(i.pieBackgroundN=16,u.push({name:"pie-size",type:n.bgSize}),t=1;t<=i.pieBackgroundN;t++)u.push({name:"pie-"+t+"-background-color",type:n.color}),u.push({name:"pie-"+t+"-background-size",type:n.percent}),u.push({name:"pie-"+t+"-background-opacity",type:n.zeroOneNumber});for(l=i.arrowPrefixes=["source","mid-source","target","mid-target"],[{name:"arrow-shape",type:n.arrowShape},{name:"arrow-color",type:n.color},{name:"arrow-fill",type:n.arrowFill}].forEach(function(n){l.forEach(function(t){var i=t+"-"+n.name,r=n.type;u.push({name:i,type:r})})},{}),i.propertyNames=u.map(function(n){return n.name}),t=0;t<u.length;t++)s=u[t],u[s.name]=s;for(t=0;t<c.length;t++){var h=c[t],b=u[h.pointsTo],a={name:h.name,alias:!0,pointsTo:b};u.push(a);u[h.name]=a}}();i.getDefaultProperty=function(n){return this.getDefaultProperties()[n]};i.getDefaultProperties=r.memoize(function(){for(var t,e=r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-margin":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",padding:0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(n,t){for(var u,f,r=1;r<=i.pieBackgroundN;r++)u=t.name.replace("{{i}}",r),f=t.value,n[u]=f;return n},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(n,t){return i.arrowPrefixes.forEach(function(i){var r=i+"-"+t.name,u=t.value;n[r]=u}),n},{})),f={},n=0;n<this.properties.length;n++)if(t=this.properties[n],!t.pointsTo){var u=t.name,o=e[u],s=this.parse(u,o);f[u]=s}return f});i.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125});this.defaultLength=this.length};t.exports=i},{"../util":100}],96:[function(n,t){"use strict";var i=n("../util"),u=n("../selector"),r={};r.applyFromString=function(n){function y(){t=t.length>w.length?t.substr(w.length):""}function p(){r=r.length>f.length?r.substr(f.length):""}for(var w,r,f,it=this,h=this,t=""+n,e,o,g,b,k,l,c,s,tt,v,a,t=t.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){if(c=t.match(/^\s*$/),c)break;if(e=t.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/),!e){i.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+t);break}if(w=e[0],o=e[1],"core"!==o&&(g=new u(o),g._private.invalid)){i.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+o);y();continue}for(b=e[2],k=!1,r=b,l=[];;){if(c=r.match(/^\s*$/),c)break;if(s=r.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/),!s){i.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+b);k=!0;break}f=s[0];var d=s[1],nt=s[2],a=it.properties[d];a?(tt=h.parse(d,nt),tt?(l.push({name:d,val:nt}),p()):(i.error("Skipping property: Invalid property definition in: "+f),p())):(i.error("Skipping property: Invalid property name in: "+f),p())}if(k){y();break}for(h.selector(o),v=0;v<l.length;v++)a=l[v],h.css(a.name,a.val);y()}return h};r.fromString=function(n){var t=this;return t.resetToDefault(),t.applyFromString(n),t};t.exports=r},{"../selector":87,"../util":100}],97:[function(n,t){"use strict";var f=n("./is"),e=n("./util"),u=n("./style"),r=function(){return this instanceof r?void(this.length=0):new r},i=r.prototype;i.instanceString=function(){return"stylesheet"};i.selector=function(n){var t=this.length++;return this[t]={selector:n,properties:[]},this};i.css=function(n,t){var h=this.length-1,s,r,o,i,n,t;if(f.string(n))this[h].properties.push({name:n,value:t});else if(f.plainObject(n))for(s=n,r=0;r<u.properties.length;r++)o=u.properties[r],i=s[o.name],(void 0===i&&(i=s[e.dash2camel(o.name)]),void 0!==i)&&(n=o.name,t=i,this[h].properties.push({name:n,value:t}));return this};i.style=i.css;i.generateStyle=function(n){for(var r,f,t=new u(n),i=0;i<this.length;i++){var e=this[i],s=e.selector,o=e.properties;for(t.selector(s),r=0;r<o.length;r++)f=o[r],t.css(f.name,f.value)}return t};t.exports=r},{"./is":83,"./style":92,"./util":100}],98:[function(n,t){
/*! Weaver licensed under MIT (https://tldrlegal.com/license/mit-license), copyright Max Franz */
var c,s,r;"use strict";var u=n("./window"),h=n("./util"),y=n("./promise"),l=n("./event"),f=n("./define"),i=n("./is"),o=function(n){if(!(this instanceof o))return new o(n);var t=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};i.plainObject(n)&&null!=n.disabled&&(t.disabled=!!n.disabled)},e=o.prototype,a=function(n){return i.fn(n)?n.toString():"JSON.parse('"+JSON.stringify(n)+"')"},v=function(n){var t,u,s,r,o;if(i.object(n)&&n.fn?(t=c(n.fn,n.name),u=n.name,n=n.fn):i.fn(n)?(t=n.toString(),u=n.name):i.string(n)?t=n:i.object(n)&&(t=n.proto?"":n.name+" = {};",u=n.name,n=n.obj),t+="\n",s=function(n,i){var r,u;if(n.prototype){r=!1;for(u in n.prototype){r=!0;break}r&&(t+=v({name:i,obj:n,proto:!0},n))}},n.prototype&&null!=u)for(r in n.prototype){var h="",f=n.prototype[r],l=a(f),e=u+".prototype."+r;h+=e+" = "+l+";\n";h&&(t+=h);s(f,e)}if(!i.string(n))for(r in n){if(o="",n.hasOwnProperty(r)){var f=n[r],l=a(f),e=u+'["'+r+'"]';o+=e+" = "+l+";\n"}o&&(t+=o);s(f,e)}return t},p=function(n){return i.string(n)&&n.match(/\.js$/)};h.extend(e,{instanceString:function(){return"thread"},require:function(n,t){var r=this._private.requires;if(p(n))return this._private.files.push(n),this;if(t)n=i.fn(n)?{name:t,fn:n}:{name:t,obj:n};else if(i.fn(n)){if(!n.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';n={name:n.name,fn:n}}return r.push(n),this},pass:function(n){return this._private.pass.push(n),this},run:function(r,f){var o=this,e=this._private,s,h,c;if(f=f||e.pass.shift(),e.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";return e.running?e.queue=e.queue.then(function(){return o.run(r,f)}):(s=null!=u&&!e.disabled,h=!u&&"undefined"!=typeof t&&!e.disabled,o.trigger("run"),c=new y(function(t,c){var k,d,g,y,w,p;e.running=!0;var b=e.ran,tt=i.string(r)?r:r.toString(),a="\n"+e.requires.map(function(n){return v(n)}).concat(e.files.map(function(n){if(s){var t=function(n){return n.match(/^\.\//)||n.match(/^\.\./)?u.location.origin+u.location.pathname+n:n.match(/^\//)?u.location.origin+"/"+n:n};return'importScripts("'+t(n)+'");'}if(h)return'eval( require("fs").readFileSync("'+n+'", { encoding: "utf8" }) );';throw"External file `"+n+"` can not be required without any threading technology.";})).concat(["( function(){","var ret = ("+tt+")("+JSON.stringify(f)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(e.requires=[],e.files=[],s)b||(g=a+"",a='function _ref_(o){ return eval(o); };\nfunction broadcast(m){ return message(m); };\nfunction message(m){ postMessage(m); };\nfunction listen(fn){\n  self.addEventListener("message", function(m){ \n    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){\n    } else { \n      fn( m.data );\n    }\n  });\n};\nself.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });\nfunction resolve(v){ postMessage({ $$resolve: v }); };\nfunction reject(v){ postMessage({ $$reject: v }); };',a+=g,k=new Blob([a],{type:"application/javascript"}),d=u.URL.createObjectURL(k)),y=e.webworker=e.webworker||new Worker(d),b&&y.postMessage({$$eval:a}),y.addEventListener("message",p=function(n){var r=i.object(n)&&i.object(n.data);r&&"$$resolve"in n.data?(y.removeEventListener("message",p),t(n.data.$$resolve)):r&&"$$reject"in n.data?(y.removeEventListener("message",p),c(n.data.$$reject)):o.trigger(new l(n,{type:"message",message:n.data}))},!1),b||y.postMessage("$$start");else if(h)e.child||(e.child=n("child_process").fork(n("path").join(__dirname,"thread-node-fork"))),w=e.child,w.on("message",p=function(n){i.object(n)&&"$$resolve"in n?(w.removeListener("message",p),t(n.$$resolve)):i.object(n)&&"$$reject"in n?(w.removeListener("message",p),c(n.$$reject)):o.trigger(new l({},{type:"message",message:n}))}),w.send({$$eval:a});else{var it=t,rt=c,nt=e.timer=e.timer||{listeners:[],exec:function(){a='function _ref_(o){ return eval(o); };\nfunction broadcast(m){ return message(m); };\nfunction message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };\nfunction listen(fn){ timer.listeners.push( fn ); };\nfunction resolve(v){ promiseResolve(v); };\nfunction reject(v){ promiseReject(v); };'+a;eval(a)},message:function(n){for(var r,i=nt.listeners,t=0;t<i.length;t++)r=i[t],r(n)}};nt.exec()}}).then(function(n){return e.running=!1,e.ran=!0,o.trigger("ran"),n}),null==e.queue&&(e.queue=c),c)},message:function(n){var t=this._private;return t.webworker&&t.webworker.postMessage(n),t.child&&t.child.send(n),t.timer&&t.timer.message(n),this},stop:function(){var n=this._private;return n.webworker&&n.webworker.terminate(),n.child&&n.child.kill(),n.timer,n.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});c=function(n,t){var i=n.toString();return i.replace(/function\s*?\S*?\s*?\(/,"function "+t+"(")};s=function(n){return n=n||{},function(t,i){var r=c(t,"_$_$_"+n.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+n.name+"( _$_$_"+n.name+(arguments.length>1?", "+JSON.stringify(i):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};h.extend(e,{reduce:s({name:"reduce"}),reduceRight:s({name:"reduceRight"}),map:s({name:"map"})});r=e;r.promise=r.run;r.terminate=r.halt=r.stop;r.include=r.require;h.extend(e,{on:f.on(),one:f.on({unbindSelfOnTrigger:!0}),off:f.off(),trigger:f.trigger()});f.eventAliasesOn(e);t.exports=o},{"./define":44,"./event":45,"./is":83,"./promise":86,"./util":100,"./window":107,child_process:void 0,path:void 0}],99:[function(n,t){"use strict";var i=n("../is");t.exports={hex2tuple:function(n){if((4===n.length||7===n.length)&&"#"===n[0]){var i,r,u,f=4===n.length,t=16;return f?(i=parseInt(n[1]+n[1],t),r=parseInt(n[2]+n[2],t),u=parseInt(n[3]+n[3],t)):(i=parseInt(n[1]+n[2],t),r=parseInt(n[3]+n[4],t),u=parseInt(n[5]+n[6],t)),[i,r,u]}},hsl2tuple:function(n){function s(n,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?n+6*(t-n)*i:.5>i?t:2/3>i?n+(t-n)*(2/3-i)*6:n}var a,t,r,i,u,h,c,l,f=new RegExp("^"+this.regex.hsla+"$").exec(n),e,o;if(f){if(t=parseInt(f[1]),0>t?t=(360- -1*t%360)%360:t>360&&(t%=360),t/=360,r=parseFloat(f[2]),0>r||r>100)return;if(r/=100,i=parseFloat(f[3]),0>i||i>100)return;if(i/=100,u=f[4],void 0!==u&&(u=parseFloat(u),0>u||u>1))return;0===r?h=c=l=Math.round(255*i):(e=.5>i?i*(1+r):i+r-i*r,o=2*i-e,h=Math.round(255*s(o,e,t+1/3)),c=Math.round(255*s(o,e,t)),l=Math.round(255*s(o,e,t-1/3)));a=[h,c,l,u]}return a},rgb2tuple:function(n){var f,e=new RegExp("^"+this.regex.rgba+"$").exec(n),i,u,t,o,s,r;if(e){for(f=[],i=[],u=1;3>=u;u++){if(t=e[u],"%"===t[t.length-1]&&(i[u]=!0),t=parseFloat(t),i[u]&&(t=t/100*255),0>t||t>255)return;f.push(Math.floor(t))}if(o=i[1]||i[2]||i[3],s=i[1]&&i[2]&&i[3],o&&!s)return;if(r=e[4],void 0!==r){if(r=parseFloat(r),0>r||r>1)return;f.push(r)}}return f},colorname2tuple:function(n){return this.colors[n.toLowerCase()]},color2tuple:function(n){return(i.array(n)?n:null)||this.colorname2tuple(n)||this.hex2tuple(n)||this.rgb2tuple(n)||this.hsl2tuple(n)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":83}],100:[function(n,t){"use strict";var r=n("../is"),u=n("../math"),i={trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(n){return this.extend({},n)},copy:function(n){return null==n?n:r.array(n)?n.slice():r.plainObject(n)?this.clone(n):n},uuid:function(n,t){for(t=n="";n++<36;t+=51*n&52?(15^n?8^Math.random()*(20^n?16:4):4).toString(16):"-");return t}};i.makeBoundingBox=u.makeBoundingBox.bind(u);i._staticEmptyObject={};i.staticEmptyObject=function(){return i._staticEmptyObject};i.extend=null!=Object.assign?Object.assign:function(n){for(var i,f,r,e,u=arguments,t=1;t<u.length;t++)if(i=u[t],i)for(f=Object.keys(i),r=0;r<f.length;r++)e=f[r],n[e]=i[e];return n};i["default"]=function(n,t){return void 0===n?t:n};i.removeFromArray=function(n,t,i){for(var r=n.length;r>=0&&(n[r]!==t||(n.splice(r,1),i));r--);};i.clearArray=function(n){n.splice(0,n.length)};i.getPrefixedProperty=function(n,t,i){return i&&(t=this.prependCamel(i,t)),n[t]};i.setPrefixedProperty=function(n,t,i,r){i&&(t=this.prependCamel(i,t));n[t]=r};[n("./colors"),n("./maps"),{memoize:n("./memoize")},n("./regex"),n("./strings"),n("./timing")].forEach(function(n){i.extend(i,n)});t.exports=i},{"../is":83,"../math":85,"./colors":99,"./maps":101,"./memoize":102,"./regex":103,"./strings":104,"./timing":105}],101:[function(n,t){"use strict";var i=n("../is");t.exports={mapEmpty:function(n){return null!=n?0===Object.keys(n).length:!0},pushMap:function(n){var t=this.getMap(n);null==t?this.setMap(this.extend({},n,{value:[n.value]})):t.push(n.value)},setMap:function(n){for(var t,r=n.map,f=n.keys,e=f.length,u=0;e>u;u++)t=f[u],i.plainObject(t)&&this.error("Tried to set map with object key"),u<f.length-1?(null==r[t]&&(r[t]={}),r=r[t]):r[t]=n.value},getMap:function(n){for(var u,t=n.map,f=n.keys,e=f.length,r=0;e>r;r++)if(u=f[r],i.plainObject(u)&&this.error("Tried to get map with object key"),t=t[u],null==t)return t;return t},deleteMap:function(n){for(var u,c,e,f,o,t=n.map,s=n.keys,l=s.length,h=n.keepChildren,r=0;l>r;r++)if(u=s[r],i.plainObject(u)&&this.error("Tried to delete map with object key"),c=r===n.keys.length-1,c)if(h)for(e=Object.keys(t),f=0;f<e.length;f++)o=e[f],h[o]||(t[o]=void 0);else t[u]=void 0;else t=t[u]}}},{"../is":83}],102:[function(n,t){"use strict";t.exports=function(n,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);return t.join("$")});var i=function(){var r,u=this,f=arguments,e=t.apply(u,f),o=i.cache;return(r=o[e])||(r=o[e]=n.apply(u,f)),r};return i.cache={},i}},{}],103:[function(n,t){"use strict";var i="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",r="rgb[a]?\\(("+i+"[%]?)\\s*,\\s*("+i+"[%]?)\\s*,\\s*("+i+"[%]?)(?:\\s*,\\s*("+i+"))?\\)",u="rgb[a]?\\((?:"+i+"[%]?)\\s*,\\s*(?:"+i+"[%]?)\\s*,\\s*(?:"+i+"[%]?)(?:\\s*,\\s*(?:"+i+"))?\\)",f="hsl[a]?\\(("+i+")\\s*,\\s*("+i+"[%])\\s*,\\s*("+i+"[%])(?:\\s*,\\s*("+i+"))?\\)",e="hsl[a]?\\((?:"+i+")\\s*,\\s*(?:"+i+"[%])\\s*,\\s*(?:"+i+"[%])(?:\\s*,\\s*(?:"+i+"))?\\)";t.exports={regex:{number:i,rgba:r,rgbaNoBackRefs:u,hsla:f,hslaNoBackRefs:e,hex3:"\\#[0-9a-fA-F]{3}",hex6:"\\#[0-9a-fA-F]{6}"}}},{}],104:[function(n,t){"use strict";var i=n("./memoize"),r=n("../is");t.exports={camel2dash:i(function(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}),dash2camel:i(function(n){return n.replace(/(-\w)/g,function(n){return n[1].toUpperCase()})}),prependCamel:i(function(n,t){return n+t[0].toUpperCase()+t.substring(1)},function(n,t){return n+"$"+t}),capitalize:function(n){return r.emptyString(n)?n:n.charAt(0).toUpperCase()+n.substring(1)}}},{"../is":83,"./memoize":102}],105:[function(n,t){"use strict";var i=n("../window"),u=n("../is"),f=i?i.performance:null,r={},o=i?function(){return i.requestAnimationFrame?function(n){i.requestAnimationFrame(n)}:i.mozRequestAnimationFrame?function(n){i.mozRequestAnimationFrame(n)}:i.webkitRequestAnimationFrame?function(n){i.webkitRequestAnimationFrame(n)}:i.msRequestAnimationFrame?function(n){i.msRequestAnimationFrame(n)}:void 0}():function(n){n&&setTimeout(function(){n(e())},1e3/60)},e;r.requestAnimationFrame=function(n){o(n)};e=f&&f.now?function(){return f.now()}:function(){return Date.now()};r.performanceNow=e;r.throttle=function(n,t,i){var f=!0,e=!0;return i===!1?f=!1:u.plainObject(i)&&(f="leading"in i?i.leading:f,e="trailing"in i?i.trailing:e),i=i||{},i.leading=f,i.maxWait=t,i.trailing=e,r.debounce(n,t,i)};r.now=function(){return Date.now()};r.debounce=function(n,t,i){var e,f,s,h,o,r,y,p=this,c=0,l=!1,a=!0,v,w,b;if(u.fn(n))return(t=Math.max(0,t)||0,i===!0)?(v=!0,a=!1):u.plainObject(i)&&(v=i.leading,l="maxWait"in i&&(Math.max(t,i.maxWait)||0),a="trailing"in i?i.trailing:a),w=function(){var i=t-(p.now()-h),u;0>=i?(f&&clearTimeout(f),u=y,f=r=y=void 0,u&&(c=p.now(),s=n.apply(o,e),r||f||(e=o=null))):r=setTimeout(w,i)},b=function(){r&&clearTimeout(r);f=r=y=void 0;(a||l!==t)&&(c=p.now(),s=n.apply(o,e),r||f||(e=o=null))},function(){var k,u,i;return(e=arguments,h=p.now(),o=this,y=a&&(r||!v),l===!1)?k=v&&!r:(f||v||(c=h),u=l-(h-c),i=0>=u,i?(f&&(f=clearTimeout(f)),c=h,s=n.apply(o,e)):f||(f=setTimeout(b,u))),i&&r?r=clearTimeout(r):r||t===l||(r=setTimeout(w,t)),k&&(i=!0,s=n.apply(o,e)),!i||r||f||(e=o=null),s}};t.exports=r},{"../is":83,"../window":107}],106:[function(n,t){t.exports="2.7.16"},{}],107:[function(n,t){t.exports="undefined"==typeof window?null:window},{}]},{},[82])(82)});